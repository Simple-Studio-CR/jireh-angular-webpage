"use strict";(self.webpackChunkdemo2=self.webpackChunkdemo2||[]).push([[675],{7136:(P,C,c)=>{c.d(C,{w:()=>m});var d=c(5e3);let m=(()=>{class h{constructor(){this.class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bold w-200px",this.dataKtMenu="true"}ngOnInit(){}}return h.\u0275fac=function(Z){return new(Z||h)},h.\u0275cmp=d.Xpm({type:h,selectors:[["app-dropdown-menu2"]],hostVars:3,hostBindings:function(Z,s){2&Z&&(d.uIk("data-kt-menu",s.dataKtMenu),d.Tol(s.class))},decls:33,vars:0,consts:[[1,"menu-item","px-3"],[1,"menu-content","fs-6","text-dark","fw-bolder","px-3","py-4"],[1,"separator","mb-3","opacity-75"],[1,"menu-link","px-3","cursor-pointer"],["data-kt-menu-trigger","hover","data-kt-menu-placement","right-start","data-kt-menu-flip","left-start, top",1,"menu-item","px-3"],[1,"menu-title"],[1,"menu-arrow"],[1,"menu-sub","menu-sub-dropdown","w-175px","py-4"],[1,"separator","mt-3","opacity-75"],[1,"menu-content","px-3","py-3"],[1,"btn","btn-primary","btn-sm","px-4","cursor-pointer"]],template:function(Z,s){1&Z&&(d.TgZ(0,"div",0)(1,"div",1),d._uU(2," Quick Actions "),d.qZA()(),d._UZ(3,"div",2),d.TgZ(4,"div",0)(5,"a",3),d._uU(6," New Ticket "),d.qZA()(),d.TgZ(7,"div",0)(8,"a",3),d._uU(9," New Customer "),d.qZA()(),d.TgZ(10,"div",4)(11,"a",3)(12,"span",5),d._uU(13,"New Group"),d.qZA(),d._UZ(14,"span",6),d.qZA(),d.TgZ(15,"div",7)(16,"div",0)(17,"a",3),d._uU(18," Admin Group "),d.qZA()(),d.TgZ(19,"div",0)(20,"a",3),d._uU(21," Staff Group "),d.qZA()(),d.TgZ(22,"div",0)(23,"a",3),d._uU(24," Member Group "),d.qZA()()()(),d.TgZ(25,"div",0)(26,"a",3),d._uU(27," New Contact "),d.qZA()(),d._UZ(28,"div",8),d.TgZ(29,"div",0)(30,"div",9)(31,"a",10),d._uU(32," Generate Reports "),d.qZA()()())},encapsulation:2}),h})()},5512:(P,C,c)=>{c.r(C),c.d(C,{ReportsModule:()=>Ne});var d=c(9808),m=c(4521),h=c(5057),b=c(6298),Z=c(5802),s=c(3075),e=c(5e3),u=c(2843),v=c(262),T=c(520),g=c(4563),I=c(7560);let N=(()=>{class r{constructor(t,i,o,a){this.http=t,this.authService=i,this.router=o,this.variables=a}notAllowed(t){return 401==t.status||403==t.status}findControlByWarehouse(t,i,o,a){return this.http.get(this.variables.getServiceEndpoint()+"/controlReport/get/"+t+"/"+i+"/"+o+"/"+a,{}).pipe((0,v.K)(l=>(this.notAllowed(l),(0,u._)(l))))}findControlByClient(t,i,o,a){return this.http.get(this.variables.getServiceEndpoint()+"/controlReport/get-client/"+t+"/"+i+"/"+o+"/"+a,{}).pipe((0,v.K)(l=>(this.notAllowed(l),(0,u._)(l))))}saveControlReport(t){return this.http.post(this.variables.getServiceEndpoint()+"/controlReport/save",t,{}).pipe((0,v.K)(i=>(this.notAllowed(i),(0,u._)(i))))}editControlReport(t){return console.log(t.id," este es el service que imprime el id"),this.http.put(this.variables.getServiceEndpoint()+"/controlReport/"+t.id,t,{}).pipe((0,v.K)(i=>(this.notAllowed(i),(0,u._)(i))))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(T.eN),e.LFG(g.U),e.LFG(m.F0),e.LFG(I.E))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var w=c(7136),A=c(7232);function R(r,n){1&r&&(e.TgZ(0,"button",28),e._UZ(1,"i",29),e._uU(2," Crear "),e.qZA())}function J(r,n){1&r&&(e.TgZ(0,"th",24),e._uU(1,"Eliminar"),e.qZA())}function k(r,n){1&r&&(e.TgZ(0,"td")(1,"button",33),e.NdJ("click",function(){return null}),e._UZ(2,"i",34),e.qZA()())}function O(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"slice"),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td")(9,"button",30),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.clickEnterReport(a.id,a))}),e._UZ(10,"i",31),e.qZA()(),e.YNc(11,k,3,0,"td",32),e.qZA()}if(2&r){const t=n.$implicit,i=e.oxw();e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(e.Dn7(5,4,t.createAt,0,10)),e.xp6(3),e.Oqu(t.total),e.xp6(4),e.Q6J("ngIf",i.authHttpService.hasRole("ROLE_ADMIN"))}}const E=function(){return[10,50,100]};let D=(()=>{class r{constructor(t,i,o,a){this.service=t,this.authHttpService=i,this.router=o,this.cd=a,this.tittle="Cebaderos",this.totalRegister=0,this.pageNo=0,this.pageSize=10}ngOnInit(){this.rangePage(),sessionStorage.removeItem("reportId"),sessionStorage.removeItem("reports"),sessionStorage.removeItem("isNew")}rangePage(){let t=sessionStorage.getItem("clientId");this.service.findControlByClient(t,!0,this.pageNo+1,this.pageSize).subscribe(i=>{console.log(i.length),this.controlReport=i,this.cd.detectChanges()})}paginator(t){this.pageNo=t.pageIndex,this.pageSize=t.pageSize,this.rangePage()}clickEnterReport(t,i){sessionStorage.setItem("reportId",t),sessionStorage.setItem("reports",JSON.stringify(i)),this.router.navigate(["/reports/cebadero/form"])}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(N),e.Y36(g.U),e.Y36(m.F0),e.Y36(e.sBO))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-items"]],decls:42,vars:11,consts:[[1,"card","mb-10"],[1,"card-body","d-flex","align-items-center","py-8"],[1,"d-flex","h-80px","w-80px","flex-shrink-0","flex-center","position-relative"],["src","assets/media/icons/duotune/coding/cod010.svg",1,"h-40px","me-10"],[1,"ms-6"],[1,"list-unstyled","text-gray-600","fw-bold","fs-6","p-0","m-0"],["class","btn btn-primary","routerLink","/reports/cebadero/form",4,"ngIf"],[1,"col-1"],["routerLink","/reports",1,"btn","btn-warning","margin-left"],["data-toggle","tooltip","data-placement","top",1,"fas","fa-arrow-left"],[1,"card","card-custom"],[1,"card-header","card-header-stretch","overflow-auto"],[1,"card-header","border-0","pt-5"],[1,"card-title","align-items-start","flex-column"],[1,"card-label","fw-bolder","fs-3","mb-1"],[1,"text-muted","mt-1","fw-bold","fs-7"],[1,"card-toolbar"],["data-kt-menu-flip","top-end","data-kt-menu-placement","bottom-end","data-kt-menu-trigger","click","type","button",1,"btn","btn-sm","btn-icon","btn-color-primary","btn-active-light-primary"],[1,"svg-icon","svg-icon-2",3,"inlineSVG"],[1,"card-body","py-3"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"mb-1"],[1,"mb-4"],[1,"mb-3"],["class","mb-3",4,"ngIf"],[4,"ngFor","ngForOf"],["aria-label","Select page",3,"length","pageSizeOptions","pageSize","page"],["routerLink","/reports/cebadero/form",1,"btn","btn-primary"],["data-toggle","tooltip","data-placement","top",1,"fas","fa-plus"],["type","submit",1,"btn","btn-warning",3,"click"],["data-toggle","tooltip","data-placement","top",1,"fas","fa-edit"],[4,"ngIf"],["type","button",1,"btn","btn-danger",3,"click"],["data-toggle","tooltip","data-placement","top",1,"fas","fa-trash"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",4)(5,"p",5),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.YNc(8,R,3,0,"button",6),e._UZ(9,"a",7),e.TgZ(10,"button",8),e._UZ(11,"i",9),e._uU(12," Volver "),e.qZA()()()(),e.TgZ(13,"div",10)(14,"div",11)(15,"div",12)(16,"h3",13)(17,"span",14),e._uU(18,"Listado de Cebaderos"),e.qZA(),e.TgZ(19,"span",15),e._uU(20,"Accesibles por este cliente"),e.qZA()(),e.TgZ(21,"div",16)(22,"button",17),e._UZ(23,"span",18),e.qZA(),e._UZ(24,"app-dropdown-menu2"),e.qZA()(),e.TgZ(25,"div",19)(26,"div",20)(27,"table",21)(28,"thead")(29,"tr")(30,"th",22),e._uU(31,"C\xf3digo"),e.qZA(),e.TgZ(32,"th",23),e._uU(33,"Fecha"),e.qZA(),e.TgZ(34,"th",23),e._uU(35,"Cantidad"),e.qZA(),e.TgZ(36,"th",24),e._uU(37,"Editar"),e.qZA(),e.YNc(38,J,2,0,"th",25),e.qZA()(),e.TgZ(39,"tbody"),e.YNc(40,O,12,8,"tr",26),e.qZA()(),e.TgZ(41,"mat-paginator",27),e.NdJ("page",function(a){return i.paginator(a)}),e.qZA()()()()()),2&t&&(e.xp6(6),e.hij(" ",e.lcZ(7,8,"DASHBOARD.ICONS.FEEDLOTS")," "),e.xp6(2),e.Q6J("ngIf",i.authHttpService.hasRole("ROLE_ADMIN")),e.xp6(15),e.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen024.svg"),e.xp6(15),e.Q6J("ngIf",i.authHttpService.hasRole("ROLE_ADMIN")),e.xp6(2),e.Q6J("ngForOf",i.controlReport),e.xp6(1),e.Q6J("length",i.totalRegister)("pageSizeOptions",e.DdM(10,E))("pageSize",i.pageSize))},dependencies:[d.sg,d.O5,m.rH,h.NW,b.d$,w.w,d.OU,A.X$]}),r})();var y=c(8915),L=c(7292),Y=c(5226),F=c.n(Y),Q=c(3846),B=c(3057);let G=(()=>{class r{constructor(t,i){this.authHttpService=t,this.router=i,this.cliente=sessionStorage.getItem("clientName")}ngOnInit(){sessionStorage.getItem("clientName")||(F().fire({text:"Se debe seleccionar primero un cliente",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok",customClass:{confirmButton:"btn btn-primary"}}),this.router.navigate(["/clients"]))}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(g.U),e.Y36(m.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-buy"]],decls:18,vars:13,consts:[[1,"row","g-5","g-xl-8"],[1,"col-xl-3"],[1,"col-xl-6"],["color","danger",1,"card","card-xl-stretch","mb-xl-8",3,"title"],[1,"col-xl-4"],["svgIcon","assets/media/icons/duotune/general/gen055.svg","color","danger","iconColor","white","description","","routerLink","/reports/cebadero",1,"card","bg-danger","hoverable","card-xl-stretch","mb-xl-8",3,"title"],["svgIcon","assets/media/icons/duotune/general/gen028.svg","color","primary","iconColor","white","description","","routerLink","/reports/service-provider",1,"card","bg-primary","hoverable","card-xl-stretch","mb-xl-8",3,"title"],["svgIcon","assets/media/icons/duotune/general/gen035.svg","color","success","iconColor","white","description","","routerLink","/buys/view",1,"card","bg-success","hoverable","card-xl-stretch","mb-5","mb-xl-8",3,"title"],["svgIcon","assets/media/icons/duotune/arrows/arr079.svg","color","success","iconColor","white","routerLink","/dashboard","description","",1,"card","bg-dark","hoverable","card-xl-stretch","mb-5","mb-xl-8",3,"title"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"app-stats-widget4",3),e.qZA()(),e.TgZ(4,"div",0)(5,"div",4),e._UZ(6,"app-stats-widget5",5),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",4),e._UZ(9,"app-stats-widget5",6),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"div",4),e._UZ(12,"app-stats-widget5",7),e.ALo(13,"translate"),e.qZA(),e._UZ(14,"div",4),e.TgZ(15,"div",4),e._UZ(16,"app-stats-widget5",8),e.ALo(17,"translate"),e.qZA()()),2&t&&(e.xp6(3),e.MGl("title","Reportes para ",i.cliente,""),e.xp6(3),e.s9C("title",e.lcZ(7,5,"BUYS.ICONS.ADD")),e.xp6(3),e.s9C("title",e.lcZ(10,7,"BUYS.ICONS.ITEMS_PROVIDER_LIST")),e.xp6(3),e.s9C("title",e.lcZ(13,9,"BUYS.ICONS.ADD_NEW_BILL")),e.xp6(4),e.s9C("title",e.lcZ(17,11,"BUYS.ICONS.BACK")))},dependencies:[m.rH,Q.r,B.T,A.X$]}),r})();class U{setTimeHour(){let n="AM",t=(new Date).getHours().toString(),i=(new Date).getMinutes().toString();if(Number.parseInt(t)>11||0==Number.parseInt(t))switch(n="PM",t){case"12":t="12";break;case"13":t="01";break;case"14":t="02";break;case"15":t="03";break;case"16":t="04";break;case"17":t="05";break;case"18":t="06";break;case"19":t="07";break;case"20":t="08";break;case"21":t="09";break;case"22":t="10";break;case"23":t="11";break;case"0":t="12",n="AM"}return Number.parseInt(i)<10&&(i="0"+i),t+":"+i+" "+n}}let H=(()=>{class r{constructor(t,i,o,a){this.http=t,this.authService=i,this.router=o,this.variables=a}notAllowed(t){return 401==t.status||403==t.status}findByControlReport(t){return this.http.get(this.variables.getServiceEndpoint()+"/feedlots/get-cr/"+t,{}).pipe((0,v.K)(i=>(this.notAllowed(i),(0,u._)(i))))}saveFeedlot(t){return this.http.post(this.variables.getServiceEndpoint()+"/feedlots/save",t,{}).pipe((0,v.K)(i=>(this.notAllowed(i),(0,u._)(i))))}editFeedlot(t){return this.http.put(this.variables.getServiceEndpoint()+"/feedlots/"+t.id,t,{}).pipe((0,v.K)(i=>(this.notAllowed(i),(0,u._)(i))))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(T.eN),e.LFG(g.U),e.LFG(m.F0),e.LFG(I.E))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var q=c(9012);function V(r,n){if(1&r&&(e.TgZ(0,"option",49),e._uU(1),e.qZA()),2&r){const t=n.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.hij("",t.name," ")}}function M(r,n){if(1&r&&(e.TgZ(0,"div",13)(1,"fieldset",14)(2,"label",20),e._uU(3,"Sucursal"),e.qZA(),e.TgZ(4,"select",48),e.YNc(5,V,2,2,"option",22),e.qZA()()()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.editing),e.xp6(4),e.Q6J("ngForOf",t.branch)}}function K(r,n){if(1&r&&(e.TgZ(0,"option",49),e._uU(1),e.qZA()),2&r){const t=n.$implicit;e.Q6J("ngValue",t.id),e.xp6(1),e.hij("",t.name," ")}}function z(r,n){if(1&r&&(e.TgZ(0,"div",13)(1,"fieldset",14)(2,"label",20),e._uU(3,"Sucursal"),e.qZA(),e.TgZ(4,"select",48),e.YNc(5,K,2,2,"option",22),e.qZA()()()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.editing),e.xp6(4),e.Q6J("ngForOf",t.branch)}}function j(r,n){if(1&r&&(e.TgZ(0,"option",49),e._uU(1),e.qZA()),2&r){const t=n.$implicit;e.Q6J("ngValue",t.id),e.xp6(1),e.hij("",t.name," ")}}function W(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.save())}),e._UZ(1,"i",51),e.qZA()}}function $(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.enableEdit())}),e._UZ(1,"i",53),e.qZA()}}function X(r,n){if(1&r&&(e.TgZ(0,"div",54)(1,"div",55)(2,"div",56)(3,"label",20),e._uU(4,"# Cebadero"),e.qZA(),e._UZ(5,"input",57),e.qZA(),e.TgZ(6,"div",58)(7,"label",20),e._uU(8,"Consumo"),e.qZA(),e._UZ(9,"br")(10,"input",59),e.qZA(),e.TgZ(11,"div",58)(12,"label",20),e._uU(13,"Estado"),e.qZA(),e._UZ(14,"br")(15,"input",60),e.qZA(),e.TgZ(16,"div",61)(17,"label",20),e._uU(18,"Observaciones"),e.qZA(),e._UZ(19,"input",62),e.qZA()(),e._UZ(20,"div",63),e.qZA()),2&r){const t=n.index;e.xp6(1),e.s9C("formGroupName",t)}}let ee=(()=>{class r{constructor(t,i,o,a,l,p,f){this.service=t,this.serviceControl=i,this.formBuilder=o,this.authHttpService=a,this.router=l,this.serviceClient=p,this.cd=f,this.functions=new U,this.edit=!1,this.editing=!1,this.isNew=!1,this.totalRegister=0,this.pageNo=0,this.pageSize=10}ngOnInit(){sessionStorage.getItem("reportId")&&sessionStorage.getItem("isNew")&&(this.loadReportForm(),this.editing=!0,this.loadData()),sessionStorage.getItem("reportId")&&!sessionStorage.getItem("isNew")&&(this.loadReportForm(),this.loadData()),sessionStorage.getItem("reportId")||(this.isNew=!0,this.editing=!0,this.loadReportForm(),this.firstStepsForNew())}loadReportForm(){this.controlReportForm=new s.cw({enabled:new s.NI(""),idClients:new s.NI(""),clientName:new s.NI(""),clientAddress:new s.NI(""),idWarehouse:new s.NI(""),createAt:new s.NI(""),startTime:new s.NI(""),endTime:new s.NI(""),total:new s.NI(""),branchIdForm:new s.NI("")}),this.form=new s.cw({fl:new s.Oe([])})}createItem(){return this.formBuilder.group({numberFeedlot:this.numberOfFeedLots+1,idControlReport:this.reportId,idWarehouse:this.idWarehouse,eats:!1,status:!0,observations:""})}addNewAddressGroup(){this.fl=this.form.get("fl"),this.service.saveFeedlot(this.createItem().value).subscribe(t=>{this.numberOfFeedLots=this.numberOfFeedLots+1,this.cd.detectChanges()}),this.crProv={id:this.reportId,total:this.numberOfFeedLots+1,startTime:this.controlReportForm.controls.startTime.value},this.serviceControl.editControlReport(this.crProv).subscribe(t=>{this.controlReportForm.patchValue({total:this.numberOfFeedLots}),this.cd.detectChanges()}),this.fl.push(this.createItem())}getFlArray(){return this.form.get("fl")}firstStepsForNew(){let t=JSON.parse(sessionStorage.getItem("client")),i=(new Date).getDay().toString();Number.parseInt(i)<10&&(i="0"+i);let o=(new Date).getMonth().toString();Number.parseInt(o)<10&&(o="0"+o),this.serviceClient.branchFindByClient(null==t?void 0:t.id).subscribe(a=>{this.branch=a,this.cd.detectChanges(),this.controlReportForm.controls.branchIdForm.valueChanges.subscribe(l=>{this.serviceClient.warehouseFindByBranchId(l.id).subscribe(p=>{this.warehouse=p,this.controlReportForm.patchValue({clientName:null==t?void 0:t.name,createAt:new Date,clientAddress:this.controlReportForm.controls.branchIdForm.value.province+", "+this.controlReportForm.controls.branchIdForm.value.canton+", "+this.controlReportForm.controls.branchIdForm.value.district+", "+this.controlReportForm.controls.branchIdForm.value.neighborhood+", "+this.controlReportForm.controls.branchIdForm.value.addressDetails,startTime:this.functions.setTimeHour(),enabled:!0,idClients:null==t?void 0:t.id,total:5}),this.cd.detectChanges()})})})}deleteAddressGroup(t){this.form.get("fl").removeAt(t)}rangePage(){}paginator(t){this.pageNo=t.pageIndex,this.pageSize=t.pageSize,this.rangePage()}loadData(){let o,t=JSON.parse(sessionStorage.getItem("client")),i=JSON.parse(sessionStorage.getItem("reports"));this.reportId=sessionStorage.getItem("reportId"),this.idWarehouse=null==i?void 0:i.idWarehouse,this.controlReportForm.patchValue({idClients:null==t?void 0:t.id,clientName:null==t?void 0:t.name,clientAddress:(null==t?void 0:t.province)+", "+(null==t?void 0:t.canton)+", "+(null==t?void 0:t.district)+", "+(null==t?void 0:t.neigh)}),this.controlReportForm.patchValue({idWarehouse:null==i?void 0:i.idWarehouse,createAt:null==i?void 0:i.createAt.slice(0,10),startTime:null==i?void 0:i.startTime,endTime:null==i?void 0:i.endTime,total:null==i?void 0:i.total}),this.service.findByControlReport(null==i?void 0:i.id).subscribe(a=>{this.feedlots=a,this.numberOfFeedLots=a.length;for(let l=0;l<this.numberOfFeedLots;l++)this.fl=this.form.get("fl"),this.fl.push(this.formBuilder.group({id:a[l].id,numberFeedlot:a[l].numberFeedlot,eats:a[l].eats,status:a[l].status,observations:a[l].observations})),this.cd.detectChanges();this.serviceClient.warehouseFindById(this.idWarehouse).subscribe(l=>{o=l.branchId,this.serviceClient.branchFindByClient(null==t?void 0:t.id).subscribe(p=>{this.branch=p,this.serviceClient.warehouseFindByBranchId(o).subscribe(f=>{this.warehouse=f,this.serviceClient.branchFindById(o).subscribe(x=>{this.controlReportForm.patchValue({branchIdForm:x.id,warehouseId:l.id}),this.cd.detectChanges()})}),this.cd.detectChanges()})})})}enableEdit(){this.editing=!0}save(){let i,t=this.controlReportForm.value;this.serviceControl.saveControlReport(t).subscribe(o=>{this.cd.detectChanges();for(let a=0;a<t.total;a++)i={idControlReport:o.ControlReport.id,idWarehouse:t.idWarehouse,numberFeedlot:a+1,type:"Cebadero",eats:!1,status:!0,observations:""},this.service.saveFeedlot(i).subscribe(l=>{this.cd.detectChanges()}),sessionStorage.setItem("reports",JSON.stringify(o.ControlReport)),sessionStorage.setItem("reportId",o.ControlReport.id),this.cd.detectChanges()}),this.edit=!1,this.cd.detectChanges(),this.router.navigate(["reports/cebadero/form"]),sessionStorage.setItem("isNew","true"),F().fire({title:"Se creo correctamente el reporte",timerProgressBar:!0,confirmButtonText:"Ok"}).then(o=>{o.isConfirmed&&(F().fire("Saved!","","success"),window.location.reload())})}saveFeedLots(){this.crProv={id:this.reportId,total:this.numberOfFeedLots,startTime:this.controlReportForm.controls.startTime.value,endTime:this.functions.setTimeHour()};for(let t=1;t<=this.numberOfFeedLots;t++)this.service.editFeedlot(this.form.controls.fl.value[t-1]).subscribe();this.serviceControl.editControlReport(this.crProv).subscribe(t=>{this.cd.detectChanges()}),sessionStorage.removeItem("isNew"),F().fire({title:"Se editaron correctamente los cebaderos",timerProgressBar:!0,confirmButtonText:"Ok"}).then(t=>{t.isConfirmed&&(F().fire("Saved!","","success"),window.location.reload())})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(H),e.Y36(N),e.Y36(s.qu),e.Y36(g.U),e.Y36(m.F0),e.Y36(q.a),e.Y36(e.sBO))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-items"]],decls:78,vars:19,consts:[[1,"card","mb-10"],[1,"card-body","d-flex","align-items-center","py-8"],[1,"d-flex","h-80px","w-80px","flex-shrink-0","flex-center","position-relative"],["src","assets/media/icons/duotune/coding/cod010.svg",1,"h-40px","me-10"],[1,"ms-6"],[1,"list-unstyled","text-gray-600","fw-bold","fs-6","p-0","m-0"],["routerLink","/reports/cebadero/",1,"btn","btn-warning","margin-left"],["data-placement","top","data-toggle","tooltip",1,"fas","fa-arrow-left"],[1,"card","mb-5","mb-xl-12"],[1,"card-body"],["id","controlReport",3,"formGroup"],[1,"d-flex","justify-content-between","align-items-start","flex-wrap","mb-2","md-12"],[1,"row","p-t-20","col-md-12"],[1,"col-md-6"],[3,"disabled"],["for","clientName",1,"form-label"],["formControlName","clientName","id","clientName","maxlength","80","type","text",1,"form-control"],["for","clientAddress",1,"form-label"],["formControlName","clientAddress","id","clientAddress","maxlength","80","type","text",1,"form-control"],["class","col-md-6",4,"ngIf"],[1,"form-label"],["formControlName","idWarehouse",1,"form-select"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-md-3"],["for","createAt",1,"form-label"],["formControlName","createAt","id","createAt","maxlength","10","type","text",1,"form-control"],["for","startTime",1,"form-label"],["formControlName","startTime","id","startTime","maxlength","80","type","text",1,"form-control"],["for","endTime",1,"form-label"],["formControlName","endTime","id","endTime","maxlength","80","type","text",1,"form-control"],["for","total",1,"form-label"],["formControlName","total","id","total","maxlength","80","type","number",1,"form-control"],[1,"row","col-md-3"],[1,"d-flex","my-4"],[1,"me-0"],["class","btn btn-success","data-kt-menu-trigger","click",3,"click",4,"ngIf"],["class","btn btn-warning","data-kt-menu-trigger","click",3,"click",4,"ngIf"],["data-kt-menu-trigger","click",1,"btn","btn-info"],[1,"bi","bi-printer-fill"],["data-kt-menu-trigger","click",1,"btn","btn-danger"],[1,"bi","bi-envelope-check-fill"],[1,"d-flex","flex-column-fluid","align-items-start","container-xxl"],[1,"content","flex-row-fluid"],[1,"card"],[3,"formGroup"],["formArrayName","fl",4,"ngFor","ngForOf"],[1,"btn","btn-light-success",3,"click"],[1,"btn","btn-light-info",3,"click"],["formControlName","branchIdForm",1,"form-select"],[3,"ngValue"],["data-kt-menu-trigger","click",1,"btn","btn-success",3,"click"],[1,"bi","bi-cloud-arrow-up-fill"],["data-kt-menu-trigger","click",1,"btn","btn-warning",3,"click"],[1,"bi","bi-pen-fill"],["formArrayName","fl"],[1,"row","p-t-20","col-md-12",3,"formGroupName"],[1,"col-md-2"],["formControlName","numberFeedlot",1,"form-control"],[1,"col-md-1"],["formControlName","eats","type","checkbox","value","",1,"form-check-input"],["formControlName","status","type","checkbox","value","",1,"form-check-input"],[1,"col-md-8"],["formControlName","observations","placeholder","Observaciones","type","text",1,"form-control","mb-2","mb-md-0"],[1,"separator","my-10"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",4)(5,"p",5),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",6),e._UZ(9,"i",7),e._uU(10," Volver "),e.qZA()()()(),e.TgZ(11,"div",8)(12,"div",9)(13,"div",9)(14,"form",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"fieldset",14)(19,"label",15),e._uU(20,"Cliente"),e.qZA(),e._UZ(21,"input",16),e.qZA()(),e.TgZ(22,"div",13)(23,"fieldset",14)(24,"label",17),e._uU(25,"Direccion"),e.qZA(),e._UZ(26,"input",18),e.qZA()(),e.YNc(27,M,6,2,"div",19),e.YNc(28,z,6,2,"div",19),e.TgZ(29,"div",13)(30,"fieldset",14)(31,"label",20),e._uU(32,"Bodega/Almac\xe9n"),e.qZA(),e.TgZ(33,"select",21),e.YNc(34,j,2,2,"option",22),e.qZA()()(),e.TgZ(35,"div",23)(36,"fieldset",14)(37,"label",24),e._uU(38,"Fecha"),e.qZA(),e._UZ(39,"input",25),e.qZA()(),e.TgZ(40,"div",23)(41,"fieldset",14)(42,"label",26),e._uU(43,"Hora Ingreso"),e.qZA(),e._UZ(44,"input",27),e.qZA()(),e.TgZ(45,"div",23)(46,"fieldset",14)(47,"label",28),e._uU(48,"Hora Salida"),e.qZA(),e._UZ(49,"input",29),e.qZA()(),e.TgZ(50,"div",23)(51,"fieldset",14)(52,"label",30),e._uU(53,"Cebaderos"),e.qZA(),e._UZ(54,"input",31),e.qZA()()(),e.TgZ(55,"div",32)(56,"div",33)(57,"div",34),e.YNc(58,W,2,0,"button",35),e.YNc(59,$,2,0,"button",36),e.qZA(),e.TgZ(60,"div",34)(61,"button",37),e._UZ(62,"i",38),e.qZA()(),e.TgZ(63,"div",34)(64,"button",39),e._UZ(65,"i",40),e.qZA()()()()()()()()(),e.TgZ(66,"div",41)(67,"div",42)(68,"div",43)(69,"div",9)(70,"form",44)(71,"fieldset",14),e.YNc(72,X,21,1,"div",45),e.qZA()(),e.TgZ(73,"div")(74,"button",46),e.NdJ("click",function(){return i.saveFeedLots()}),e._uU(75,"Guardar"),e.qZA(),e.TgZ(76,"button",47),e.NdJ("click",function(){return i.addNewAddressGroup()}),e._uU(77,"Add"),e.qZA()()()()()()),2&t&&(e.xp6(6),e.hij(" ",e.lcZ(7,17,"DASHBOARD.ICONS.FEEDLOTS")," "),e.xp6(8),e.Q6J("formGroup",i.controlReportForm),e.xp6(4),e.Q6J("disabled",!i.editing),e.xp6(5),e.Q6J("disabled",!i.editing),e.xp6(4),e.Q6J("ngIf",i.isNew),e.xp6(1),e.Q6J("ngIf",!i.isNew),e.xp6(2),e.Q6J("disabled",!i.editing),e.xp6(4),e.Q6J("ngForOf",i.warehouse),e.xp6(2),e.Q6J("disabled",!i.editing),e.xp6(5),e.Q6J("disabled",!i.editing),e.xp6(5),e.Q6J("disabled",!i.editing),e.xp6(5),e.Q6J("disabled",!i.editing),e.xp6(7),e.Q6J("ngIf",i.editing),e.xp6(1),e.Q6J("ngIf",!i.editing),e.xp6(11),e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("disabled",!i.editing),e.xp6(1),e.Q6J("ngForOf",i.getFlArray().controls))},dependencies:[d.sg,d.O5,m.rH,s._Y,s.YN,s.Kr,s.Fj,s.wV,s.Wl,s.EJ,s.JJ,s.JL,s.nD,s.sg,s.u,s.x0,s.CE,A.X$]}),r})();var te=c(89);let _=(()=>{class r{constructor(t,i,o,a){this.http=t,this.authService=i,this.router=o,this.variables=a}notAllowed(t){return 401==t.status||403==t.status}getServiceProvider(t,i,o){return this.http.get(this.variables.getServiceEndpoint()+"/service-provider/get-main-by-client/"+t+"/"+i+"/"+o,{headers:this.variables.getAuthHeader()}).pipe((0,v.K)(a=>(this.notAllowed(a),(0,u._)(a))))}getServiceProviderPestTypeDetails(t){return this.http.get(this.variables.getServiceEndpoint()+"/service-provider/get-pest-type-by-service-provider/"+t,{headers:this.variables.getAuthHeader()}).pipe((0,v.K)(i=>(this.notAllowed(i),(0,u._)(i))))}getServiceRecommendationsDetails(t){return this.http.get(this.variables.getServiceEndpoint()+"/service-provider/get-recommendations-by-service-provider/"+t,{headers:this.variables.getAuthHeader()}).pipe((0,v.K)(i=>(this.notAllowed(i),(0,u._)(i))))}getServiceDetails(t){return this.http.get(this.variables.getServiceEndpoint()+"/service-provider/get-details-by-service-provider/"+t,{headers:this.variables.getAuthHeader()}).pipe((0,v.K)(i=>(this.notAllowed(i),(0,u._)(i))))}getServiceDetailsV1(t){return this.http.get(this.variables.getServiceEndpoint()+"/service-provider/get-details-v1-by-service-provider/"+t,{headers:this.variables.getAuthHeader()}).pipe((0,v.K)(i=>(this.notAllowed(i),(0,u._)(i))))}saveServiceProvider(t){return this.http.post(this.variables.getServiceEndpoint()+"/service-provider/save-main"+t,{headers:this.variables.getAuthHeader()}).pipe((0,v.K)(i=>(this.notAllowed(i),(0,u._)(i))))}saveServiceProviderRecommendations(t){return this.http.post(this.variables.getServiceEndpoint()+"/service-provider/save-recommendations"+t,{headers:this.variables.getAuthHeader()}).pipe((0,v.K)(i=>(this.notAllowed(i),(0,u._)(i))))}saveServiceProviderDetails(t){return this.http.post(this.variables.getServiceEndpoint()+"/service-provider/save-details"+t,{headers:this.variables.getAuthHeader()}).pipe((0,v.K)(i=>(this.notAllowed(i),(0,u._)(i))))}saveServiceProviderPestTypeDetails(t){return this.http.post(this.variables.getServiceEndpoint()+"/service-provider/save-pest-type"+t,{headers:this.variables.getAuthHeader()}).pipe((0,v.K)(i=>(this.notAllowed(i),(0,u._)(i))))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(T.eN),e.LFG(te.e8),e.LFG(m.F0),e.LFG(I.E))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function ie(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.createNew())}),e._UZ(1,"i",29),e._uU(2," Crear "),e.qZA()}}function re(r,n){1&r&&(e.TgZ(0,"th",24),e._uU(1,"Eliminar"),e.qZA())}function oe(r,n){1&r&&(e.TgZ(0,"td")(1,"button",33),e.NdJ("click",function(){return null}),e._UZ(2,"i",34),e.qZA()())}function se(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"slice"),e.qZA(),e.TgZ(8,"td")(9,"button",30),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.clickEnterReport(a.id,a))}),e._UZ(10,"i",31),e.qZA()(),e.YNc(11,oe,3,0,"td",32),e.qZA()}if(2&r){const t=n.$implicit,i=e.oxw();e.xp6(2),e.Oqu(t.identifier),e.xp6(2),e.Oqu(t.clientName),e.xp6(2),e.Oqu(e.Dn7(7,4,t.createAt,0,10)),e.xp6(5),e.Q6J("ngIf",i.authHttpService.hasRole("ROLE_ADMIN"))}}const ne=function(){return[10,50,100]};let ae=(()=>{class r{constructor(t,i,o,a){this.service=t,this.authHttpService=i,this.router=o,this.cd=a,this.tittle="Servicios Prestados",this.totalRegister=0,this.pageNo=0,this.pageSize=10}ngOnInit(){sessionStorage.removeItem("serviceReportId"),sessionStorage.removeItem("serviceReport"),sessionStorage.removeItem("isNew"),this.rangePage()}paginator(t){this.pageNo=t.pageIndex,this.pageSize=t.pageSize,this.rangePage()}rangePage(){let t=sessionStorage.getItem("clientId");this.service.getServiceProvider(t,this.pageNo+1,this.pageSize).subscribe(i=>{console.log(i),this.serviceProvider=i,this.cd.detectChanges()})}clickEnterReport(t,i){sessionStorage.setItem("serviceReportId",t),sessionStorage.setItem("serviceReport",JSON.stringify(i)),this.router.navigate(["/reports/service-provider/form"])}createNew(){sessionStorage.setItem("isNew","true"),this.router.navigate(["/reports/service-provider/form"])}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(_),e.Y36(g.U),e.Y36(m.F0),e.Y36(e.sBO))},r.\u0275cmp=e.Xpm({type:r,selectors:[["service-provider-component"]],decls:42,vars:11,consts:[[1,"card","mb-10"],[1,"card-body","d-flex","align-items-center","py-8"],[1,"d-flex","h-80px","w-80px","flex-shrink-0","flex-center","position-relative"],["src","assets/media/icons/duotune/coding/cod010.svg",1,"h-40px","me-10"],[1,"ms-6"],[1,"list-unstyled","text-gray-600","fw-bold","fs-6","p-0","m-0"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"col-1"],["routerLink","/reports",1,"btn","btn-warning","margin-left"],["data-toggle","tooltip","data-placement","top",1,"fas","fa-arrow-left"],[1,"card","card-custom"],[1,"card-header","card-header-stretch","overflow-auto"],[1,"card-header","border-0","pt-5"],[1,"card-title","align-items-start","flex-column"],[1,"card-label","fw-bolder","fs-3","mb-1"],[1,"text-muted","mt-1","fw-bold","fs-7"],[1,"card-toolbar"],["data-kt-menu-flip","top-end","data-kt-menu-placement","bottom-end","data-kt-menu-trigger","click","type","button",1,"btn","btn-sm","btn-icon","btn-color-primary","btn-active-light-primary"],[1,"svg-icon","svg-icon-2",3,"inlineSVG"],[1,"card-body","py-3"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"mb-1"],[1,"mb-4"],[1,"mb-3"],["class","mb-3",4,"ngIf"],[4,"ngFor","ngForOf"],["aria-label","Select page",3,"length","pageSizeOptions","pageSize","page"],[1,"btn","btn-primary",3,"click"],["data-toggle","tooltip","data-placement","top",1,"fas","fa-plus"],["type","submit",1,"btn","btn-warning",3,"click"],["data-toggle","tooltip","data-placement","top",1,"fas","fa-edit"],[4,"ngIf"],["type","button",1,"btn","btn-danger",3,"click"],["data-toggle","tooltip","data-placement","top",1,"fas","fa-trash"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",4)(5,"p",5),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.YNc(8,ie,3,0,"button",6),e._UZ(9,"a",7),e.TgZ(10,"button",8),e._UZ(11,"i",9),e._uU(12," Volver "),e.qZA()()()(),e.TgZ(13,"div",10)(14,"div",11)(15,"div",12)(16,"h3",13)(17,"span",14),e._uU(18,"Listado de Cebaderos"),e.qZA(),e.TgZ(19,"span",15),e._uU(20,"Accesibles por este cliente"),e.qZA()(),e.TgZ(21,"div",16)(22,"button",17),e._UZ(23,"span",18),e.qZA(),e._UZ(24,"app-dropdown-menu2"),e.qZA()(),e.TgZ(25,"div",19)(26,"div",20)(27,"table",21)(28,"thead")(29,"tr")(30,"th",22),e._uU(31,"C\xf3digo"),e.qZA(),e.TgZ(32,"th",23),e._uU(33,"Cliente"),e.qZA(),e.TgZ(34,"th",23),e._uU(35,"Fecha"),e.qZA(),e.TgZ(36,"th",24),e._uU(37,"Editar"),e.qZA(),e.YNc(38,re,2,0,"th",25),e.qZA()(),e.TgZ(39,"tbody"),e.YNc(40,se,12,8,"tr",26),e.qZA()(),e.TgZ(41,"mat-paginator",27),e.NdJ("page",function(a){return i.paginator(a)}),e.qZA()()()()()),2&t&&(e.xp6(6),e.hij(" ",e.lcZ(7,8,"REPORTS.SERVICE.NAME")," "),e.xp6(2),e.Q6J("ngIf",i.authHttpService.hasRole("ROLE_ADMIN")),e.xp6(15),e.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen024.svg"),e.xp6(15),e.Q6J("ngIf",i.authHttpService.hasRole("ROLE_ADMIN")),e.xp6(2),e.Q6J("ngForOf",i.serviceProvider),e.xp6(1),e.Q6J("length",i.totalRegister)("pageSizeOptions",e.DdM(10,ne))("pageSize",i.pageSize))},dependencies:[d.sg,d.O5,m.rH,h.NW,b.d$,w.w,d.OU,A.X$]}),r})();function de(r,n){if(1&r&&(e.TgZ(0,"option",51),e._uU(1),e.qZA()),2&r){const t=n.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.hij("",t.name," ")}}function le(r,n){if(1&r&&(e.TgZ(0,"div",13)(1,"fieldset",14)(2,"label",20),e._uU(3,"Sucursal"),e.qZA(),e.TgZ(4,"select",50),e.YNc(5,de,2,2,"option",22),e.qZA()()()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.editing),e.xp6(4),e.Q6J("ngForOf",t.branch)}}function ce(r,n){if(1&r&&(e.TgZ(0,"option",51),e._uU(1),e.qZA()),2&r){const t=n.$implicit;e.Q6J("ngValue",t.id),e.xp6(1),e.hij("",t.name," ")}}function me(r,n){if(1&r&&(e.TgZ(0,"div",13)(1,"fieldset",14)(2,"label",20),e._uU(3,"Sucursal"),e.qZA(),e.TgZ(4,"select",50),e.YNc(5,ce,2,2,"option",22),e.qZA()()()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.editing),e.xp6(4),e.Q6J("ngForOf",t.branch)}}function pe(r,n){if(1&r&&(e.TgZ(0,"option",51),e._uU(1),e.qZA()),2&r){const t=n.$implicit;e.Q6J("ngValue",t.id),e.xp6(1),e.hij("",t.name," ")}}function ue(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.save())}),e._UZ(1,"i",53),e.qZA()}}function ve(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"button",54),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.enableEdit())}),e._UZ(1,"i",55),e.qZA()}}let ge=(()=>{class r{constructor(t,i,o,a,l,p,f){this.providerService=t,this.formBuilder=i,this.serviceControl=o,this.authHttpService=a,this.router=l,this.serviceClient=p,this.cd=f,this.functions=new U,this.edit=!1,this.editing=!1,this.isNew=!1,this.totalRegister=0,this.pageNo=0,this.pageSize=10}ngOnInit(){console.log(this.functions.setTimeHour()),sessionStorage.getItem("serviceReportId")&&sessionStorage.getItem("isNew"),sessionStorage.getItem("serviceReportId")&&!sessionStorage.getItem("isNew")&&(this.loadReportForm(),this.loadData()),sessionStorage.getItem("serviceReportId")||(this.loadReportForm(),this.firstSteps(),this.editing=!0,this.isNew=!0,this.generateIdentifier())}loadReportForm(){this.serviceProviderForm=new s.cw({enabled:new s.NI(""),clientId:new s.NI(""),clientName:new s.NI(""),clientAddress:new s.NI(""),warehouseId:new s.NI(""),createAt:new s.NI(""),startTime:new s.NI(""),endTime:new s.NI(""),fumigationFrequency:new s.NI(""),identifier:new s.NI(""),branchIdForm:new s.NI("")})}generateIdentifier(){let t=sessionStorage.getItem("clientId");this.serviceControl.getServiceProvider(t,this.pageNo+1,100).subscribe(i=>{var o;for(let a=0;a<i.length;a++){this.identifierGenerate=i[0].identifier,console.log(this.identifierGenerate,"el ultimo");let l=null===(o=this.identifierGenerate)||void 0===o?void 0:o.split("-",3);console.log(l,"splited")}this.cd.detectChanges()})}loadData(){let o,t=JSON.parse(sessionStorage.getItem("client")),i=JSON.parse(sessionStorage.getItem("serviceReport"));this.serviceProviderId=sessionStorage.getItem("serviceReportId"),this.warehouseId=null==i?void 0:i.warehouseId,this.serviceProviderForm.patchValue({warehouseId:null==i?void 0:i.warehouseId,clientId:null==t?void 0:t.id,clientName:null==t?void 0:t.name,clientAddress:(null==t?void 0:t.province)+", "+(null==t?void 0:t.canton)+", "+(null==t?void 0:t.district)+", "+(null==t?void 0:t.neigh)}),this.serviceProviderForm.patchValue({idWarehouse:null==i?void 0:i.warehouseId,createAt:null==i?void 0:i.createAt.slice(0,10),startTime:null==i?void 0:i.startTime,endTime:null==i?void 0:i.endTime,identifier:null==i?void 0:i.identifier}),this.serviceClient.warehouseFindById(this.warehouseId).subscribe(a=>{o=a.branchId,this.serviceClient.branchFindByClient(null==t?void 0:t.id).subscribe(l=>{this.branch=l,this.serviceClient.warehouseFindByBranchId(o).subscribe(p=>{this.warehouse=p,this.serviceClient.branchFindById(o).subscribe(f=>{this.serviceProviderForm.patchValue({branchIdForm:f.id,warehouseId:a.id}),this.cd.detectChanges()})}),this.cd.detectChanges()})})}firstSteps(){let t=JSON.parse(sessionStorage.getItem("client")),i=(new Date).getDay().toString();Number.parseInt(i)<10&&(i="0"+i);let o=(new Date).getMonth().toString();Number.parseInt(o)<10&&(o="0"+o),this.serviceClient.branchFindByClient(null==t?void 0:t.id).subscribe(a=>{console.log(a," branch"),this.branch=a,this.cd.detectChanges(),this.serviceProviderForm.controls.branchIdForm.valueChanges.subscribe(l=>{this.serviceClient.warehouseFindByBranchId(l.id).subscribe(p=>{this.warehouse=p,console.log(this.warehouse),this.serviceProviderForm.patchValue({clientName:null==t?void 0:t.name,createAt:new Date,clientAddress:this.serviceProviderForm.controls.branchIdForm.value.province+", "+this.serviceProviderForm.controls.branchIdForm.value.canton+", "+this.serviceProviderForm.controls.branchIdForm.value.district+", "+this.serviceProviderForm.controls.branchIdForm.value.neighborhood+", "+this.serviceProviderForm.controls.branchIdForm.value.addressDetails,startTime:this.functions.setTimeHour(),enabled:!0,idClients:null==t?void 0:t.id}),this.cd.detectChanges()})})})}save(){}enableEdit(){}session(t){}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(_),e.Y36(s.qu),e.Y36(_),e.Y36(g.U),e.Y36(m.F0),e.Y36(q.a),e.Y36(e.sBO))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-items"]],decls:85,vars:25,consts:[[1,"card","mb-10"],[1,"card-body","d-flex","align-items-center","py-8"],[1,"d-flex","h-80px","w-80px","flex-shrink-0","flex-center","position-relative"],["src","assets/media/icons/duotune/coding/cod010.svg",1,"h-40px","me-10"],[1,"ms-6"],[1,"list-unstyled","text-gray-600","fw-bold","fs-6","p-0","m-0"],["routerLink","/reports/service-provider/",1,"btn","btn-warning","margin-left"],["data-placement","top","data-toggle","tooltip",1,"fas","fa-arrow-left"],[1,"card","mb-5","mb-xl-12"],[1,"card-body"],["id","serviceProviderForm",3,"formGroup"],[1,"d-flex","justify-content-between","align-items-start","flex-wrap","mb-2","md-12"],[1,"row","p-t-20","col-md-12"],[1,"col-md-6"],[3,"disabled"],["for","clientName",1,"form-label"],["formControlName","clientName","id","clientName","maxlength","80","type","text",1,"form-control"],["for","clientAddress",1,"form-label"],["formControlName","clientAddress","id","clientAddress","maxlength","80","type","text",1,"form-control"],["class","col-md-6",4,"ngIf"],[1,"form-label"],["formControlName","warehouseId",1,"form-select"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-md-3"],["for","createAt",1,"form-label"],["formControlName","createAt","id","createAt","maxlength","10","type","text",1,"form-control"],["for","startTime",1,"form-label"],["formControlName","startTime","id","startTime","maxlength","80","type","text",1,"form-control"],["for","endTime",1,"form-label"],["formControlName","endTime","id","endTime","maxlength","80","type","text",1,"form-control"],["for","identifier",1,"form-label"],["formControlName","identifier","id","identifier","maxlength","80","type","text",1,"form-control"],[1,"row","col-md-3"],[1,"d-flex","my-4"],[1,"me-0"],["class","btn btn-success","data-kt-menu-trigger","click",3,"click",4,"ngIf"],["class","btn btn-warning","data-kt-menu-trigger","click",3,"click",4,"ngIf"],["data-kt-menu-trigger","click",1,"btn","btn-info"],[1,"bi","bi-printer-fill"],["data-kt-menu-trigger","click",1,"btn","btn-danger"],[1,"bi","bi-envelope-check-fill"],[1,"d-flex","overflow-auto","h-55px"],[1,"nav","nav-stretch","nav-line-tabs","nav-line-tabs-2x","border-transparent","fs-5","fw-bolder","flex-nowrap"],[1,"nav-item"],["routerLink","/reports/service-provider/form/details","routerLinkActive","active",1,"nav-link","text-active-primary","me-6",3,"click"],["routerLink","/reports/service-provider/form/pest","routerLinkActive","active",1,"nav-link","text-active-primary","me-6",3,"click"],["routerLink","/reports/service-provider/form/recommendations","routerLinkActive","active",1,"nav-link","text-active-primary","me-6",3,"click"],[1,"d-flex","flex-column-fluid","align-items-start","container-xxl"],[1,"content","flex-row-fluid"],[1,"card"],["formControlName","branchIdForm",1,"form-select"],[3,"ngValue"],["data-kt-menu-trigger","click",1,"btn","btn-success",3,"click"],[1,"bi","bi-cloud-arrow-up-fill"],["data-kt-menu-trigger","click",1,"btn","btn-warning",3,"click"],[1,"bi","bi-pen-fill"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",4)(5,"p",5),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",6),e._UZ(9,"i",7),e._uU(10," Volver "),e.qZA()()()(),e.TgZ(11,"div",8)(12,"div",9)(13,"div",9)(14,"form",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"fieldset",14)(19,"label",15),e._uU(20,"Cliente"),e.qZA(),e._UZ(21,"input",16),e.qZA()(),e.TgZ(22,"div",13)(23,"fieldset",14)(24,"label",17),e._uU(25,"Direccion"),e.qZA(),e._UZ(26,"input",18),e.qZA()(),e.YNc(27,le,6,2,"div",19),e.YNc(28,me,6,2,"div",19),e.TgZ(29,"div",13)(30,"fieldset",14)(31,"label",20),e._uU(32,"Bodega/Almac\xe9n"),e.qZA(),e.TgZ(33,"select",21),e.YNc(34,pe,2,2,"option",22),e.qZA()()(),e.TgZ(35,"div",23)(36,"fieldset",14)(37,"label",24),e._uU(38,"Fecha"),e.qZA(),e._UZ(39,"input",25),e.qZA()(),e.TgZ(40,"div",23)(41,"fieldset",14)(42,"label",26),e._uU(43,"Hora Ingreso"),e.qZA(),e._UZ(44,"input",27),e.qZA()(),e.TgZ(45,"div",23)(46,"fieldset",14)(47,"label",28),e._uU(48,"Hora Salida"),e.qZA(),e._UZ(49,"input",29),e.qZA()(),e.TgZ(50,"div",23)(51,"fieldset",14)(52,"label",30),e._uU(53,"Identificador"),e.qZA(),e._UZ(54,"input",31),e.qZA()()(),e.TgZ(55,"div",32)(56,"div",33)(57,"div",34),e.YNc(58,ue,2,0,"button",35),e.YNc(59,ve,2,0,"button",36),e.qZA(),e.TgZ(60,"div",34)(61,"button",37),e._UZ(62,"i",38),e.qZA()(),e.TgZ(63,"div",34)(64,"button",39),e._UZ(65,"i",40),e.qZA()()()()()(),e.TgZ(66,"div",41)(67,"ul",42)(68,"li",43)(69,"a",44),e.NdJ("click",function(){return i.session("detail")}),e._uU(70),e.ALo(71,"translate"),e.qZA()(),e.TgZ(72,"li",43)(73,"a",45),e.NdJ("click",function(){return i.session("recommendations")}),e._uU(74),e.ALo(75,"translate"),e.qZA()(),e.TgZ(76,"li",43)(77,"a",46),e.NdJ("click",function(){return i.session("pestType")}),e._uU(78),e.ALo(79,"translate"),e.qZA()()()()()()(),e.TgZ(80,"div",47)(81,"div",48)(82,"div",49)(83,"div",9),e._UZ(84,"router-outlet"),e.qZA()()()()),2&t&&(e.xp6(6),e.hij(" ",e.lcZ(7,17,"REPORTS.SERVICE.NAME")," "),e.xp6(8),e.Q6J("formGroup",i.serviceProviderForm),e.xp6(4),e.Q6J("disabled",!i.editing),e.xp6(5),e.Q6J("disabled",!i.editing),e.xp6(4),e.Q6J("ngIf",i.isNew),e.xp6(1),e.Q6J("ngIf",!i.isNew),e.xp6(2),e.Q6J("disabled",!i.editing),e.xp6(4),e.Q6J("ngForOf",i.warehouse),e.xp6(2),e.Q6J("disabled",!i.editing),e.xp6(5),e.Q6J("disabled",!i.editing),e.xp6(5),e.Q6J("disabled",!i.editing),e.xp6(5),e.Q6J("disabled",!i.editing),e.xp6(7),e.Q6J("ngIf",i.editing),e.xp6(1),e.Q6J("ngIf",!i.editing),e.xp6(11),e.hij(" ",e.lcZ(71,19,"REPORTS.SERVICE.DETAILS")," "),e.xp6(4),e.hij(" ",e.lcZ(75,21,"REPORTS.SERVICE.PEST")," "),e.xp6(4),e.hij(" ",e.lcZ(79,23,"REPORTS.SERVICE.RECOMMENDATIONS")," "))},dependencies:[d.sg,d.O5,m.lC,m.rH,m.yS,m.Od,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.nD,s.sg,s.u,A.X$]}),r})();var he=c(6798),S=c(7213),fe=c(9531);function be(r,n){if(1&r&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&r){const t=n.$implicit;e.xp6(1),e.hij("",t.name," ")}}function Ze(r,n){if(1&r&&(e.TgZ(0,"option",25),e._uU(1),e.qZA()),2&r){const t=n.$implicit;e.xp6(1),e.hij("",t.name," ")}}function _e(r,n){if(1&r&&(e.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"label",8),e._uU(4,"Nombre"),e.qZA(),e.TgZ(5,"select",9),e.YNc(6,be,2,1,"option",10),e.qZA()(),e.TgZ(7,"div",7)(8,"label",8),e._uU(9,"Ingrediente Activo"),e.qZA(),e._UZ(10,"input",11),e.qZA(),e.TgZ(11,"div",7)(12,"label",8),e._uU(13,"Dosis"),e.qZA(),e._UZ(14,"input",12),e.qZA(),e.TgZ(15,"div",7)(16,"label",8),e._uU(17,"Permiso de Salud"),e.qZA(),e._UZ(18,"input",13),e.qZA(),e.TgZ(19,"div",14)(20,"label",8),e._uU(21,"Etiqueta"),e.qZA(),e._UZ(22,"br")(23,"input",15),e.qZA(),e.TgZ(24,"div",16)(25,"label",8),e._uU(26,"Reingreso"),e.qZA(),e._UZ(27,"br")(28,"input",17),e.qZA(),e._UZ(29,"br"),e.TgZ(30,"div",18)(31,"label",8),e._uU(32,"Equipo"),e.qZA(),e.TgZ(33,"select",19),e.YNc(34,Ze,2,1,"option",20),e.qZA()(),e.TgZ(35,"div",21)(36,"label",8),e._uU(37,"Tipo de Aplicacion"),e.qZA(),e._UZ(38,"input",22),e.qZA(),e._UZ(39,"div",23),e.qZA()()),2&r){const t=n.index,i=e.oxw();e.xp6(1),e.s9C("formGroupName",t),e.xp6(5),e.Q6J("ngForOf",i.product),e.xp6(17),e.s9C("value",i.getValue(t,"labelColor")),e.xp6(11),e.Q6J("ngForOf",i.equipment)}}let Ae=(()=>{class r{constructor(t,i,o,a,l,p,f,x){this.providerService=t,this.serviceEquipment=i,this.extraService=o,this.productsService=a,this.formBuilder=l,this.authHttpService=p,this.router=f,this.cd=x,this.rows=0,this.editing=!1}ngOnInit(){sessionStorage.getItem("serviceReportId")&&sessionStorage.getItem("isNew"),sessionStorage.getItem("serviceReportId")&&!sessionStorage.getItem("isNew")&&(this.loadForm(),this.loadEquipment(),this.loadData()),sessionStorage.getItem("serviceReportId")||(console.log("es uno nuevo "),this.editing=!0,this.loadForm(),this.firstSteps(),this.loadProduct())}loadEquipment(){this.serviceEquipment.listAll().subscribe(t=>{this.equipment=t,this.cd.detectChanges()})}loadData(){this.serviceProviderId=sessionStorage.getItem("serviceReportId"),this.providerService.getServiceDetailsV1(this.serviceProviderId).subscribe(t=>{this.productsService.listAll().subscribe(i=>{console.log(i,"los productos"),this.product=i,this.cd.detectChanges()}),this.details=t,console.log(this.details,"los detalles");for(let i=0;i<t.length;i++)this.detailsForm=this.form.get("detailsForm"),this.color=this.details[i].products.labelColor,this.detailsForm.push(this.formBuilder.group({id:this.details[i].id,dose:this.details[i].products.dose,sanitaryPermission:this.details[i].products.sanitaryPermission,labelColor:this.details[i].products.labelColor,equipment:this.details[i].equipment,serviceReportId:this.details[i].serviceProviderId,typeOfAspersion:this.details[i].equipment.type,products:this.details[i].products,timeOff:this.details[i].timeOff})),this.getValue(i,"labelColor"),console.log(this.color," el color"),this.cd.detectChanges(),this.cd.detectChanges()}),this.cd.detectChanges()}getValue(t,i){let o=this.form.controls.detailsForm.value[t].labelColor;return console.log(o," el valor del array"),o}firstSteps(){this.loadEquipment(),this.productsService.listAll().subscribe(t=>{this.product=t,this.cd.detectChanges(),console.log(t,"el valor este")})}loadProduct(){this.form.controls.detailsForm.valueChanges.subscribe(t=>{console.log(t),this.form.controls.detailsForm.patchValue([{productId:t[0].product.productId,comercialName:t[0].product.comercialName,activeIngredient:t[0].product.activeIngredient,sanitaryPermission:t[0].product.sanitaryPermission}])})}loadForm(){this.form=new s.cw({detailsForm:new s.Oe([])}),this.productForm=new s.cw({products:new s.NI("")})}getArray(){return this.form.get("detailsForm")}saveDetails(){}addNewDetail(){this.rows=this.rows+1,this.detailsForm=this.form.get("detailsForm"),this.detailsForm.push(this.formBuilder.group({id:[],productId:[],productName:[],sanitaryPermission:[],activeIngredient:[],productDose:[],equipmentId:[],equipmentName:[],equipmentType:[],serviceProviderId:[]}))}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(_),e.Y36(he.Q),e.Y36(S.b),e.Y36(fe.s),e.Y36(s.qu),e.Y36(g.U),e.Y36(m.F0),e.Y36(e.sBO))},r.\u0275cmp=e.Xpm({type:r,selectors:[["service-provider"]],decls:8,vars:3,consts:[[3,"formGroup"],[3,"disabled"],["formArrayName","detailsForm",4,"ngFor","ngForOf"],[1,"btn","btn-light-success",3,"click"],[1,"btn","btn-light-info",3,"click"],["formArrayName","detailsForm"],[1,"row","p-t-20","col-md-12",3,"formGroupName"],[1,"col-md-2"],[1,"form-label"],["formControlName","products",1,"form-select"],["value","products",4,"ngFor","ngForOf"],["formControlName","serviceReportId",1,"form-control"],["formControlName","dose",1,"form-control"],["formControlName","sanitaryPermission",1,"form-control"],[1,"col-md-1"],["formControlName","labelColor","type","color",1,"form-control-color",3,"value"],[1,"col-md-3"],["formControlName","timeOff","type","text",1,"form-control"],[1,"col-md-5"],["formControlName","equipment",1,"form-select"],["value","equip",4,"ngFor","ngForOf"],[1,"col-md-6"],["formControlName","typeOfAspersion",1,"form-control"],[1,"separator","my-10"],["value","products"],["value","equip"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"fieldset",1),e.YNc(2,_e,40,4,"div",2),e.TgZ(3,"div")(4,"button",3),e.NdJ("click",function(){return i.saveDetails()}),e._uU(5,"Guardar"),e.qZA(),e.TgZ(6,"button",4),e.NdJ("click",function(){return i.addNewDetail()}),e._uU(7,"Add"),e.qZA()()()()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("disabled",!i.editing),e.xp6(1),e.Q6J("ngForOf",i.getArray().controls))},dependencies:[d.sg,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.sg,s.u,s.x0,s.CE],encapsulation:2}),r})();function Fe(r,n){if(1&r&&(e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"fieldset",5)(4,"label",6),e._uU(5,"Codigo"),e.qZA(),e._UZ(6,"input",7),e.qZA()(),e.TgZ(7,"div",8)(8,"fieldset",5)(9,"label",6),e._uU(10,"Nombre"),e.qZA(),e._UZ(11,"input",9),e.qZA()(),e.TgZ(12,"div",10)(13,"fieldset",5)(14,"label",6),e._uU(15,"Aplica"),e.qZA(),e._UZ(16,"br")(17,"input",11),e.qZA()(),e.TgZ(18,"div",12)(19,"fieldset",5)(20,"label",6),e._uU(21,"Nivel"),e.qZA(),e._UZ(22,"br"),e.TgZ(23,"select",13)(24,"option",14),e._uU(25,"No Aplica"),e.qZA(),e.TgZ(26,"option",14),e._uU(27,"Bajo"),e.qZA(),e.TgZ(28,"option",14),e._uU(29,"Medio"),e.qZA(),e.TgZ(30,"option",14),e._uU(31,"Alto"),e.qZA()()()(),e._UZ(32,"div",15),e.qZA()()),2&r){const t=n.index,i=e.oxw();e.xp6(1),e.s9C("formGroupName",t),e.xp6(2),e.Q6J("disabled",!0),e.xp6(5),e.Q6J("disabled",!0),e.xp6(5),e.Q6J("disabled",!i.editing),e.xp6(5),e.Q6J("hidden",i.theLastOne),e.xp6(1),e.Q6J("disabled",!i.editing),e.xp6(5),e.Q6J("ngValue",0),e.xp6(2),e.Q6J("ngValue",1),e.xp6(2),e.Q6J("ngValue",2),e.xp6(2),e.Q6J("ngValue",3)}}let Ce=(()=>{class r{constructor(t,i,o,a,l,p){this.providerService=t,this.authHttpService=i,this.extraService=o,this.formBuilder=a,this.router=l,this.cd=p,this.editing=!1,this.false=!1,this.theLastOne=!1}ngOnInit(){sessionStorage.getItem("serviceReportId")&&sessionStorage.getItem("isNew"),sessionStorage.getItem("serviceReportId")&&!sessionStorage.getItem("isNew")&&(this.loadForm(),this.loadData()),sessionStorage.getItem("serviceReportId")||(this.editing=!0,this.loadForm(),this.firstSteps())}loadForm(){this.pestTypeListForm=new s.cw({serviceProviderPestTypeDetailForm:new s.Oe([])})}loadData(){this.serviceProviderId=sessionStorage.getItem("serviceReportId"),this.providerService.getServiceProviderPestTypeDetails(this.serviceProviderId).subscribe(t=>{this.extraService.getPestType().subscribe(i=>{this.serviceProviderPestTypeDetail=t,this.pestList=i;for(let o=0;o<t.length;o++)this.serviceProviderPestTypeDetailForm=this.pestTypeListForm.get("serviceProviderPestTypeDetailForm"),this.serviceProviderPestTypeDetailForm.push(this.formBuilder.group({serviceProviderId:t[o].serviceProviderId,pestTypeId:i[o].pestTypeId,apply:t[o].apply,level:t[o].level,name:i[o].name})),this.cd.detectChanges()})})}getArray(){return this.pestTypeListForm.get("serviceProviderPestTypeDetailForm")}firstSteps(){this.extraService.getPestType().subscribe(t=>{for(let i=0;i<t.length;i++)this.serviceProviderPestTypeDetailForm=this.pestTypeListForm.get("serviceProviderPestTypeDetailForm"),this.serviceProviderPestTypeDetailForm.push(this.formBuilder.group({serviceProviderId:[],pestTypeId:t[i].pestTypeId,apply:!1,level:0,name:t[i].name})),this.cd.detectChanges()})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(_),e.Y36(g.U),e.Y36(S.b),e.Y36(s.qu),e.Y36(m.F0),e.Y36(e.sBO))},r.\u0275cmp=e.Xpm({type:r,selectors:[["service-provider"]],decls:2,vars:2,consts:[[3,"formGroup"],["formArrayName","serviceProviderPestTypeDetailForm",4,"ngFor","ngForOf"],["formArrayName","serviceProviderPestTypeDetailForm"],[1,"row","p-t-20","col-md-12",3,"formGroupName"],["hidden","",1,"col-md-2"],[3,"disabled"],[1,"form-label"],["formControlName","pestTypeId",1,"form-control"],[1,"col-md-5"],["formControlName","name",1,"form-control"],[1,"col-md-1"],["formControlName","apply","type","checkbox","value","",1,"form-check-input"],[1,"col-md-4",3,"hidden"],["formControlName","level",1,"form-select"],[3,"ngValue"],[1,"separator","my-10"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0),e.YNc(1,Fe,33,10,"div",1),e.qZA()),2&t&&(e.Q6J("formGroup",i.pestTypeListForm),e.xp6(1),e.Q6J("ngForOf",i.getArray().controls))},dependencies:[d.sg,s._Y,s.YN,s.Kr,s.Fj,s.Wl,s.EJ,s.JJ,s.JL,s.sg,s.u,s.x0,s.CE],encapsulation:2}),r})();function Te(r,n){if(1&r&&(e.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"label",8),e._uU(4,"Codigo"),e.qZA(),e._UZ(5,"input",9),e.qZA(),e.TgZ(6,"div",10)(7,"fieldset",11)(8,"label",8),e._uU(9,"Aplica"),e.qZA(),e._UZ(10,"br")(11,"input",12),e.qZA()(),e.TgZ(12,"div",13)(13,"fieldset",11)(14,"label",8),e._uU(15,"Nombre"),e.qZA(),e._UZ(16,"input",14),e.qZA()()()()),2&r){const t=n.index,i=e.oxw();e.xp6(1),e.s9C("formGroupName",t),e.xp6(6),e.Q6J("disabled",!i.editing),e.xp6(6),e.Q6J("disabled",!0)}}function Ie(r,n){if(1&r&&(e.TgZ(0,"div",15)(1,"div",6)(2,"div",7)(3,"label",8),e._uU(4,"Codigo"),e.qZA(),e._UZ(5,"input",9),e.qZA(),e.TgZ(6,"div",10)(7,"fieldset",11)(8,"label",8),e._uU(9,"Aplica"),e.qZA(),e._UZ(10,"br")(11,"input",12),e.qZA()(),e.TgZ(12,"div",13)(13,"fieldset",11)(14,"label",8),e._uU(15,"Nombre"),e.qZA(),e._UZ(16,"input",14),e.qZA()()()()),2&r){const t=n.index,i=e.oxw();e.xp6(1),e.s9C("formGroupName",t),e.xp6(6),e.Q6J("disabled",!i.editing),e.xp6(6),e.Q6J("disabled",!0)}}function Se(r,n){if(1&r&&(e.TgZ(0,"div",16)(1,"div",6)(2,"div",7)(3,"label",8),e._uU(4,"Codigo"),e.qZA(),e._UZ(5,"input",9),e.qZA(),e.TgZ(6,"div",10)(7,"fieldset",11)(8,"label",8),e._uU(9,"Aplica"),e.qZA(),e._UZ(10,"br")(11,"input",12),e.qZA()(),e.TgZ(12,"div",13)(13,"fieldset",11)(14,"label",8),e._uU(15,"Nombre"),e.qZA(),e._UZ(16,"input",14),e.qZA()()()()),2&r){const t=n.index,i=e.oxw();e.xp6(1),e.s9C("formGroupName",t),e.xp6(6),e.Q6J("disabled",!i.editing),e.xp6(6),e.Q6J("disabled",!0)}}let xe=(()=>{class r{constructor(t,i,o,a,l,p){this.providerService=t,this.authHttpService=i,this.extraService=o,this.formBuilder=a,this.router=l,this.cd=p,this.editing=!1,this.false=!1}ngOnInit(){sessionStorage.getItem("serviceReportId")&&sessionStorage.getItem("isNew"),sessionStorage.getItem("serviceReportId")&&!sessionStorage.getItem("isNew")&&(this.loadForm(),this.loadData()),sessionStorage.getItem("serviceReportId")||(this.editing=!0,this.loadForm(),this.firstStep())}loadForm(){this.recommendationsListForm=new s.cw({serviceProviderRecommendationsFormsBefore:new s.Oe([]),serviceProviderRecommendationsFormsAfter:new s.Oe([]),serviceProviderRecommendationsFormsDuring:new s.Oe([])})}firstStep(){this.extraService.findRecommendationsByType("1").subscribe(t=>{for(let i=0;i<t.length;i++)this.serviceProviderRecommendationsFormsBefore=this.recommendationsListForm.get("serviceProviderRecommendationsFormsBefore"),this.serviceProviderRecommendationsFormsBefore.push(this.formBuilder.group({recommendationId:t[i].id,apply:[],serviceProviderId:[],name:t[i].detail}));this.cd.detectChanges()}),this.extraService.findRecommendationsByType("2").subscribe(t=>{for(let i=0;i<t.length;i++)this.serviceProviderRecommendationsFormsDuring=this.recommendationsListForm.get("serviceProviderRecommendationsFormsDuring"),this.serviceProviderRecommendationsFormsDuring.push(this.formBuilder.group({recommendationId:t[i].id,apply:[],serviceProviderId:[],name:t[i].detail}));this.cd.detectChanges()}),this.extraService.findRecommendationsByType("3").subscribe(t=>{for(let i=0;i<t.length;i++)this.serviceProviderRecommendationsFormsDuring=this.recommendationsListForm.get("serviceProviderRecommendationsFormsAfter"),this.serviceProviderRecommendationsFormsDuring.push(this.formBuilder.group({recommendationId:t[i].id,apply:[],serviceProviderId:[],name:t[i].detail}));this.cd.detectChanges()})}save(){console.log(this.recommendationsListForm.controls.serviceProviderRecommendationsFormsBefore.value)}loadData(){this.serviceProviderId=sessionStorage.getItem("serviceReportId"),this.providerService.getServiceRecommendationsDetails(this.serviceProviderId).subscribe(t=>{this.extraService.findRecommendationsByType("1").subscribe(i=>{for(let o=0;o<i.length;o++)this.serviceProviderRecommendationsFormsBefore=this.recommendationsListForm.get("serviceProviderRecommendationsFormsBefore"),this.serviceProviderRecommendationsFormsBefore.push(this.formBuilder.group({recommendationId:i[o].id,apply:t[o].apply,serviceProviderId:t[o].serviceProviderId,name:i[o].detail}));this.cd.detectChanges()}),this.extraService.findRecommendationsByType("2").subscribe(i=>{for(let o=0;o<i.length;o++)this.serviceProviderRecommendationsFormsDuring=this.recommendationsListForm.get("serviceProviderRecommendationsFormsDuring"),this.serviceProviderRecommendationsFormsDuring.push(this.formBuilder.group({recommendationId:i[o].id,apply:t[o].apply,serviceProviderId:t[o].serviceProviderId,name:i[o].detail}));this.cd.detectChanges()}),this.extraService.findRecommendationsByType("3").subscribe(i=>{for(let o=0;o<i.length;o++)this.serviceProviderRecommendationsFormsDuring=this.recommendationsListForm.get("serviceProviderRecommendationsFormsAfter"),this.serviceProviderRecommendationsFormsDuring.push(this.formBuilder.group({recommendationId:i[o].id,apply:t[o].apply,serviceProviderId:t[o].serviceProviderId,name:i[o].detail}));this.cd.detectChanges()})})}getArrayAfter(){return this.recommendationsListForm.get("serviceProviderRecommendationsFormsAfter")}getArrayDuring(){return this.recommendationsListForm.get("serviceProviderRecommendationsFormsDuring")}getArrayBefore(){return this.recommendationsListForm.get("serviceProviderRecommendationsFormsBefore")}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(_),e.Y36(g.U),e.Y36(S.b),e.Y36(s.qu),e.Y36(m.F0),e.Y36(e.sBO))},r.\u0275cmp=e.Xpm({type:r,selectors:[["service-provider"]],decls:15,vars:6,consts:[[3,"formGroup"],["formArrayName","serviceProviderRecommendationsFormsBefore",4,"ngFor","ngForOf"],[1,"separator","my-10"],["formArrayName","serviceProviderRecommendationsFormsDuring",4,"ngFor","ngForOf"],["formArrayName","serviceProviderRecommendationsFormsAfter",4,"ngFor","ngForOf"],["formArrayName","serviceProviderRecommendationsFormsBefore"],[1,"row","p-t-20","col-md-12",3,"formGroupName"],["hidden","",1,"col-md-3"],[1,"form-label"],["formControlName","recommendationId",1,"form-control"],[1,"col-md-1"],[3,"disabled"],["formControlName","apply","type","checkbox","value","",1,"form-check-input"],[1,"col-md-11"],["formControlName","name",1,"form-control"],["formArrayName","serviceProviderRecommendationsFormsDuring"],["formArrayName","serviceProviderRecommendationsFormsAfter"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"h2"),e._uU(2,"Antes de la fumigaci\xf3n"),e.qZA(),e.YNc(3,Te,17,3,"div",1),e._UZ(4,"div",2),e.qZA(),e.TgZ(5,"form",0)(6,"h2"),e._uU(7,"Durante la fumigaci\xf3n"),e.qZA(),e.YNc(8,Ie,17,3,"div",3),e._UZ(9,"div",2),e.qZA(),e.TgZ(10,"form",0)(11,"h2"),e._uU(12,"Despu\xe9s de la fumigaci\xf3n"),e.qZA(),e.YNc(13,Se,17,3,"div",4),e._UZ(14,"div",2),e.qZA()),2&t&&(e.Q6J("formGroup",i.recommendationsListForm),e.xp6(3),e.Q6J("ngForOf",i.getArrayBefore().controls),e.xp6(2),e.Q6J("formGroup",i.recommendationsListForm),e.xp6(3),e.Q6J("ngForOf",i.getArrayDuring().controls),e.xp6(2),e.Q6J("formGroup",i.recommendationsListForm),e.xp6(3),e.Q6J("ngForOf",i.getArrayAfter().controls))},dependencies:[d.sg,s._Y,s.Fj,s.Wl,s.JJ,s.JL,s.sg,s.u,s.x0,s.CE],encapsulation:2}),r})(),Ne=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[d.ez,m.Bz.forChild([{path:"",component:G},{path:"cebadero",component:D},{path:"cebadero/form",component:ee},{path:"service-provider",component:ae},{path:"service-provider/form",component:ge,children:[{path:"details",component:Ae},{path:"pest",component:Ce},{path:"recommendations",component:xe},{path:"",redirectTo:"details",pathMatch:"full"},{path:"**",redirectTo:"details",pathMatch:"full"}]}]),y.HB,L.q,h.TU,b.vi,y.QX,Z.IJ,s.u5,s.UX]}),r})()}}]);