"use strict";(self.webpackChunkdemo2=self.webpackChunkdemo2||[]).push([[773],{4773:(z,I,c)=>{c.r(I),c.d(I,{ItemProviderModule:()=>k});var p=c(9808),u=c(4521),A=c(8915),T=c(7292),S=c(5057),g=c(6298),E=c(5802),o=c(3075);class P{}var e=c(5e3),a=c(2843),l=c(262),v=c(520),Z=c(89),h=c(7560);let b=(()=>{class r{constructor(t,i,n,d){this.http=t,this.authService=i,this.router=n,this.variables=d}notAllowed(t){return 401==t.status||403==t.status}listAll(t,i,n,d){return this.http.post(this.variables.getServicingEndpoint()+"/item-providers/find/"+t+"/"+n+"/"+d,i,{headers:this.variables.getAuthHeader()}).pipe((0,l.K)(m=>(this.notAllowed(m),(0,a._)(m))))}save(t){return this.http.post(this.variables.getServicingEndpoint()+"/item-providers/save/",t,{headers:this.variables.getAuthHeader()}).pipe((0,l.K)(i=>(this.notAllowed(i),(0,a._)(i))))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(v.eN),e.LFG(Z.e8),e.LFG(u.F0),e.LFG(h.E))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var _=c(7232);function F(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"a",28),e._uU(3),e.qZA(),e.TgZ(4,"span",29),e._uU(5),e.qZA()(),e.TgZ(6,"td")(7,"a",28),e._uU(8),e.qZA(),e.TgZ(9,"span",29),e._uU(10),e.qZA()(),e.TgZ(11,"td")(12,"a",28),e._uU(13),e.qZA(),e.TgZ(14,"span",29),e._uU(15),e.qZA()(),e.TgZ(16,"td")(17,"a",28),e._uU(18),e.qZA(),e.TgZ(19,"span",29),e._uU(20),e.qZA()(),e.TgZ(21,"td")(22,"a",28),e._uU(23),e.qZA(),e.TgZ(24,"span",29),e._uU(25),e.qZA()(),e.TgZ(26,"td",30)(27,"a",31),e.NdJ("click",function(){const d=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.clickEditItemProvider(d.id,d))}),e._uU(28," Editar "),e.qZA()()()}if(2&r){const t=s.$implicit;e.xp6(3),e.hij(" ",t.item.name," "),e.xp6(2),e.hij("C\xf3digo Interno: ",t.item.code,""),e.xp6(3),e.hij(" ",t.barcode," "),e.xp6(2),e.hij("C\xf3digo Proveedor: ",t.providerCode,""),e.xp6(3),e.hij(" Precio en factura: ",t.price," "),e.xp6(2),e.hij("Precio guardado: ",t.item.purchasePrice,""),e.xp6(3),e.hij(" Descuento: ",t.discount," "),e.xp6(2),e.hij("Descuento Porcentaje: ",t.discountPercentage,""),e.xp6(3),e.hij(" Impuesto: ",t.ivaPercentage," "),e.xp6(2),e.hij("Impuesto Porcentaje: ",t.iva.ivaRateDetail,"")}}const x=function(){return[10,50,100]};let C=(()=>{class r{constructor(t,i){this.service=t,this.router=i,this.totalRegister=0,this.pageNo=0,this.pageSize=10,this.i=1,this.item=new P}ngOnInit(){this.takeProviderCode(),sessionStorage.removeItem("itemProviderId"),sessionStorage.removeItem("itemProvider")}takeProviderCode(){var t;this.searchForm=new o.cw({providerCode:new o.NI("")}),null===(t=this.searchForm.get("providerCode"))||void 0===t||t.valueChanges.subscribe(i=>{console.log(i),this.rangePage(i)})}paginator(t){this.pageNo=t.pageIndex,this.pageSize=t.pageSize,this.takeProviderCode()}rangePage(t){let i=JSON.parse(sessionStorage.getItem("branch"));console.log(i),this.service.listAll(t,i,this.pageNo+1,this.pageSize).subscribe(n=>{this.item_provider=n.content,console.log(n.content)})}clickEditItemProvider(t,i){sessionStorage.setItem("itemProviderId",String(t)),sessionStorage.setItem("itemProvider",JSON.stringify(i)),console.log(JSON.stringify(i)),this.router.navigate(["item-provider/view"])}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(b),e.Y36(u.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-item-provider"]],decls:52,vars:34,consts:[[1,"card","mb-10"],[1,"card-body","d-flex","align-items-center","py-8"],[1,"d-flex","h-80px","w-80px","flex-shrink-0","flex-center","position-relative"],["src","assets/media/icons/duotune/coding/cod008.svg",1,"h-40px","me-10"],[1,"ms-6"],[1,"list-unstyled","text-gray-600","fw-bold","fs-6","p-0","m-0"],[1,"card","card-custom"],[1,"card-header","card-header-stretch","overflow-auto"],[1,"card-header","border-0","pt-5"],[1,"card-title","align-items-start","flex-column"],[1,"card-label","fw-bolder","fs-3","mb-1"],[1,"text-muted","mt-1","fw-bold","fs-7"],[1,"card-toolbar"],["type","button",1,"btn","btn-success","btn-hover-scale",3,"click"],[1,"svg-icon","svg-icon-2",3,"inlineSVG"],["autocomplete","off","data-kt-search-element","form","id","searchForm",1,"w-100","position-relative","mb-5",3,"formGroup"],["data-kt-search-element","input","formControlName","providerCode","id","providerCode","name","providerCode","placeholder","Buscar por c\xf3digo de proveedor","type","text","value","",1,"form-control","form-control-lg","form-control-solid","px-15"],[1,"card-body","py-3"],[1,"table-responsive"],[1,"table","align-middle","gs-0","gy-4"],[1,"fw-bolder","text-muted","bg-light"],[1,"min-w-100px"],[1,"min-w-125px"],[1,"min-w-200px"],[1,"min-w-175px"],[1,"min-w-10px"],[4,"ngFor","ngForOf"],["aria-label","Select page",3,"length","pageSizeOptions","pageSize","page"],[1,"text-dark","fw-bolder","text-hover-primary","d-block","mb-1","fs-6"],[1,"text-muted","fw-bold","text-muted","d-block","fs-7"],[1,"text-end"],[1,"btn","btn-bg-light","btn-color-muted","btn-active-color-primary","btn-sm","px-4","me-2",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",4)(5,"h1",5),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"p"),e._uU(9),e.ALo(10,"translate"),e.qZA()()()(),e.TgZ(11,"div",6)(12,"div",7)(13,"div",8)(14,"h3",9)(15,"span",10),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"span",11),e._uU(19,"Accesibles por este usuario"),e.qZA()(),e.TgZ(20,"div",12)(21,"button",13),e.NdJ("click",function(){return i.clickEditItemProvider(0,null)}),e._uU(22),e.ALo(23,"translate"),e._UZ(24,"span",14),e.qZA()(),e.TgZ(25,"form",15),e._UZ(26,"input",16),e.qZA()(),e.TgZ(27,"div",17)(28,"div",18)(29,"table",19)(30,"thead")(31,"tr",20)(32,"th",21),e._uU(33,"Producto"),e.qZA(),e.TgZ(34,"th",22),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"th",23),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.TgZ(40,"th",21),e._uU(41),e.ALo(42,"translate"),e.qZA(),e.TgZ(43,"th",24),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.TgZ(46,"th",25),e._uU(47),e.ALo(48,"translate"),e.qZA()()(),e.TgZ(49,"tbody"),e.YNc(50,F,29,10,"tr",26),e.qZA()(),e.TgZ(51,"mat-paginator",27),e.NdJ("page",function(d){return i.paginator(d)}),e.qZA()()()()()),2&t&&(e.xp6(6),e.hij(" ",e.lcZ(7,15,"ITEMS.ITEMS_PROVIDER_LIST.TITTLE")," "),e.xp6(3),e.hij(" ",e.lcZ(10,17,"ITEMS.ITEMS_PROVIDER_LIST.INSTRUCTIONS")," "),e.xp6(7),e.Oqu(e.lcZ(17,19,"ITEMS.ITEMS_PROVIDER_LIST.TABLE_HEADER")),e.xp6(6),e.hij(" ",e.lcZ(23,21,"ITEMS.ITEMS_PROVIDER_LIST.NEW_RELATION")," "),e.xp6(2),e.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen024.svg"),e.xp6(1),e.Q6J("formGroup",i.searchForm),e.xp6(10),e.Oqu(e.lcZ(36,23,"ITEMS.ITEMS_PROVIDER_LIST.TABLE.BARCODE")),e.xp6(3),e.Oqu(e.lcZ(39,25,"ITEMS.ITEMS_PROVIDER_LIST.TABLE.PRICE")),e.xp6(3),e.Oqu(e.lcZ(42,27,"ITEMS.ITEMS_PROVIDER_LIST.TABLE.DISCOUNT")),e.xp6(3),e.Oqu(e.lcZ(45,29,"ITEMS.ITEMS_PROVIDER_LIST.TABLE.IVA")),e.xp6(3),e.Oqu(e.lcZ(48,31,"ITEMS.ITEMS_PROVIDER_LIST.TABLE.ACTIONS")),e.xp6(3),e.Q6J("ngForOf",i.item_provider),e.xp6(1),e.Q6J("length",i.totalRegister)("pageSizeOptions",e.DdM(33,x))("pageSize",i.pageSize))},dependencies:[p.sg,S.NW,g.d$,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,_.X$]}),r})();var f=c(1135),O=c(186),N=c(5226),w=c.n(N),M=c(5872);let y=(()=>{class r{constructor(t,i,n){this.http=t,this.router=i,this.variables=n}notAllowed(t){return 401==t.status||403==t.status}listAll(t){return this.http.post(this.variables.getServicingEndpoint()+"/items-additional/department/",t,{headers:this.variables.getAuthHeader()}).pipe((0,l.K)(i=>(this.notAllowed(i),(0,a._)(i))))}listAllFamilies(t){return this.http.post(this.variables.getServicingEndpoint()+"/items-additional/family/",t,{headers:this.variables.getAuthHeader()}).pipe((0,l.K)(i=>(this.notAllowed(i),(0,a._)(i))))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(v.eN),e.LFG(u.F0),e.LFG(h.E))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),U=(()=>{class r{constructor(t,i,n,d){this.http=t,this.authService=i,this.router=n,this.variables=d}notAllowed(t){return 401==t.status||403==t.status}listAll(){return this.http.get(this.variables.getServicingEndpoint()+"/extras/ivaCode/all/",{headers:this.variables.getAuthHeader()}).pipe((0,l.K)(t=>(this.notAllowed(t),(0,a._)(t))))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(v.eN),e.LFG(Z.e8),e.LFG(u.F0),e.LFG(h.E))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),q=(()=>{class r{constructor(t,i,n){this.http=t,this.router=i,this.variables=n}notAllowed(t){return 401==t.status||403==t.status}listAll(t,i){let n=sessionStorage.getItem("branchId");return this.http.get(this.variables.getServicingEndpoint()+"/items/find/"+n+"/"+t+"/"+i,{headers:this.variables.getAuthHeader()}).pipe((0,l.K)(d=>(this.notAllowed(d),(0,a._)(d))))}findByCodes(t){let i=sessionStorage.getItem("branchId");return this.http.get(this.variables.getServicingEndpoint()+"/items/findCode/"+i+"/"+t,{headers:this.variables.getAuthHeader()}).pipe((0,l.K)(n=>(this.notAllowed(n),(0,a._)(n))))}listMeasures(){let t=sessionStorage.getItem("itemId");return this.http.get(this.variables.getServicingEndpoint()+"/items/findMeasuresBy/"+t,{headers:this.variables.getAuthHeader()}).pipe((0,l.K)(i=>(this.notAllowed(i),(0,a._)(i))))}save(t){return this.http.post(this.variables.getServicingEndpoint()+"/items/item/",t,{headers:this.variables.getAuthHeader()}).pipe((0,l.K)(i=>(this.notAllowed(i),(0,a._)(i))))}findById(){let t=sessionStorage.getItem("itemId");return this.http.get(this.variables.getServicingEndpoint()+"/items/findId/"+t,{headers:this.variables.getAuthHeader()}).pipe((0,l.K)(i=>(this.notAllowed(i),(0,a._)(i))))}findMeasureById(){let t=sessionStorage.getItem("itemId");return this.http.get(this.variables.getServicingEndpoint()+"/items/findMeasuresBy/"+t,{headers:this.variables.getAuthHeader()}).pipe((0,l.K)(i=>(this.notAllowed(i),(0,a._)(i))))}findPriceById(){let t=sessionStorage.getItem("itemId");return this.http.get(this.variables.getServicingEndpoint()+"/items/findPriceBy/"+t,{headers:this.variables.getAuthHeader()}).pipe((0,l.K)(i=>(this.notAllowed(i),(0,a._)(i))))}updateItem(t){return this.http.put(this.variables.getServicingEndpoint()+"/items/item-v2/"+t.id,t,{headers:this.variables.getAuthHeader()}).pipe((0,l.K)(i=>(this.notAllowed(i),(0,a._)(i))))}loadCabys(){return this.http.get(this.variables.getServicingEndpoint()+"/extras/cabys/all",{headers:this.variables.getAuthHeader()}).pipe((0,l.K)(t=>(this.notAllowed(t),(0,a._)(t))))}saveMeasures(t){return this.http.post(this.variables.getServicingEndpoint()+"/items/itemMeasures/",t,{headers:this.variables.getAuthHeader()}).pipe((0,l.K)(i=>(this.notAllowed(i),(0,a._)(i))))}updateMeasures(t){return this.http.put(this.variables.getServicingEndpoint()+"/items/itemMeasures/"+t.id,t,{headers:this.variables.getAuthHeader()}).pipe((0,l.K)(i=>(this.notAllowed(i),(0,a._)(i))))}updatePrices(t){return this.http.put(this.variables.getServicingEndpoint()+"/items/itemPrices/"+t.id,t,{headers:this.variables.getAuthHeader()}).pipe((0,l.K)(i=>(this.notAllowed(i),(0,a._)(i))))}savePrices(t){return this.http.post(this.variables.getServicingEndpoint()+"/items/itemPrices/",t,{headers:this.variables.getAuthHeader()}).pipe((0,l.K)(i=>(this.notAllowed(i),(0,a._)(i))))}searchCabys(t){return this.http.get(this.variables.getServicingEndpoint()+"/extras/cabys/search/"+t,{headers:this.variables.getAuthHeader()}).pipe((0,l.K)(i=>(this.notAllowed(i),(0,a._)(i))))}currencyById(t){return this.http.get(this.variables.getServicingEndpoint()+"/items/currency/"+t,{headers:this.variables.getAuthHeader()}).pipe((0,l.K)(i=>(this.notAllowed(i),(0,a._)(i))))}findFamilyAll(){return this.http.get(this.variables.getServicingEndpoint()+"/items-additional/family/",{headers:this.variables.getAuthHeader()}).pipe((0,l.K)(t=>(this.notAllowed(t),(0,a._)(t))))}findFamilyById(t){return this.http.get(this.variables.getServicingEndpoint()+"/items-additional/family/"+t,{headers:this.variables.getAuthHeader()}).pipe((0,l.K)(i=>(this.notAllowed(i),(0,a._)(i))))}findDepartmentAll(){return this.http.get(this.variables.getServicingEndpoint()+"/items-additional/department/",{headers:this.variables.getAuthHeader()}).pipe((0,l.K)(t=>(this.notAllowed(t),(0,a._)(t))))}findDepartmentById(t){return this.http.get(this.variables.getServicingEndpoint()+"/items-additional/department/"+t,{headers:this.variables.getAuthHeader()}).pipe((0,l.K)(i=>(this.notAllowed(i),(0,a._)(i))))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(v.eN),e.LFG(u.F0),e.LFG(h.E))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function R(r,s){if(1&r&&(e.TgZ(0,"option",41),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.Q6J("value",t.barcode1),e.xp6(1),e.Oqu(t.name)}}function L(r,s){if(1&r&&(e.TgZ(0,"option",39),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.Oqu(t.department)}}function D(r,s){if(1&r&&(e.TgZ(0,"option",41),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t.family)}}function V(r,s){if(1&r&&(e.TgZ(0,"option",39),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.Oqu(t.ivaRateDetail)}}function J(r,s){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",12)(2,"label",13),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"input",14),e.qZA(),e.TgZ(6,"div",12)(7,"label",13),e._uU(8),e.ALo(9,"translate"),e.qZA(),e._UZ(10,"input",15),e.qZA(),e._UZ(11,"div",16)(12,"div",17),e.TgZ(13,"div",12)(14,"label",13),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"input",18),e.NdJ("focus",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.clearPreference())}),e.qZA(),e.TgZ(18,"datalist",19),e._UZ(19,"option",20),e.YNc(20,R,2,2,"option",21),e.qZA()(),e.TgZ(21,"div",12)(22,"label",13),e._uU(23),e.ALo(24,"translate"),e.qZA(),e._UZ(25,"input",22),e.qZA(),e.TgZ(26,"div",16)(27,"div",23)(28,"label",24),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"select",25),e.YNc(32,L,2,2,"option",26),e.qZA()(),e.TgZ(33,"div",23)(34,"label",24),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"select",27),e.YNc(38,D,2,2,"option",21),e.qZA()()(),e.TgZ(39,"div",12)(40,"label",24),e._uU(41),e.ALo(42,"translate"),e.qZA(),e._UZ(43,"input",28),e.qZA(),e._UZ(44,"div",17),e.TgZ(45,"div",16)(46,"div",23)(47,"label",24),e._uU(48),e.ALo(49,"translate"),e.qZA(),e._UZ(50,"input",29),e.qZA(),e.TgZ(51,"div",23)(52,"label",24),e._uU(53),e.ALo(54,"translate"),e.qZA(),e._UZ(55,"input",30),e.qZA()(),e.TgZ(56,"div",16)(57,"div",31)(58,"label",24),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.TgZ(61,"select",32),e.YNc(62,V,2,2,"option",26),e.qZA()(),e.TgZ(63,"div",33)(64,"label",24),e._uU(65),e.ALo(66,"translate"),e.qZA(),e._UZ(67,"input",34),e.qZA(),e.TgZ(68,"div",31)(69,"label",24),e._uU(70),e.ALo(71,"translate"),e.qZA(),e._UZ(72,"input",35),e.qZA(),e.TgZ(73,"div",31)(74,"label",24),e._uU(75),e.ALo(76,"translate"),e.qZA(),e._UZ(77,"input",36),e.qZA(),e.TgZ(78,"div",31)(79,"label",24),e._uU(80),e.ALo(81,"translate"),e.qZA(),e._UZ(82,"input",37),e.qZA(),e.TgZ(83,"div",31)(84,"label",24),e._uU(85),e.ALo(86,"translate"),e.qZA(),e.TgZ(87,"select",38)(88,"option",39),e._uU(89,"Si"),e.qZA(),e.TgZ(90,"option",39),e._uU(91,"no"),e.qZA()()()(),e.TgZ(92,"div",12)(93,"label",24),e._uU(94),e.ALo(95,"translate"),e.qZA(),e._UZ(96,"textarea",40),e.qZA(),e.BQk()}if(2&r){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,22,"ITEMS.ITEMS_PROVIDER_LIST.FORM.PROVIDER_CODE")),e.xp6(5),e.Oqu(e.lcZ(9,24,"ITEMS.ITEMS_PROVIDER_LIST.FORM.PROVIDER")),e.xp6(7),e.Oqu(e.lcZ(16,26,"ITEMS.ITEMS_PROVIDER_LIST.FORM.BARCODE")),e.xp6(5),e.Q6J("ngForOf",t.item),e.xp6(3),e.Oqu(e.lcZ(24,28,"ITEMS.ITEMS_PROVIDER_LIST.FORM.DESCRIPTION")),e.xp6(6),e.Oqu(e.lcZ(30,30,"ITEMS.ITEMS_PROVIDER_LIST.FORM.DEPARTMENT")),e.xp6(3),e.Q6J("ngForOf",t.department),e.xp6(3),e.Oqu(e.lcZ(36,32,"ITEMS.ITEMS_PROVIDER_LIST.FORM.FAMILY")),e.xp6(3),e.Q6J("ngForOf",t.family),e.xp6(3),e.Oqu(e.lcZ(42,34,"ITEMS.ITEMS_PROVIDER_LIST.FORM.BRAND")),e.xp6(7),e.Oqu(e.lcZ(49,36,"ITEMS.ITEMS_PROVIDER_LIST.FORM.CODE_FROM_PROVIDER")),e.xp6(5),e.Oqu(e.lcZ(54,38,"ITEMS.ITEMS_PROVIDER_LIST.FORM.DATE")),e.xp6(6),e.Oqu(e.lcZ(60,40,"ITEMS.FORM.SELECT_IVA")),e.xp6(3),e.Q6J("ngForOf",t.iva),e.xp6(3),e.Oqu(e.lcZ(66,42,"ITEMS.FORM.IVA_PERCENTAGE")),e.xp6(5),e.Oqu(e.lcZ(71,44,"ITEMS.FORM.PURCHASE_PRICE")),e.xp6(5),e.Oqu(e.lcZ(76,46,"ITEMS.FORM.DISCOUNT")),e.xp6(5),e.Oqu(e.lcZ(81,48,"ITEMS.FORM.IV_SPECIAL")),e.xp6(5),e.Oqu(e.lcZ(86,50,"ITEMS.FORM.DISCOUNT_FLAG")),e.xp6(3),e.Q6J("ngValue",!0),e.xp6(2),e.Q6J("ngValue",!1),e.xp6(4),e.Oqu(e.lcZ(95,52,"CLIENTS.FORM.NOTE"))}}function H(r,s){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",42),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.prevStep())}),e._UZ(2,"span",43),e._uU(3," Back "),e.qZA(),e.BQk()}2&r&&(e.xp6(2),e.Q6J("inlineSVG","./assets/media/icons/duotune/arrows/arr063.svg"))}function B(r,s){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",44),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.enableEdit())}),e.TgZ(2,"span",45),e._uU(3),e._UZ(4,"span",46),e.qZA()(),e.BQk()}2&r&&(e.xp6(3),e.hij(" Editar "," "," "),e.xp6(1),e.Q6J("inlineSVG","./assets/media/icons/duotune/arrows/arr064.svg"))}function G(r,s){1&r&&(e.ynx(0),e.TgZ(1,"button",47)(2,"span",45),e._uU(3," Submit "),e._UZ(4,"span",46),e.qZA()(),e.BQk()),2&r&&(e.xp6(4),e.Q6J("inlineSVG","./assets/media/icons/duotune/arrows/arr064.svg"))}const Q=function(r,s){return{current:r,completed:s}};let K=(()=>{class r{constructor(t,i,n,d,m,Y,$,j){this.dp=t,this.serviceProvider=i,this.serviceDepartment=n,this.serviceIva=d,this.serviceItem=m,this.service=Y,this.datePipe=$,this.router=j,this.isNew=!1,this.isEditing=!1,this.formsCount=1,this.account$=new f.X(O.l),this.currentStep$=new f.X(1),this.isCurrentFormValid$=new f.X(!1)}ngOnInit(){this.loadForm(),this.loadDetails(),this.branchSelected=JSON.parse(sessionStorage.getItem("branch"));let t=JSON.parse(sessionStorage.getItem("itemProvider"));t||(console.log("is new "),this.isNew=!0,this.isEditing=!0),t&&(console.log("is edit "),this.itemProviderForm.setValue(t))}nextStep(){const t=this.currentStep$.value+1;t>this.formsCount||this.currentStep$.next(t)}prevStep(){const t=this.currentStep$.value-1;0!==t&&this.currentStep$.next(t)}loadForm(){this.itemProviderForm=new o.cw({id:new o.NI(""),item:new o.NI(""),barcode:new o.NI(""),codeFromProvider:new o.NI(""),description:new o.NI(""),department:new o.NI(""),family:new o.NI(""),brand:new o.NI(""),provider:new o.NI(this.provider),iva:new o.NI(""),ivaPercentage:new o.NI(""),price:new o.NI(""),discountPercentage:new o.NI(""),discount:new o.NI(""),activateDiscount:new o.NI(""),note:new o.NI(""),providerCode:new o.NI(""),date:new o.NI(this.currDate=this.dp.transform(new Date,"dd-MM-yyyy")),branch:new o.NI(""),ivEspecial:new o.NI("")}),this.currDate=this.dp.transform(new Date,"dd-MM-yyyy"),this.itemProviderForm.patchValue({date:this.currDate})}onUpdate(){this.isNew&&(console.log(this.itemProviderForm.value),this.service.save(this.itemProviderForm.value).subscribe(t=>{w().fire("Exito",`Hola ${t.description} se agreg\xf3 correctamente al proveedor ${t.provider.socialReasonName}`,"info"),this.router.navigate(["/item-provider"])}))}loadDetails(){this.itemProviderForm.controls.providerCode.valueChanges.subscribe(t=>{this.serviceProvider.findProviderCode(t,this.branchSelected).subscribe(i=>{let n;this.provider=i,console.log(i),this.itemProviderForm.patchValue({provider:this.provider.socialReasonName}),this.serviceDepartment.listAll(this.branchSelected).subscribe(d=>{this.department=d}),this.serviceDepartment.listAllFamilies(this.branchSelected).subscribe(d=>{this.family=d}),this.serviceIva.listAll().subscribe(d=>{this.iva=d}),this.itemProviderForm.controls.barcode.valueChanges.subscribe(d=>{n=d,this.serviceItem.findByCodes(n).subscribe(m=>{console.log(m),this.itemSelected=m,this.itemProviderForm.patchValue({description:this.itemSelected[0].name,department:this.itemSelected[0].department,family:this.itemSelected[0].family,iva:this.itemSelected[0].iva,ivaPercentage:this.itemSelected[0].ivaPercentage,price:this.itemSelected[0].purchasePrice,branch:this.branchSelected,item:m[0],provider:this.provider,discountPercentage:0,ivEspecial:0})})})})}),this.serviceItem.listAll(1,1e6).subscribe(t=>{this.item=t.content})}goTo(t){this.currentStep$.next(t)}clearPreference(){}enableEdit(){this.isEditing=!0}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(p.uU),e.Y36(M.H),e.Y36(y),e.Y36(U),e.Y36(q),e.Y36(b),e.Y36(p.uU),e.Y36(u.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-form-item-provider"]],decls:19,vars:13,consts:[[1,"card"],[1,"card-body"],["id","kt_create_account_stepper",1,"stepper","stepper-links","d-flex","flex-column","pt-15"],[1,"stepper-nav","mb-1"],[1,"stepper-item",3,"ngClass","click"],[1,"stepper-title"],["id","itemProviderForm","noValidate","",1,"mx-auto","mw-600px","w-100","pt-15","pb-10",3,"formGroup","ngSubmit"],[3,"disabled"],[1,"current"],[4,"ngIf"],[1,"d-flex","flex-stack","pt-15"],[1,"mr-2"],[1,"fv-row","mb-10"],[1,"form-label","required"],["formControlName","providerCode","name","providerCode",1,"form-control","form-control-lg","form-control-solid"],["formControlName","provider","name","provider",1,"form-control","form-control-lg","form-control-solid"],[1,"row","row-cols-lg-2","g-10","fv-row","mb-10"],[1,"separator","my-12"],["formControlName","barcode","list","item","placeholder","Search...","type","text",1,"form-control","form-control-lg","form-control-solid",3,"focus"],["id","item"],["value","Unsure/No preference"],[3,"value",4,"ngFor","ngForOf"],["formControlName","description","name","description",1,"form-control","form-control-lg","form-control-solid"],[1,"col"],[1,"form-label"],["formControlName","department","id","department",1,"form-select"],[3,"ngValue",4,"ngFor","ngForOf"],["formControlName","family","id","family",1,"form-select"],["formControlName","brand","name","brand",1,"form-control","form-control-lg","form-control-solid"],["formControlName","codeFromProvider","name","codeFromProvider",1,"form-control","form-control-lg","form-control-solid"],["formControlName","date","name","date","type","date",1,"form-control","form-control-lg","form-control-solid"],[1,"col-3"],["formControlName","iva","id","iva",1,"form-select","form-select-lg","form-select-solid"],[1,"col-2"],["formControlName","ivaPercentage","name","ivaPercentage","type","number","ui-number-mask","",1,"form-control","form-control-lg","form-control-solid"],["formControlName","price","name","price","type","number","ui-number-mask","",1,"form-control","form-control-lg","form-control-solid"],["formControlName","discountPercentage","name","discountPercentage","type","number","ui-number-mask","",1,"form-control","form-control-lg","form-control-solid"],["formControlName","ivEspecial","name","ivEspecial","type","number","ui-number-mask","",1,"form-control","form-control-lg","form-control-solid"],["formControlName","activateDiscount","id","activateDiscount",1,"form-select","form-select-lg","form-select-solid"],[3,"ngValue"],["formControlName","note","name","note","rows","3",1,"form-control","form-control-lg","form-control-solid"],[3,"value"],["type","button",1,"btn","btn-lg","btn-light-primary","me-3",3,"click"],[1,"svg-icon","svg-icon-4","me-1",3,"inlineSVG"],["type","button",1,"btn","btn-lg","btn-warning","me-3",3,"click"],[1,"indicator-label"],[1,"svg-icon","svg-icon-3","ms-2","me-0",3,"inlineSVG"],["form","itemProviderForm","type","submit",1,"btn","btn-lg","btn-primary","me-3"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e.NdJ("click",function(){return i.goTo(1)}),e.TgZ(5,"h3",5),e._uU(6),e.ALo(7,"translate"),e.qZA()()(),e.TgZ(8,"form",6),e.NdJ("ngSubmit",function(){return i.onUpdate()}),e.TgZ(9,"fieldset",7)(10,"div",8),e.YNc(11,J,97,54,"ng-container",9),e.qZA()(),e.TgZ(12,"div",10)(13,"div",11),e.YNc(14,H,4,1,"ng-container",9),e.qZA(),e.ynx(15),e.TgZ(16,"div"),e.YNc(17,B,5,2,"ng-container",9),e.YNc(18,G,5,1,"ng-container",9),e.qZA(),e.BQk(),e.qZA()()()()()),2&t&&(e.xp6(4),e.Q6J("ngClass",e.WLB(10,Q,1===i.currentStep$.value,i.currentStep$.value>1)),e.xp6(2),e.Oqu(e.lcZ(7,8,"ITEMS.ITEMS_PROVIDER_LIST.FORM.INFO")),e.xp6(2),e.Q6J("formGroup",i.itemProviderForm),e.xp6(1),e.Q6J("disabled",!i.isEditing),e.xp6(2),e.Q6J("ngIf",1===i.currentStep$.value),e.xp6(3),e.Q6J("ngIf",1!==i.currentStep$.value),e.xp6(3),e.Q6J("ngIf",i.currentStep$.value===i.formsCount&&!i.isEditing),e.xp6(1),e.Q6J("ngIf",i.currentStep$.value===i.formsCount&&i.isEditing))},dependencies:[p.mk,p.sg,p.O5,g.d$,o._Y,o.YN,o.Kr,o.Fj,o.wV,o.EJ,o.JJ,o.JL,o.sg,o.u,_.X$]}),r})(),k=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[p.uU],imports:[p.ez,u.Bz.forChild([{path:"",component:C},{path:"view",component:K}]),A.HB,T.q,S.TU,g.vi,A.QX,E.IJ,o.u5,o.UX]}),r})()}}]);