"use strict";(self.webpackChunkdemo2=self.webpackChunkdemo2||[]).push([[209],{4209:(ke,S,l)=>{l.r(S),l.d(S,{ReportsModule:()=>Re});var v=l(9808),m=l(4521),F=l(5057),_=l(6298),R=l(5802),s=l(3075),e=l(5e3),c=l(2843),p=l(262),A=l(520),h=l(4563),C=l(7560);let w=(()=>{class o{constructor(t,i,r,a){this.http=t,this.authService=i,this.router=r,this.variables=a}notAllowed(t){return 401==t.status||403==t.status}findControlByWarehouse(t,i,r,a){return this.http.get(this.variables.getServiceEndpoint()+"/controlReport/get/"+t+"/"+i+"/"+r+"/"+a,{}).pipe((0,p.K)(d=>(this.notAllowed(d),(0,c._)(d))))}findControlByClient(t,i,r,a){return this.http.get(this.variables.getServiceEndpoint()+"/controlReport/get-client/"+t+"/"+i+"/"+r+"/"+a,{}).pipe((0,p.K)(d=>(this.notAllowed(d),(0,c._)(d))))}saveControlReport(t){return this.http.post(this.variables.getServiceEndpoint()+"/controlReport/save",t,{}).pipe((0,p.K)(i=>(this.notAllowed(i),(0,c._)(i))))}editControlReport(t){return console.log(t.id," este es el service que imprime el id"),this.http.put(this.variables.getServiceEndpoint()+"/controlReport/"+t.id,t,{}).pipe((0,p.K)(i=>(this.notAllowed(i),(0,c._)(i))))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(A.eN),e.LFG(h.U),e.LFG(m.F0),e.LFG(C.E))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var y=l(7136),Z=l(7232);function k(o,n){1&o&&(e.TgZ(0,"button",28),e._UZ(1,"i",29),e._uU(2," Crear "),e.qZA())}function J(o,n){1&o&&(e.TgZ(0,"th",24),e._uU(1,"Eliminar"),e.qZA())}function O(o,n){1&o&&(e.TgZ(0,"td")(1,"button",33),e.NdJ("click",function(){return null}),e._UZ(2,"i",34),e.qZA()())}function E(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"slice"),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td")(9,"button",30),e.NdJ("click",function(){const a=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.clickEnterReport(a.id,a))}),e._UZ(10,"i",31),e.qZA()(),e.YNc(11,O,3,0,"td",32),e.qZA()}if(2&o){const t=n.$implicit,i=e.oxw();e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(e.Dn7(5,4,t.createAt,0,10)),e.xp6(3),e.Oqu(t.total),e.xp6(4),e.Q6J("ngIf",i.authHttpService.hasRole("ROLE_ADMIN"))}}const D=function(){return[10,50,100]};let L=(()=>{class o{constructor(t,i,r,a){this.service=t,this.authHttpService=i,this.router=r,this.cd=a,this.tittle="Cebaderos",this.totalRegister=0,this.pageNo=0,this.pageSize=10}ngOnInit(){this.rangePage(),sessionStorage.removeItem("reportId"),sessionStorage.removeItem("reports"),sessionStorage.removeItem("isNew")}rangePage(){let t=sessionStorage.getItem("clientId");this.service.findControlByClient(t,!0,this.pageNo+1,this.pageSize).subscribe(i=>{console.log(i.length),this.controlReport=i,this.cd.detectChanges()})}paginator(t){this.pageNo=t.pageIndex,this.pageSize=t.pageSize,this.rangePage()}clickEnterReport(t,i){sessionStorage.setItem("reportId",t),sessionStorage.setItem("reports",JSON.stringify(i)),this.router.navigate(["/reports/cebadero/form"])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(w),e.Y36(h.U),e.Y36(m.F0),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-items"]],decls:42,vars:11,consts:[[1,"card","mb-10"],[1,"card-body","d-flex","align-items-center","py-8"],[1,"d-flex","h-80px","w-80px","flex-shrink-0","flex-center","position-relative"],["src","assets/media/icons/duotune/coding/cod010.svg",1,"h-40px","me-10"],[1,"ms-6"],[1,"list-unstyled","text-gray-600","fw-bold","fs-6","p-0","m-0"],["class","btn btn-primary","routerLink","/reports/cebadero/form",4,"ngIf"],[1,"col-1"],["routerLink","/reports",1,"btn","btn-warning","margin-left"],["data-toggle","tooltip","data-placement","top",1,"fas","fa-arrow-left"],[1,"card","card-custom"],[1,"card-header","card-header-stretch","overflow-auto"],[1,"card-header","border-0","pt-5"],[1,"card-title","align-items-start","flex-column"],[1,"card-label","fw-bolder","fs-3","mb-1"],[1,"text-muted","mt-1","fw-bold","fs-7"],[1,"card-toolbar"],["data-kt-menu-flip","top-end","data-kt-menu-placement","bottom-end","data-kt-menu-trigger","click","type","button",1,"btn","btn-sm","btn-icon","btn-color-primary","btn-active-light-primary"],[1,"svg-icon","svg-icon-2",3,"inlineSVG"],[1,"card-body","py-3"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"mb-1"],[1,"mb-4"],[1,"mb-3"],["class","mb-3",4,"ngIf"],[4,"ngFor","ngForOf"],["aria-label","Select page",3,"length","pageSizeOptions","pageSize","page"],["routerLink","/reports/cebadero/form",1,"btn","btn-primary"],["data-toggle","tooltip","data-placement","top",1,"fas","fa-plus"],["type","submit",1,"btn","btn-warning",3,"click"],["data-toggle","tooltip","data-placement","top",1,"fas","fa-edit"],[4,"ngIf"],["type","button",1,"btn","btn-danger",3,"click"],["data-toggle","tooltip","data-placement","top",1,"fas","fa-trash"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",4)(5,"p",5),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.YNc(8,k,3,0,"button",6),e._UZ(9,"a",7),e.TgZ(10,"button",8),e._UZ(11,"i",9),e._uU(12," Volver "),e.qZA()()()(),e.TgZ(13,"div",10)(14,"div",11)(15,"div",12)(16,"h3",13)(17,"span",14),e._uU(18,"Listado de Cebaderos"),e.qZA(),e.TgZ(19,"span",15),e._uU(20,"Accesibles por este cliente"),e.qZA()(),e.TgZ(21,"div",16)(22,"button",17),e._UZ(23,"span",18),e.qZA(),e._UZ(24,"app-dropdown-menu2"),e.qZA()(),e.TgZ(25,"div",19)(26,"div",20)(27,"table",21)(28,"thead")(29,"tr")(30,"th",22),e._uU(31,"C\xf3digo"),e.qZA(),e.TgZ(32,"th",23),e._uU(33,"Fecha"),e.qZA(),e.TgZ(34,"th",23),e._uU(35,"Cantidad"),e.qZA(),e.TgZ(36,"th",24),e._uU(37,"Editar"),e.qZA(),e.YNc(38,J,2,0,"th",25),e.qZA()(),e.TgZ(39,"tbody"),e.YNc(40,E,12,8,"tr",26),e.qZA()(),e.TgZ(41,"mat-paginator",27),e.NdJ("page",function(a){return i.paginator(a)}),e.qZA()()()()()),2&t&&(e.xp6(6),e.hij(" ",e.lcZ(7,8,"DASHBOARD.ICONS.FEEDLOTS")," "),e.xp6(2),e.Q6J("ngIf",i.authHttpService.hasRole("ROLE_ADMIN")),e.xp6(15),e.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen024.svg"),e.xp6(15),e.Q6J("ngIf",i.authHttpService.hasRole("ROLE_ADMIN")),e.xp6(2),e.Q6J("ngForOf",i.controlReport),e.xp6(1),e.Q6J("length",i.totalRegister)("pageSizeOptions",e.DdM(10,D))("pageSize",i.pageSize))},dependencies:[v.sg,v.O5,m.rH,F.NW,_.d$,y.w,v.OU,Z.X$]}),o})();var N=l(8915),Q=l(7292),Y=l(5226),f=l.n(Y),T=l(646),B=l(2115);const G=["chartRef"];let V=(()=>{class o{constructor(){this.svgIcon="",this.color="",this.description="",this.change="",this.title="",this.chartOptions={}}ngOnInit(){this.height=150,this.labelColor=(0,T.mK)("--bs-gray-800"),this.baseColor=(0,T.mK)("--bs-"+this.color),this.lightColor=(0,T.mK)("--bs-light-"+this.color),this.chartOptions=function H(o,n,t,i){return{series:[{name:"Net Profit",data:[40,40,30,30,35,35,50]}],chart:{fontFamily:"inherit",type:"area",height:o,toolbar:{show:!1},zoom:{enabled:!1},sparkline:{enabled:!0}},plotOptions:{},legend:{show:!1},dataLabels:{enabled:!1},fill:{type:"solid",opacity:1},stroke:{curve:"smooth",show:!0,width:3,colors:[t]},xaxis:{categories:["Feb","Mar","Apr","May","Jun","Jul","Aug"],axisBorder:{show:!1},axisTicks:{show:!1},labels:{show:!1,style:{colors:n,fontSize:"12px"}},crosshairs:{show:!1,position:"front",stroke:{color:"#E4E6EF",width:1,dashArray:3}},tooltip:{enabled:!1}},yaxis:{min:0,max:60,labels:{show:!1,style:{colors:n,fontSize:"12px"}}},states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"none",value:0}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"none",value:0}}},tooltip:{style:{fontSize:"12px"},y:{formatter:function(r){return"$"+r+" thousands"}}},colors:[i],markers:{colors:[i],strokeColors:[t],strokeWidth:3}}}(this.height,this.labelColor,this.baseColor,this.lightColor)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-stats-widget4"]],viewQuery:function(t,i){if(1&t&&e.Gf(G,7),2&t){let r;e.iGM(r=e.CRH())&&(i.chartRef=r.first)}},inputs:{svgIcon:"svgIcon",color:"color",description:"description",change:"change",title:"title"},decls:12,vars:18,consts:[[1,"card-body","p-0"],[1,"d-flex","flex-stack","card-p","flex-grow-1"],["href","#",1,"text-dark","text-hover-primary","fw-bolder","fs-3"],[1,"d-flex","flex-column","text-end"],[1,"text-dark","fw-bolder","fs-2"],[1,"text-muted","fw-bold","mt-1"],[1,"statistics-widget-3-chart","card-rounded-bottom"],["chartRef",""],[3,"series","chart","xaxis","yaxis","dataLabels","stroke","legend","fill","states","tooltip","colors","markers","plotOptions"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"a",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3)(5,"span",4),e._uU(6),e.qZA(),e.TgZ(7,"span",5),e._uU(8),e.qZA()()(),e.TgZ(9,"div",6,7),e._UZ(11,"apx-chart",8),e.qZA()()),2&t&&(e.xp6(3),e.hij(" ",i.title," "),e.xp6(3),e.Oqu(i.change),e.xp6(2),e.Oqu(i.description),e.xp6(1),e.Udp("height","150px"),e.xp6(2),e.Q6J("series",i.chartOptions.series)("chart",i.chartOptions.chart)("xaxis",i.chartOptions.xaxis)("yaxis",i.chartOptions.yaxis)("dataLabels",i.chartOptions.dataLabels)("stroke",i.chartOptions.stroke)("legend",i.chartOptions.legend)("fill",i.chartOptions.fill)("states",i.chartOptions.states)("tooltip",i.chartOptions.tooltip)("colors",i.chartOptions.colors)("markers",i.chartOptions.markers)("plotOptions",i.chartOptions.plotOptions))},dependencies:[B.x],encapsulation:2}),o})();var K=l(3057);let M=(()=>{class o{constructor(t,i){this.authHttpService=t,this.router=i,this.cliente=sessionStorage.getItem("clientName")}ngOnInit(){sessionStorage.getItem("clientName")||(f().fire({text:"Se debe seleccionar primero un cliente",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok",customClass:{confirmButton:"btn btn-primary"}}),this.router.navigate(["/clients"]))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.U),e.Y36(m.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-buy"]],decls:18,vars:13,consts:[[1,"row","g-5","g-xl-8"],[1,"col-xl-3"],[1,"col-xl-6"],["color","danger",1,"card","card-xl-stretch","mb-xl-8",3,"title"],[1,"col-xl-4"],["svgIcon","assets/media/icons/duotune/general/gen055.svg","color","danger","iconColor","white","description","","routerLink","/reports/cebadero",1,"card","bg-danger","hoverable","card-xl-stretch","mb-xl-8",3,"title"],["svgIcon","assets/media/icons/duotune/general/gen028.svg","color","primary","iconColor","white","description","","routerLink","/reports/service-provider",1,"card","bg-primary","hoverable","card-xl-stretch","mb-xl-8",3,"title"],["svgIcon","assets/media/icons/duotune/general/gen035.svg","color","success","iconColor","white","description","","routerLink","/buys/view",1,"card","bg-success","hoverable","card-xl-stretch","mb-5","mb-xl-8",3,"title"],["svgIcon","assets/media/icons/duotune/arrows/arr079.svg","color","success","iconColor","white","routerLink","/dashboard","description","",1,"card","bg-dark","hoverable","card-xl-stretch","mb-5","mb-xl-8",3,"title"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"app-stats-widget4",3),e.qZA()(),e.TgZ(4,"div",0)(5,"div",4),e._UZ(6,"app-stats-widget5",5),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",4),e._UZ(9,"app-stats-widget5",6),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"div",4),e._UZ(12,"app-stats-widget5",7),e.ALo(13,"translate"),e.qZA(),e._UZ(14,"div",4),e.TgZ(15,"div",4),e._UZ(16,"app-stats-widget5",8),e.ALo(17,"translate"),e.qZA()()),2&t&&(e.xp6(3),e.MGl("title","Reportes para ",i.cliente,""),e.xp6(3),e.s9C("title",e.lcZ(7,5,"BUYS.ICONS.ADD")),e.xp6(3),e.s9C("title",e.lcZ(10,7,"BUYS.ICONS.ITEMS_PROVIDER_LIST")),e.xp6(3),e.s9C("title",e.lcZ(13,9,"BUYS.ICONS.ADD_NEW_BILL")),e.xp6(4),e.s9C("title",e.lcZ(17,11,"BUYS.ICONS.BACK")))},dependencies:[m.rH,V,K.T,Z.X$]}),o})();class q{setTimeHour(){let n="AM",t=(new Date).getHours().toString(),i=(new Date).getMinutes().toString();if(Number.parseInt(t)>11||0==Number.parseInt(t))switch(n="PM",t){case"12":t="12";break;case"13":t="01";break;case"14":t="02";break;case"15":t="03";break;case"16":t="04";break;case"17":t="05";break;case"18":t="06";break;case"19":t="07";break;case"20":t="08";break;case"21":t="09";break;case"22":t="10";break;case"23":t="11";break;case"0":t="12",n="AM"}return Number.parseInt(i)<10&&(i="0"+i),t+":"+i+" "+n}}let z=(()=>{class o{constructor(t,i,r,a){this.http=t,this.authService=i,this.router=r,this.variables=a}notAllowed(t){return 401==t.status||403==t.status}findByControlReport(t){return this.http.get(this.variables.getServiceEndpoint()+"/feedlots/get-cr/"+t,{}).pipe((0,p.K)(i=>(this.notAllowed(i),(0,c._)(i))))}saveFeedlot(t){return this.http.post(this.variables.getServiceEndpoint()+"/feedlots/save",t,{}).pipe((0,p.K)(i=>(this.notAllowed(i),(0,c._)(i))))}editFeedlot(t){return this.http.put(this.variables.getServiceEndpoint()+"/feedlots/"+t.id,t,{}).pipe((0,p.K)(i=>(this.notAllowed(i),(0,c._)(i))))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(A.eN),e.LFG(h.U),e.LFG(m.F0),e.LFG(C.E))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var U=l(9012);function j(o,n){if(1&o&&(e.TgZ(0,"option",49),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.hij("",t.name," ")}}function W(o,n){if(1&o&&(e.TgZ(0,"div",13)(1,"fieldset",14)(2,"label",20),e._uU(3,"Sucursal"),e.qZA(),e.TgZ(4,"select",48),e.YNc(5,j,2,2,"option",22),e.qZA()()()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.editing),e.xp6(4),e.Q6J("ngForOf",t.branch)}}function $(o,n){if(1&o&&(e.TgZ(0,"option",49),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("ngValue",t.id),e.xp6(1),e.hij("",t.name," ")}}function X(o,n){if(1&o&&(e.TgZ(0,"div",13)(1,"fieldset",14)(2,"label",20),e._uU(3,"Sucursal"),e.qZA(),e.TgZ(4,"select",48),e.YNc(5,$,2,2,"option",22),e.qZA()()()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.editing),e.xp6(4),e.Q6J("ngForOf",t.branch)}}function ee(o,n){if(1&o&&(e.TgZ(0,"option",49),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("ngValue",t.id),e.xp6(1),e.hij("",t.name," ")}}function te(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.save())}),e._UZ(1,"i",51),e.qZA()}}function ie(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.enableEdit())}),e._UZ(1,"i",53),e.qZA()}}function oe(o,n){if(1&o&&(e.TgZ(0,"div",54)(1,"div",55)(2,"div",56)(3,"label",20),e._uU(4,"# Cebadero"),e.qZA(),e._UZ(5,"input",57),e.qZA(),e.TgZ(6,"div",58)(7,"label",20),e._uU(8,"Consumo"),e.qZA(),e._UZ(9,"br")(10,"input",59),e.qZA(),e.TgZ(11,"div",58)(12,"label",20),e._uU(13,"Estado"),e.qZA(),e._UZ(14,"br")(15,"input",60),e.qZA(),e.TgZ(16,"div",61)(17,"label",20),e._uU(18,"Observaciones"),e.qZA(),e._UZ(19,"input",62),e.qZA()(),e._UZ(20,"div",63),e.qZA()),2&o){const t=n.index;e.xp6(1),e.s9C("formGroupName",t)}}let re=(()=>{class o{constructor(t,i,r,a,d,u,g){this.service=t,this.serviceControl=i,this.formBuilder=r,this.authHttpService=a,this.router=d,this.serviceClient=u,this.cd=g,this.functions=new q,this.edit=!1,this.editing=!1,this.isNew=!1,this.totalRegister=0,this.pageNo=0,this.pageSize=10}ngOnInit(){sessionStorage.getItem("reportId")&&sessionStorage.getItem("isNew")&&(this.loadReportForm(),this.editing=!0,this.loadData()),sessionStorage.getItem("reportId")&&!sessionStorage.getItem("isNew")&&(this.loadReportForm(),this.loadData()),sessionStorage.getItem("reportId")||(this.isNew=!0,this.editing=!0,this.loadReportForm(),this.firstStepsForNew())}loadReportForm(){this.controlReportForm=new s.cw({enabled:new s.NI(""),idClients:new s.NI(""),clientName:new s.NI(""),clientAddress:new s.NI(""),idWarehouse:new s.NI(""),createAt:new s.NI(""),startTime:new s.NI(""),endTime:new s.NI(""),total:new s.NI(""),branchIdForm:new s.NI("")}),this.form=new s.cw({fl:new s.Oe([])})}createItem(){return this.formBuilder.group({numberFeedlot:this.numberOfFeedLots+1,idControlReport:this.reportId,idWarehouse:this.idWarehouse,eats:!1,status:!0,observations:""})}addNewAddressGroup(){this.fl=this.form.get("fl"),this.service.saveFeedlot(this.createItem().value).subscribe(t=>{this.numberOfFeedLots=this.numberOfFeedLots+1,this.cd.detectChanges()}),this.crProv={id:this.reportId,total:this.numberOfFeedLots+1,startTime:this.controlReportForm.controls.startTime.value},this.serviceControl.editControlReport(this.crProv).subscribe(t=>{this.controlReportForm.patchValue({total:this.numberOfFeedLots}),this.cd.detectChanges()}),this.fl.push(this.createItem())}getFlArray(){return this.form.get("fl")}firstStepsForNew(){let t=JSON.parse(sessionStorage.getItem("client")),i=(new Date).getDay().toString();Number.parseInt(i)<10&&(i="0"+i);let r=(new Date).getMonth().toString();Number.parseInt(r)<10&&(r="0"+r),this.serviceClient.branchFindByClient(null==t?void 0:t.id).subscribe(a=>{this.branch=a,this.cd.detectChanges(),this.controlReportForm.controls.branchIdForm.valueChanges.subscribe(d=>{this.serviceClient.warehouseFindByBranchId(d.id,1,5e3).subscribe(u=>{this.warehouse=u,this.controlReportForm.patchValue({clientName:null==t?void 0:t.name,createAt:new Date,clientAddress:this.controlReportForm.controls.branchIdForm.value.province+", "+this.controlReportForm.controls.branchIdForm.value.canton+", "+this.controlReportForm.controls.branchIdForm.value.district+", "+this.controlReportForm.controls.branchIdForm.value.neighborhood+", "+this.controlReportForm.controls.branchIdForm.value.addressDetails,startTime:this.functions.setTimeHour(),enabled:!0,idClients:null==t?void 0:t.id,total:5}),this.cd.detectChanges()})})})}deleteAddressGroup(t){this.form.get("fl").removeAt(t)}rangePage(){}paginator(t){this.pageNo=t.pageIndex,this.pageSize=t.pageSize,this.rangePage()}loadData(){let r,t=JSON.parse(sessionStorage.getItem("client")),i=JSON.parse(sessionStorage.getItem("reports"));this.reportId=sessionStorage.getItem("reportId"),this.idWarehouse=null==i?void 0:i.idWarehouse,this.controlReportForm.patchValue({idClients:null==t?void 0:t.id,clientName:null==t?void 0:t.name,clientAddress:(null==t?void 0:t.province)+", "+(null==t?void 0:t.canton)+", "+(null==t?void 0:t.district)+", "+(null==t?void 0:t.neigh)}),this.controlReportForm.patchValue({idWarehouse:null==i?void 0:i.idWarehouse,createAt:null==i?void 0:i.createAt.slice(0,10),startTime:null==i?void 0:i.startTime,endTime:null==i?void 0:i.endTime,total:null==i?void 0:i.total}),this.service.findByControlReport(null==i?void 0:i.id).subscribe(a=>{this.feedlots=a,this.numberOfFeedLots=a.length;for(let d=0;d<this.numberOfFeedLots;d++)this.fl=this.form.get("fl"),this.fl.push(this.formBuilder.group({id:a[d].id,numberFeedlot:a[d].numberFeedlot,eats:a[d].eats,status:a[d].status,observations:a[d].observations})),this.cd.detectChanges();this.serviceClient.warehouseFindById(this.idWarehouse).subscribe(d=>{r=d.branchId,this.serviceClient.branchFindByClient(null==t?void 0:t.id).subscribe(u=>{this.branch=u,this.serviceClient.warehouseFindByBranchId(r,1,5e3).subscribe(g=>{this.warehouse=g,this.serviceClient.branchFindById(r).subscribe(x=>{this.controlReportForm.patchValue({branchIdForm:x.id,warehouseId:d.id}),this.cd.detectChanges()})}),this.cd.detectChanges()})})})}enableEdit(){this.editing=!0}save(){let i,t=this.controlReportForm.value;this.serviceControl.saveControlReport(t).subscribe(r=>{this.cd.detectChanges();for(let a=0;a<t.total;a++)i={idControlReport:r.ControlReport.id,idWarehouse:t.idWarehouse,numberFeedlot:a+1,type:"Cebadero",eats:!1,status:!0,observations:""},this.service.saveFeedlot(i).subscribe(d=>{this.cd.detectChanges()}),sessionStorage.setItem("reports",JSON.stringify(r.ControlReport)),sessionStorage.setItem("reportId",r.ControlReport.id),this.cd.detectChanges()}),this.edit=!1,this.cd.detectChanges(),this.router.navigate(["reports/cebadero/form"]),sessionStorage.setItem("isNew","true"),f().fire({title:"Se creo correctamente el reporte",timerProgressBar:!0,confirmButtonText:"Ok"}).then(r=>{r.isConfirmed&&(f().fire("Saved!","","success"),window.location.reload())})}saveFeedLots(){this.crProv={id:this.reportId,total:this.numberOfFeedLots,startTime:this.controlReportForm.controls.startTime.value,endTime:this.functions.setTimeHour()};for(let t=1;t<=this.numberOfFeedLots;t++)this.service.editFeedlot(this.form.controls.fl.value[t-1]).subscribe();this.serviceControl.editControlReport(this.crProv).subscribe(t=>{this.cd.detectChanges()}),sessionStorage.removeItem("isNew"),f().fire({title:"Se editaron correctamente los cebaderos",timerProgressBar:!0,confirmButtonText:"Ok"}).then(t=>{t.isConfirmed&&(f().fire("Saved!","","success"),window.location.reload())})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(z),e.Y36(w),e.Y36(s.qu),e.Y36(h.U),e.Y36(m.F0),e.Y36(U.a),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-items"]],decls:78,vars:19,consts:[[1,"card","mb-10"],[1,"card-body","d-flex","align-items-center","py-8"],[1,"d-flex","h-80px","w-80px","flex-shrink-0","flex-center","position-relative"],["src","assets/media/icons/duotune/coding/cod010.svg",1,"h-40px","me-10"],[1,"ms-6"],[1,"list-unstyled","text-gray-600","fw-bold","fs-6","p-0","m-0"],["routerLink","/reports/cebadero/",1,"btn","btn-warning","margin-left"],["data-placement","top","data-toggle","tooltip",1,"fas","fa-arrow-left"],[1,"card","mb-5","mb-xl-12"],[1,"card-body"],["id","controlReport",3,"formGroup"],[1,"d-flex","justify-content-between","align-items-start","flex-wrap","mb-2","md-12"],[1,"row","p-t-20","col-md-12"],[1,"col-md-6"],[3,"disabled"],["for","clientName",1,"form-label"],["formControlName","clientName","id","clientName","maxlength","80","type","text",1,"form-control"],["for","clientAddress",1,"form-label"],["formControlName","clientAddress","id","clientAddress","maxlength","80","type","text",1,"form-control"],["class","col-md-6",4,"ngIf"],[1,"form-label"],["formControlName","idWarehouse",1,"form-select"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-md-3"],["for","createAt",1,"form-label"],["formControlName","createAt","id","createAt","maxlength","10","type","text",1,"form-control"],["for","startTime",1,"form-label"],["formControlName","startTime","id","startTime","maxlength","80","type","text",1,"form-control"],["for","endTime",1,"form-label"],["formControlName","endTime","id","endTime","maxlength","80","type","text",1,"form-control"],["for","total",1,"form-label"],["formControlName","total","id","total","maxlength","80","type","number",1,"form-control"],[1,"row","col-md-3"],[1,"d-flex","my-4"],[1,"me-0"],["class","btn btn-success","data-kt-menu-trigger","click",3,"click",4,"ngIf"],["class","btn btn-warning","data-kt-menu-trigger","click",3,"click",4,"ngIf"],["data-kt-menu-trigger","click",1,"btn","btn-info"],[1,"bi","bi-printer-fill"],["data-kt-menu-trigger","click",1,"btn","btn-danger"],[1,"bi","bi-envelope-check-fill"],[1,"d-flex","flex-column-fluid","align-items-start","container-xxl"],[1,"content","flex-row-fluid"],[1,"card"],[3,"formGroup"],["formArrayName","fl",4,"ngFor","ngForOf"],[1,"btn","btn-light-success",3,"click"],[1,"btn","btn-light-info",3,"click"],["formControlName","branchIdForm",1,"form-select"],[3,"ngValue"],["data-kt-menu-trigger","click",1,"btn","btn-success",3,"click"],[1,"bi","bi-cloud-arrow-up-fill"],["data-kt-menu-trigger","click",1,"btn","btn-warning",3,"click"],[1,"bi","bi-pen-fill"],["formArrayName","fl"],[1,"row","p-t-20","col-md-12",3,"formGroupName"],[1,"col-md-2"],["formControlName","numberFeedlot",1,"form-control"],[1,"col-md-1"],["formControlName","eats","type","checkbox","value","",1,"form-check-input"],["formControlName","status","type","checkbox","value","",1,"form-check-input"],[1,"col-md-8"],["formControlName","observations","placeholder","Observaciones","type","text",1,"form-control","mb-2","mb-md-0"],[1,"separator","my-10"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",4)(5,"p",5),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",6),e._UZ(9,"i",7),e._uU(10," Volver "),e.qZA()()()(),e.TgZ(11,"div",8)(12,"div",9)(13,"div",9)(14,"form",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"fieldset",14)(19,"label",15),e._uU(20,"Cliente"),e.qZA(),e._UZ(21,"input",16),e.qZA()(),e.TgZ(22,"div",13)(23,"fieldset",14)(24,"label",17),e._uU(25,"Direccion"),e.qZA(),e._UZ(26,"input",18),e.qZA()(),e.YNc(27,W,6,2,"div",19),e.YNc(28,X,6,2,"div",19),e.TgZ(29,"div",13)(30,"fieldset",14)(31,"label",20),e._uU(32,"Bodega/Almac\xe9n"),e.qZA(),e.TgZ(33,"select",21),e.YNc(34,ee,2,2,"option",22),e.qZA()()(),e.TgZ(35,"div",23)(36,"fieldset",14)(37,"label",24),e._uU(38,"Fecha"),e.qZA(),e._UZ(39,"input",25),e.qZA()(),e.TgZ(40,"div",23)(41,"fieldset",14)(42,"label",26),e._uU(43,"Hora Ingreso"),e.qZA(),e._UZ(44,"input",27),e.qZA()(),e.TgZ(45,"div",23)(46,"fieldset",14)(47,"label",28),e._uU(48,"Hora Salida"),e.qZA(),e._UZ(49,"input",29),e.qZA()(),e.TgZ(50,"div",23)(51,"fieldset",14)(52,"label",30),e._uU(53,"Cebaderos"),e.qZA(),e._UZ(54,"input",31),e.qZA()()(),e.TgZ(55,"div",32)(56,"div",33)(57,"div",34),e.YNc(58,te,2,0,"button",35),e.YNc(59,ie,2,0,"button",36),e.qZA(),e.TgZ(60,"div",34)(61,"button",37),e._UZ(62,"i",38),e.qZA()(),e.TgZ(63,"div",34)(64,"button",39),e._UZ(65,"i",40),e.qZA()()()()()()()()(),e.TgZ(66,"div",41)(67,"div",42)(68,"div",43)(69,"div",9)(70,"form",44)(71,"fieldset",14),e.YNc(72,oe,21,1,"div",45),e.qZA()(),e.TgZ(73,"div")(74,"button",46),e.NdJ("click",function(){return i.saveFeedLots()}),e._uU(75,"Guardar"),e.qZA(),e.TgZ(76,"button",47),e.NdJ("click",function(){return i.addNewAddressGroup()}),e._uU(77,"Add"),e.qZA()()()()()()),2&t&&(e.xp6(6),e.hij(" ",e.lcZ(7,17,"DASHBOARD.ICONS.FEEDLOTS")," "),e.xp6(8),e.Q6J("formGroup",i.controlReportForm),e.xp6(4),e.Q6J("disabled",!i.editing),e.xp6(5),e.Q6J("disabled",!i.editing),e.xp6(4),e.Q6J("ngIf",i.isNew),e.xp6(1),e.Q6J("ngIf",!i.isNew),e.xp6(2),e.Q6J("disabled",!i.editing),e.xp6(4),e.Q6J("ngForOf",i.warehouse),e.xp6(2),e.Q6J("disabled",!i.editing),e.xp6(5),e.Q6J("disabled",!i.editing),e.xp6(5),e.Q6J("disabled",!i.editing),e.xp6(5),e.Q6J("disabled",!i.editing),e.xp6(7),e.Q6J("ngIf",i.editing),e.xp6(1),e.Q6J("ngIf",!i.editing),e.xp6(11),e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("disabled",!i.editing),e.xp6(1),e.Q6J("ngForOf",i.getFlArray().controls))},dependencies:[v.sg,v.O5,m.rH,s._Y,s.YN,s.Kr,s.Fj,s.wV,s.Wl,s.EJ,s.JJ,s.JL,s.nD,s.sg,s.u,s.x0,s.CE,Z.X$]}),o})();var P=l(89);let b=(()=>{class o{constructor(t,i,r,a){this.http=t,this.authService=i,this.router=r,this.variables=a}notAllowed(t){return 401==t.status||403==t.status}getServiceProvider(t,i,r){return this.http.get(this.variables.getServiceEndpoint()+"/service-provider/get-main-by-client/"+t+"/"+i+"/"+r,{headers:this.variables.getAuthHeader()}).pipe((0,p.K)(a=>(this.notAllowed(a),(0,c._)(a))))}getServiceProviderPestTypeDetails(t){return this.http.get(this.variables.getServiceEndpoint()+"/service-provider/get-pest-type-by-service-provider/"+t,{headers:this.variables.getAuthHeader()}).pipe((0,p.K)(i=>(this.notAllowed(i),(0,c._)(i))))}getServiceRecommendationsDetails(t){return this.http.get(this.variables.getServiceEndpoint()+"/service-provider/get-recommendations-by-service-provider/"+t,{headers:this.variables.getAuthHeader()}).pipe((0,p.K)(i=>(this.notAllowed(i),(0,c._)(i))))}getServiceDetails(t){return this.http.get(this.variables.getServiceEndpoint()+"/service-provider/get-details-by-service-provider/"+t,{headers:this.variables.getAuthHeader()}).pipe((0,p.K)(i=>(this.notAllowed(i),(0,c._)(i))))}getServiceDetailsV1(t){return this.http.get(this.variables.getServiceEndpoint()+"/service-provider/get-details-v1-by-service-provider/"+t,{headers:this.variables.getAuthHeader()}).pipe((0,p.K)(i=>(this.notAllowed(i),(0,c._)(i))))}saveServiceProvider(t){return this.http.post(this.variables.getServiceEndpoint()+"/service-provider/save-main/",t,{headers:this.variables.getAuthHeader()}).pipe((0,p.K)(i=>(this.notAllowed(i),(0,c._)(i))))}saveServiceProviderRecommendations(t){return this.http.post(this.variables.getServiceEndpoint()+"/service-provider/save-recommendations"+t,{headers:this.variables.getAuthHeader()}).pipe((0,p.K)(i=>(this.notAllowed(i),(0,c._)(i))))}saveServiceProviderDetails(t){return this.http.post(this.variables.getServiceEndpoint()+"/service-provider/save-details"+t,{headers:this.variables.getAuthHeader()}).pipe((0,p.K)(i=>(this.notAllowed(i),(0,c._)(i))))}saveServiceProviderPestTypeDetails(t){return this.http.post(this.variables.getServiceEndpoint()+"/service-provider/save-pest-type"+t,{headers:this.variables.getAuthHeader()}).pipe((0,p.K)(i=>(this.notAllowed(i),(0,c._)(i))))}saveServiceProviderDetailsV1(t){return this.http.post(this.variables.getServiceEndpoint()+"/service-provider/save-details-v1",t,{headers:this.variables.getAuthHeader()}).pipe((0,p.K)(i=>(this.notAllowed(i),(0,c._)(i))))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(A.eN),e.LFG(P.e8),e.LFG(m.F0),e.LFG(C.E))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function se(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.createNew())}),e._UZ(1,"i",29),e._uU(2," Crear "),e.qZA()}}function ne(o,n){1&o&&(e.TgZ(0,"th",24),e._uU(1,"Eliminar"),e.qZA())}function ae(o,n){1&o&&(e.TgZ(0,"td")(1,"button",33),e.NdJ("click",function(){return null}),e._UZ(2,"i",34),e.qZA()())}function de(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"slice"),e.qZA(),e.TgZ(8,"td")(9,"button",30),e.NdJ("click",function(){const a=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.clickEnterReport(a.id,a))}),e._UZ(10,"i",31),e.qZA()(),e.YNc(11,ae,3,0,"td",32),e.qZA()}if(2&o){const t=n.$implicit,i=e.oxw();e.xp6(2),e.Oqu(t.identifier),e.xp6(2),e.Oqu(t.clientName),e.xp6(2),e.Oqu(e.Dn7(7,4,t.createAt,0,10)),e.xp6(5),e.Q6J("ngIf",i.authHttpService.hasRole("ROLE_ADMIN"))}}const le=function(){return[10,50,100]};let ce=(()=>{class o{constructor(t,i,r,a){this.service=t,this.authHttpService=i,this.router=r,this.cd=a,this.tittle="Servicios Prestados",this.totalRegister=0,this.pageNo=0,this.pageSize=10}ngOnInit(){sessionStorage.removeItem("serviceReportId"),sessionStorage.removeItem("serviceReport"),sessionStorage.removeItem("isNew"),this.rangePage()}paginator(t){this.pageNo=t.pageIndex,this.pageSize=t.pageSize,this.rangePage()}rangePage(){let t=sessionStorage.getItem("clientId");this.service.getServiceProvider(t,this.pageNo+1,this.pageSize).subscribe(i=>{console.log(i),this.serviceProvider=i,this.cd.detectChanges()})}clickEnterReport(t,i){sessionStorage.setItem("serviceReportId",t),sessionStorage.setItem("serviceReport",JSON.stringify(i)),this.router.navigate(["/reports/service-provider/form"])}createNew(){sessionStorage.setItem("isNew","true"),this.router.navigate(["/reports/service-provider/form"])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b),e.Y36(h.U),e.Y36(m.F0),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["service-provider-component"]],decls:42,vars:11,consts:[[1,"card","mb-10"],[1,"card-body","d-flex","align-items-center","py-8"],[1,"d-flex","h-80px","w-80px","flex-shrink-0","flex-center","position-relative"],["src","assets/media/icons/duotune/coding/cod010.svg",1,"h-40px","me-10"],[1,"ms-6"],[1,"list-unstyled","text-gray-600","fw-bold","fs-6","p-0","m-0"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"col-1"],["routerLink","/reports",1,"btn","btn-warning","margin-left"],["data-toggle","tooltip","data-placement","top",1,"fas","fa-arrow-left"],[1,"card","card-custom"],[1,"card-header","card-header-stretch","overflow-auto"],[1,"card-header","border-0","pt-5"],[1,"card-title","align-items-start","flex-column"],[1,"card-label","fw-bolder","fs-3","mb-1"],[1,"text-muted","mt-1","fw-bold","fs-7"],[1,"card-toolbar"],["data-kt-menu-flip","top-end","data-kt-menu-placement","bottom-end","data-kt-menu-trigger","click","type","button",1,"btn","btn-sm","btn-icon","btn-color-primary","btn-active-light-primary"],[1,"svg-icon","svg-icon-2",3,"inlineSVG"],[1,"card-body","py-3"],[1,"table-responsive"],[1,"table","table-hover","table-striped"],[1,"mb-1"],[1,"mb-4"],[1,"mb-3"],["class","mb-3",4,"ngIf"],[4,"ngFor","ngForOf"],["aria-label","Select page",3,"length","pageSizeOptions","pageSize","page"],[1,"btn","btn-primary",3,"click"],["data-toggle","tooltip","data-placement","top",1,"fas","fa-plus"],["type","submit",1,"btn","btn-warning",3,"click"],["data-toggle","tooltip","data-placement","top",1,"fas","fa-edit"],[4,"ngIf"],["type","button",1,"btn","btn-danger",3,"click"],["data-toggle","tooltip","data-placement","top",1,"fas","fa-trash"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",4)(5,"p",5),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.YNc(8,se,3,0,"button",6),e._UZ(9,"a",7),e.TgZ(10,"button",8),e._UZ(11,"i",9),e._uU(12," Volver "),e.qZA()()()(),e.TgZ(13,"div",10)(14,"div",11)(15,"div",12)(16,"h3",13)(17,"span",14),e._uU(18,"Listado de Cebaderos"),e.qZA(),e.TgZ(19,"span",15),e._uU(20,"Accesibles por este cliente"),e.qZA()(),e.TgZ(21,"div",16)(22,"button",17),e._UZ(23,"span",18),e.qZA(),e._UZ(24,"app-dropdown-menu2"),e.qZA()(),e.TgZ(25,"div",19)(26,"div",20)(27,"table",21)(28,"thead")(29,"tr")(30,"th",22),e._uU(31,"C\xf3digo"),e.qZA(),e.TgZ(32,"th",23),e._uU(33,"Cliente"),e.qZA(),e.TgZ(34,"th",23),e._uU(35,"Fecha"),e.qZA(),e.TgZ(36,"th",24),e._uU(37,"Editar"),e.qZA(),e.YNc(38,ne,2,0,"th",25),e.qZA()(),e.TgZ(39,"tbody"),e.YNc(40,de,12,8,"tr",26),e.qZA()(),e.TgZ(41,"mat-paginator",27),e.NdJ("page",function(a){return i.paginator(a)}),e.qZA()()()()()),2&t&&(e.xp6(6),e.hij(" ",e.lcZ(7,8,"REPORTS.SERVICE.NAME")," "),e.xp6(2),e.Q6J("ngIf",i.authHttpService.hasRole("ROLE_ADMIN")),e.xp6(15),e.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen024.svg"),e.xp6(15),e.Q6J("ngIf",i.authHttpService.hasRole("ROLE_ADMIN")),e.xp6(2),e.Q6J("ngForOf",i.serviceProvider),e.xp6(1),e.Q6J("length",i.totalRegister)("pageSizeOptions",e.DdM(10,le))("pageSize",i.pageSize))},dependencies:[v.sg,v.O5,m.rH,F.NW,_.d$,y.w,v.OU,Z.X$]}),o})();function pe(o,n){if(1&o&&(e.TgZ(0,"option",51),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.hij("",t.name," ")}}function me(o,n){if(1&o&&(e.TgZ(0,"div",13)(1,"fieldset",14)(2,"label",20),e._uU(3,"Sucursal"),e.qZA(),e.TgZ(4,"select",50),e.YNc(5,pe,2,2,"option",22),e.qZA()()()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.editing),e.xp6(4),e.Q6J("ngForOf",t.branch)}}function ue(o,n){if(1&o&&(e.TgZ(0,"option",51),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("ngValue",t.id),e.xp6(1),e.hij("",t.name," ")}}function ve(o,n){if(1&o&&(e.TgZ(0,"div",13)(1,"fieldset",14)(2,"label",20),e._uU(3,"Sucursal"),e.qZA(),e.TgZ(4,"select",50),e.YNc(5,ue,2,2,"option",22),e.qZA()()()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.editing),e.xp6(4),e.Q6J("ngForOf",t.branch)}}function ge(o,n){if(1&o&&(e.TgZ(0,"option",51),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("ngValue",t.id),e.xp6(1),e.hij("",t.name," ")}}function he(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.save())}),e._UZ(1,"i",53),e.qZA()}}function fe(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",54),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.enableEdit())}),e._UZ(1,"i",55),e.qZA()}}let be=(()=>{class o{constructor(t,i,r,a,d,u,g){this.providerService=t,this.formBuilder=i,this.serviceControl=r,this.authHttpService=a,this.router=d,this.serviceClient=u,this.cd=g,this.functions=new q,this.edit=!1,this.editing=!1,this.isNew=!1,this.totalRegister=0,this.pageNo=0,this.pageSize=10}ngOnInit(){console.log(this.functions.setTimeHour()),sessionStorage.getItem("serviceReportId")&&sessionStorage.getItem("isNew"),sessionStorage.getItem("serviceReportId")&&!sessionStorage.getItem("isNew")&&(this.loadReportForm(),this.loadData()),sessionStorage.getItem("serviceReportId")||(this.loadReportForm(),this.firstSteps(),this.generateIdentifier(),this.editing=!0,this.isNew=!0)}loadReportForm(){this.serviceProviderForm=new s.cw({enabled:new s.NI(""),clientId:new s.NI(sessionStorage.getItem("clientId")),clientName:new s.NI(""),clientAddress:new s.NI(""),warehouseId:new s.NI(""),createAt:new s.NI(""),startTime:new s.NI(""),endTime:new s.NI(""),fumigationFrequency:new s.NI(""),identifier:new s.NI(""),branchIdForm:new s.NI("")})}generateIdentifier(){let i,t=sessionStorage.getItem("clientId");this.serviceControl.getServiceProvider(t,this.pageNo+1,100).subscribe(r=>{var a,d;if(console.log(r),r.length>0){for(let g=0;g<r.length;g++)this.identifierGenerate=r[g].identifier,console.log(this.identifierGenerate,"el ultimo"),i=null===(a=this.identifierGenerate)||void 0===a?void 0:a.split("-",3),console.log(i,"splited");let u=Number.parseInt(i[2])+1;this.serviceProviderForm.patchValue({identifier:i[0]+"-"+i[1]+"-"+u.toString()}),this.cd.detectChanges()}else{let u=null===(d=sessionStorage.getItem("clientName"))||void 0===d?void 0:d.toString();i="SP-"+u.substring(0,3)+"-1",this.serviceProviderForm.patchValue({identifier:i}),this.cd.detectChanges()}})}loadData(){let r,t=JSON.parse(sessionStorage.getItem("client")),i=JSON.parse(sessionStorage.getItem("serviceReport"));this.serviceProviderId=sessionStorage.getItem("serviceReportId"),this.warehouseId=null==i?void 0:i.warehouseId,this.serviceProviderForm.patchValue({warehouseId:null==i?void 0:i.warehouseId,clientId:null==t?void 0:t.id,clientName:null==t?void 0:t.name,clientAddress:(null==t?void 0:t.province)+", "+(null==t?void 0:t.canton)+", "+(null==t?void 0:t.district)+", "+(null==t?void 0:t.neigh)}),this.serviceProviderForm.patchValue({idWarehouse:null==i?void 0:i.warehouseId,createAt:null==i?void 0:i.createAt.slice(0,10),startTime:null==i?void 0:i.startTime,endTime:null==i?void 0:i.endTime,identifier:null==i?void 0:i.identifier}),this.serviceClient.warehouseFindById(this.warehouseId).subscribe(a=>{r=a.branchId,this.serviceClient.branchFindByClient(null==t?void 0:t.id).subscribe(d=>{this.branch=d,this.serviceClient.warehouseFindByBranchId(r,1,5e3).subscribe(u=>{this.warehouse=u,this.serviceClient.branchFindById(r).subscribe(g=>{this.serviceProviderForm.patchValue({branchIdForm:g.id,warehouseId:a.id}),this.cd.detectChanges()})}),this.cd.detectChanges()})})}firstSteps(){let t=JSON.parse(sessionStorage.getItem("client")),i=(new Date).getDay().toString();Number.parseInt(i)<10&&(i="0"+i);let r=(new Date).getMonth().toString();Number.parseInt(r)<10&&(r="0"+r),this.serviceClient.branchFindByClient(null==t?void 0:t.id).subscribe(a=>{console.log(a," branch"),this.branch=a,this.cd.detectChanges(),this.serviceProviderForm.controls.branchIdForm.valueChanges.subscribe(d=>{this.serviceClient.warehouseFindByBranchId(d.id,1,5e3).subscribe(u=>{this.warehouse=u,console.log(this.warehouse),this.serviceProviderForm.patchValue({clientName:null==t?void 0:t.name,createAt:new Date,clientAddress:this.serviceProviderForm.controls.branchIdForm.value.province+", "+this.serviceProviderForm.controls.branchIdForm.value.canton+", "+this.serviceProviderForm.controls.branchIdForm.value.district+", "+this.serviceProviderForm.controls.branchIdForm.value.neighborhood+", "+this.serviceProviderForm.controls.branchIdForm.value.addressDetails,startTime:this.functions.setTimeHour(),enabled:!0,idClients:null==t?void 0:t.id}),this.cd.detectChanges()})})})}save(){this.cd.detectChanges(),this.serviceControl.saveServiceProvider(this.serviceProviderForm.value).subscribe(t=>{console.log(t.ServiceProvider,"res"),sessionStorage.setItem("serviceReportId",t.ServiceProvider.id),sessionStorage.setItem("serviceReport",JSON.stringify(t.ServiceProvider)),sessionStorage.removeItem("isNew"),this.cd.detectChanges(),f().fire("Creado con \xe9xito,","","success"),this.cd.detectChanges(),window.location.reload()})}enableEdit(){}session(t){}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b),e.Y36(s.qu),e.Y36(b),e.Y36(h.U),e.Y36(m.F0),e.Y36(U.a),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-items"]],decls:85,vars:25,consts:[[1,"card","mb-10"],[1,"card-body","d-flex","align-items-center","py-8"],[1,"d-flex","h-80px","w-80px","flex-shrink-0","flex-center","position-relative"],["src","assets/media/icons/duotune/coding/cod010.svg",1,"h-40px","me-10"],[1,"ms-6"],[1,"list-unstyled","text-gray-600","fw-bold","fs-6","p-0","m-0"],["routerLink","/reports/service-provider/",1,"btn","btn-warning","margin-left"],["data-placement","top","data-toggle","tooltip",1,"fas","fa-arrow-left"],[1,"card","mb-5","mb-xl-12"],[1,"card-body"],["id","serviceProviderForm",3,"formGroup"],[1,"d-flex","justify-content-between","align-items-start","flex-wrap","mb-2","md-12"],[1,"row","p-t-20","col-md-12"],[1,"col-md-6"],[3,"disabled"],["for","clientName",1,"form-label"],["formControlName","clientName","id","clientName","maxlength","80","type","text",1,"form-control"],["for","clientAddress",1,"form-label"],["formControlName","clientAddress","id","clientAddress","maxlength","80","type","text",1,"form-control"],["class","col-md-6",4,"ngIf"],[1,"form-label"],["formControlName","warehouseId",1,"form-select"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-md-3"],["for","createAt",1,"form-label"],["formControlName","createAt","id","createAt","maxlength","10","type","text",1,"form-control"],["for","startTime",1,"form-label"],["formControlName","startTime","id","startTime","maxlength","80","type","text",1,"form-control"],["for","endTime",1,"form-label"],["formControlName","endTime","id","endTime","maxlength","80","type","text",1,"form-control"],["for","identifier",1,"form-label"],["formControlName","identifier","id","identifier","maxlength","80","type","text",1,"form-control"],[1,"row","col-md-3"],[1,"d-flex","my-4"],[1,"me-0"],["class","btn btn-success","data-kt-menu-trigger","click",3,"click",4,"ngIf"],["class","btn btn-warning","data-kt-menu-trigger","click",3,"click",4,"ngIf"],["data-kt-menu-trigger","click",1,"btn","btn-info"],[1,"bi","bi-printer-fill"],["data-kt-menu-trigger","click",1,"btn","btn-danger"],[1,"bi","bi-envelope-check-fill"],[1,"d-flex","overflow-auto","h-55px"],[1,"nav","nav-stretch","nav-line-tabs","nav-line-tabs-2x","border-transparent","fs-5","fw-bolder","flex-nowrap"],[1,"nav-item"],["routerLink","/reports/service-provider/form/details","routerLinkActive","active",1,"nav-link","text-active-primary","me-6",3,"click"],["routerLink","/reports/service-provider/form/pest","routerLinkActive","active",1,"nav-link","text-active-primary","me-6",3,"click"],["routerLink","/reports/service-provider/form/recommendations","routerLinkActive","active",1,"nav-link","text-active-primary","me-6",3,"click"],[1,"d-flex","flex-column-fluid","align-items-start","container-xxl"],[1,"content","flex-row-fluid"],[1,"card"],["formControlName","branchIdForm",1,"form-select"],[3,"ngValue"],["data-kt-menu-trigger","click",1,"btn","btn-success",3,"click"],[1,"bi","bi-cloud-arrow-up-fill"],["data-kt-menu-trigger","click",1,"btn","btn-warning",3,"click"],[1,"bi","bi-pen-fill"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",4)(5,"p",5),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",6),e._UZ(9,"i",7),e._uU(10," Volver "),e.qZA()()()(),e.TgZ(11,"div",8)(12,"div",9)(13,"div",9)(14,"form",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"fieldset",14)(19,"label",15),e._uU(20,"Cliente"),e.qZA(),e._UZ(21,"input",16),e.qZA()(),e.TgZ(22,"div",13)(23,"fieldset",14)(24,"label",17),e._uU(25,"Direccion"),e.qZA(),e._UZ(26,"input",18),e.qZA()(),e.YNc(27,me,6,2,"div",19),e.YNc(28,ve,6,2,"div",19),e.TgZ(29,"div",13)(30,"fieldset",14)(31,"label",20),e._uU(32,"Bodega/Almac\xe9n"),e.qZA(),e.TgZ(33,"select",21),e.YNc(34,ge,2,2,"option",22),e.qZA()()(),e.TgZ(35,"div",23)(36,"fieldset",14)(37,"label",24),e._uU(38,"Fecha"),e.qZA(),e._UZ(39,"input",25),e.qZA()(),e.TgZ(40,"div",23)(41,"fieldset",14)(42,"label",26),e._uU(43,"Hora Ingreso"),e.qZA(),e._UZ(44,"input",27),e.qZA()(),e.TgZ(45,"div",23)(46,"fieldset",14)(47,"label",28),e._uU(48,"Hora Salida"),e.qZA(),e._UZ(49,"input",29),e.qZA()(),e.TgZ(50,"div",23)(51,"fieldset",14)(52,"label",30),e._uU(53,"Identificador"),e.qZA(),e._UZ(54,"input",31),e.qZA()()(),e.TgZ(55,"div",32)(56,"div",33)(57,"div",34),e.YNc(58,he,2,0,"button",35),e.YNc(59,fe,2,0,"button",36),e.qZA(),e.TgZ(60,"div",34)(61,"button",37),e._UZ(62,"i",38),e.qZA()(),e.TgZ(63,"div",34)(64,"button",39),e._UZ(65,"i",40),e.qZA()()()()()(),e.TgZ(66,"div",41)(67,"ul",42)(68,"li",43)(69,"a",44),e.NdJ("click",function(){return i.session("detail")}),e._uU(70),e.ALo(71,"translate"),e.qZA()(),e.TgZ(72,"li",43)(73,"a",45),e.NdJ("click",function(){return i.session("recommendations")}),e._uU(74),e.ALo(75,"translate"),e.qZA()(),e.TgZ(76,"li",43)(77,"a",46),e.NdJ("click",function(){return i.session("pestType")}),e._uU(78),e.ALo(79,"translate"),e.qZA()()()()()()(),e.TgZ(80,"div",47)(81,"div",48)(82,"div",49)(83,"div",9),e._UZ(84,"router-outlet"),e.qZA()()()()),2&t&&(e.xp6(6),e.hij(" ",e.lcZ(7,17,"REPORTS.SERVICE.NAME")," "),e.xp6(8),e.Q6J("formGroup",i.serviceProviderForm),e.xp6(4),e.Q6J("disabled",!i.editing),e.xp6(5),e.Q6J("disabled",!i.editing),e.xp6(4),e.Q6J("ngIf",i.isNew),e.xp6(1),e.Q6J("ngIf",!i.isNew),e.xp6(2),e.Q6J("disabled",!i.editing),e.xp6(4),e.Q6J("ngForOf",i.warehouse),e.xp6(2),e.Q6J("disabled",!i.editing),e.xp6(5),e.Q6J("disabled",!i.editing),e.xp6(5),e.Q6J("disabled",!i.editing),e.xp6(5),e.Q6J("disabled",!i.editing),e.xp6(7),e.Q6J("ngIf",i.editing),e.xp6(1),e.Q6J("ngIf",!i.editing),e.xp6(11),e.hij(" ",e.lcZ(71,19,"REPORTS.SERVICE.DETAILS")," "),e.xp6(4),e.hij(" ",e.lcZ(75,21,"REPORTS.SERVICE.PEST")," "),e.xp6(4),e.hij(" ",e.lcZ(79,23,"REPORTS.SERVICE.RECOMMENDATIONS")," "))},dependencies:[v.sg,v.O5,m.lC,m.rH,m.yS,m.Od,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.nD,s.sg,s.u,Z.X$]}),o})();var Ze=l(6798);let I=(()=>{class o{constructor(t,i,r,a){this.http=t,this.authService=i,this.router=r,this.variables=a}notAllowed(t){return 401==t.status||403==t.status}getPestType(){return this.http.get(this.variables.getServiceEndpoint()+"/extras/get-pest",{}).pipe((0,p.K)(t=>(this.notAllowed(t),(0,c._)(t))))}getRecommendations(){return this.http.get(this.variables.getServiceEndpoint()+"/extras/get-recommendation",{}).pipe((0,p.K)(t=>(this.notAllowed(t),(0,c._)(t))))}findRecommendationsByType(t){return this.http.get(this.variables.getServiceEndpoint()+"/extras/get-recommendation-type/"+t,{}).pipe((0,p.K)(i=>(this.notAllowed(i),(0,c._)(i))))}findRecommendationsById(t){return this.http.get(this.variables.getServiceEndpoint()+"/extras/get-recommendation/"+t,{}).pipe((0,p.K)(i=>(this.notAllowed(i),(0,c._)(i))))}saveRecommendations(t){return this.http.post(this.variables.getServiceEndpoint()+"/extras/save-recommendations",t,{}).pipe((0,p.K)(i=>(this.notAllowed(i),(0,c._)(i))))}savePestType(t){return this.http.post(this.variables.getServiceEndpoint()+"/extras/save-pest",t,{}).pipe((0,p.K)(i=>(this.notAllowed(i),(0,c._)(i))))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(A.eN),e.LFG(P.e8),e.LFG(m.F0),e.LFG(C.E))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var _e=l(9531);function Ae(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addNewDetail())}),e._UZ(1,"i",12),e._uU(2," Crear "),e.qZA()}}function Ce(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.saveNewDetail())}),e._UZ(1,"i",14),e._uU(2," Guardar "),e.qZA()}}function Fe(o,n){if(1&o&&(e.TgZ(0,"option",21),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.hij(" ",t.name," ")}}function Te(o,n){if(1&o&&(e.TgZ(0,"option",21),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.hij(" ",t.name," ")}}function Ie(o,n){if(1&o&&(e.TgZ(0,"form",15)(1,"div",16)(2,"div",17)(3,"div",18)(4,"label",19),e._uU(5,"Producto"),e.qZA(),e.TgZ(6,"select",20)(7,"option",21),e._uU(8,"Seleccione un Producto"),e.qZA(),e.YNc(9,Fe,2,2,"option",22),e.qZA()()(),e.TgZ(10,"div",17)(11,"div",18)(12,"label",23),e._uU(13,"Ingrediente Activo"),e.qZA(),e._UZ(14,"input",24),e.qZA()(),e.TgZ(15,"div",25)(16,"div",18)(17,"label",26),e._uU(18,"Dosis"),e.qZA(),e._UZ(19,"input",27),e.qZA()(),e.TgZ(20,"div",25)(21,"div",18)(22,"label",28),e._uU(23,"Permiso Sanitario"),e.qZA(),e._UZ(24,"input",29),e.qZA()(),e.TgZ(25,"div",25)(26,"div",18)(27,"label",30),e._uU(28,"Tiempo de Reingreso"),e.qZA(),e._UZ(29,"input",31),e.qZA()(),e.TgZ(30,"div",25)(31,"div",18)(32,"label",32),e._uU(33,"Etiqueta"),e.qZA(),e._UZ(34,"input",33),e.qZA()(),e.TgZ(35,"div",34)(36,"div",18)(37,"label",35),e._uU(38,"Etiqueta"),e.qZA(),e._UZ(39,"input",36),e.qZA()(),e.TgZ(40,"div",17)(41,"div",18)(42,"label",37),e._uU(43,"Equipo"),e.qZA(),e.TgZ(44,"select",38)(45,"option",21),e._uU(46,"Seleccione el equipo utilizado"),e.qZA(),e.YNc(47,Te,2,2,"option",22),e.qZA()()(),e.TgZ(48,"div",17)(49,"div",18)(50,"label",39),e._uU(51,"Tipo de aplicaci\xf3n"),e.qZA(),e._UZ(52,"input",40),e.qZA()()()()),2&o){const t=e.oxw();e.Q6J("formGroup",t.detailsForm),e.xp6(7),e.Q6J("ngValue",null),e.xp6(2),e.Q6J("ngForOf",t.product),e.xp6(25),e.s9C("value",t.labelColor),e.xp6(11),e.Q6J("ngValue",null),e.xp6(2),e.Q6J("ngForOf",t.equipment)}}function xe(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"a",41),e._uU(3),e.qZA(),e.TgZ(4,"span",42),e._uU(5),e.qZA()(),e.TgZ(6,"td")(7,"a",41),e._uU(8),e.qZA(),e.TgZ(9,"span",42),e._uU(10),e.qZA()(),e.TgZ(11,"td")(12,"a",41),e._uU(13),e.qZA(),e.TgZ(14,"span",42),e._uU(15),e.qZA()(),e.TgZ(16,"td",43)(17,"a",44),e.NdJ("click",function(){const a=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.clickEditDetail(a))}),e._UZ(18,"span",45),e.qZA(),e.TgZ(19,"a",46),e._UZ(20,"span",47),e.qZA()()()}if(2&o){const t=n.$implicit;e.xp6(3),e.hij(" ",t.products.name," "),e.xp6(2),e.hij(" ",t.products.sanitaryPermission," "),e.xp6(3),e.hij(" ",t," aqui va el ingrediente activo "),e.xp6(2),e.hij(" ",t.products.dose," "),e.xp6(3),e.hij(" ",t.equipment.name," "),e.xp6(2),e.hij(" ",t.equipment.type," "),e.xp6(3),e.Q6J("inlineSVG","./assets/media/icons/duotune/art/art005.svg"),e.xp6(2),e.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen027.svg")}}let Se=(()=>{class o{constructor(t,i,r,a,d,u,g,x){this.providerService=t,this.serviceEquipment=i,this.extraService=r,this.productsService=a,this.formBuilder=d,this.authHttpService=u,this.router=g,this.cd=x,this.editing=!1,this.addNewDetailProduct=!1}ngOnInit(){this.serviceProviderId=sessionStorage.getItem("serviceReportId"),console.log(this.serviceProviderId,"serviceProviderId"),sessionStorage.getItem("serviceReportId")&&!sessionStorage.getItem("isNew")&&(this.loadForm(),this.loadEquipment(),this.loadData(),this.loadProduct(),this.editing=!0),sessionStorage.getItem("serviceReportId")||(console.log("es uno nuevo "),this.loadForm())}loadEquipment(){this.serviceEquipment.listAll().subscribe(t=>{this.equipment=t,this.cd.detectChanges()})}loadData(){this.providerService.getServiceDetailsV1(this.serviceProviderId).subscribe(t=>{this.productsService.listAll(1,200).subscribe(i=>{console.log(t,"listDetails"),this.details=t,console.log(i,"los productos"),this.product=i,this.cd.detectChanges()})}),this.cd.detectChanges()}loadForm(){this.detailsForm=new s.cw({id:new s.NI(""),products:new s.NI(""),equipment:new s.NI(""),serviceProviderId:new s.NI(""),timeOff:new s.NI(""),activeIngredient:new s.NI({value:"",disabled:!0}),dose:new s.NI({value:"",disabled:!0}),sanitaryPermission:new s.NI({value:"",disabled:!0}),labelColor:new s.NI({value:"",disabled:!0}),applicationType:new s.NI({value:"",disabled:!0})})}clickEditDetail(t){}addNewDetail(){this.addNewDetailProduct=!0,this.detailsForm.patchValue({serviceProviderId:"",products:"",equipment:"",timeOff:"",activeIngredient:"",dose:"",sanitaryPermission:"",labelColor:"",applicationType:""})}loadProduct(){this.detailsForm.controls.products.valueChanges.subscribe(t=>{console.log(t,"value"),this.detailsForm.patchValue({activeIngredient:t.activeingredient,dose:t.dose,sanitaryPermission:t.sanitaryPermission}),this.labelColor=t.labelColor}),this.detailsForm.controls.equipment.valueChanges.subscribe(t=>{console.log(t,"value"),this.detailsForm.patchValue({applicationType:t.type,serviceProviderId:this.serviceProviderId})})}saveNewDetail(){this.providerService.saveServiceProviderDetailsV1(this.detailsForm.value).subscribe(t=>{console.log(t,"res"),this.loadData(),f().fire("Guardado","Se guardo correctamente","success"),this.addNewDetailProduct=!1}),this.loadData()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b),e.Y36(Ze.Q),e.Y36(I),e.Y36(_e.s),e.Y36(s.qu),e.Y36(h.U),e.Y36(m.F0),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["service-provider"]],decls:20,vars:5,consts:[[3,"hidden"],["class","btn btn-info margin-left",3,"click",4,"ngIf"],["class","btn btn-success margin-left",3,"click",4,"ngIf"],[3,"formGroup",4,"ngIf"],[1,"card-body","py-3"],[1,"table-responsive"],[1,"table","table-row-dashed","table-striped","table-row-gray-300","align-middle","gs-0","gy-4"],[1,"fw-bolder","text-muted"],[1,"mb-1"],[1,"mb-1","text-end"],[4,"ngFor","ngForOf"],[1,"btn","btn-info","margin-left",3,"click"],["data-placement","top","data-toggle","tooltip",1,"fas","fa-plus"],[1,"btn","btn-success","margin-left",3,"click"],["data-placement","top","data-toggle","tooltip",1,"fas","fa-save"],[3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["for","products"],["id","products","formControlName","products",1,"form-control"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["for","email"],["formControlName","activeIngredient","id","email","placeholder","Ingrediente Activo","type","text",1,"form-control"],[1,"col-md-3"],["for","dose"],["formControlName","dose","id","dose","placeholder","Dosis","type","text",1,"form-control"],["for","sanitaryPermission"],["formControlName","sanitaryPermission","id","sanitaryPermission","placeholder","Permiso Sanitario","type","text",1,"form-control"],["for","timeOff"],["formControlName","timeOff","id","timeOff","placeholder","Reingreso","type","text",1,"form-control"],["for","labelColor"],["formControlName","labelColor","id","labelColor","placeholder","Reingreso","type","color",1,"form-control",3,"value"],["hidden","",1,"col-md-3"],["for","serviceProviderId"],["formControlName","serviceProviderId","id","serviceProviderId","placeholder","service provider","type","text",1,"form-control"],["for","equipment"],["id","equipment","formControlName","equipment",1,"form-control"],["for","applicationType"],["formControlName","applicationType","id","applicationType","placeholder","Aplicacion","type","text",1,"form-control"],[1,"text-dark","fw-bolder","text-hover-primary","d-block","fs-6"],[1,"text-muted","fw-bold","text-muted","d-block","fs-7"],[1,"text-end"],[1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm","me-1",3,"click"],[1,"svg-icon","svg-icon-3","svg-icon-warning",3,"inlineSVG"],["href","#",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm"],[1,"svg-icon","svg-icon-3","svg-icon-danger",3,"inlineSVG"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div"),e.YNc(2,Ae,3,0,"button",1),e.YNc(3,Ce,3,0,"button",2),e.qZA(),e.YNc(4,Ie,53,6,"form",3),e.TgZ(5,"div",4)(6,"div",5)(7,"table",6)(8,"thead")(9,"tr",7)(10,"th",8),e._uU(11,"Info"),e.qZA(),e.TgZ(12,"th",8),e._uU(13,"Producto"),e.qZA(),e.TgZ(14,"th",8),e._uU(15,"Aplicaci\xf3n"),e.qZA(),e.TgZ(16,"th",9),e._uU(17,"Acciones"),e.qZA()()(),e.TgZ(18,"tbody"),e.YNc(19,xe,21,8,"tr",10),e.qZA()()()()()),2&t&&(e.Q6J("hidden",!i.editing),e.xp6(2),e.Q6J("ngIf",!i.addNewDetailProduct),e.xp6(1),e.Q6J("ngIf",i.addNewDetailProduct),e.xp6(1),e.Q6J("ngIf",i.addNewDetailProduct),e.xp6(15),e.Q6J("ngForOf",i.details))},dependencies:[v.sg,v.O5,_.d$,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.sg,s.u],encapsulation:2}),o})();function we(o,n){if(1&o&&(e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"fieldset",5)(4,"label",6),e._uU(5,"Codigo"),e.qZA(),e._UZ(6,"input",7),e.qZA()(),e.TgZ(7,"div",8)(8,"fieldset",5)(9,"label",6),e._uU(10,"Nombre"),e.qZA(),e._UZ(11,"input",9),e.qZA()(),e.TgZ(12,"div",10)(13,"fieldset",5)(14,"label",6),e._uU(15,"Aplica"),e.qZA(),e._UZ(16,"br")(17,"input",11),e.qZA()(),e.TgZ(18,"div",12)(19,"fieldset",5)(20,"label",6),e._uU(21,"Nivel"),e.qZA(),e._UZ(22,"br"),e.TgZ(23,"select",13)(24,"option",14),e._uU(25,"No Aplica"),e.qZA(),e.TgZ(26,"option",14),e._uU(27,"Bajo"),e.qZA(),e.TgZ(28,"option",14),e._uU(29,"Medio"),e.qZA(),e.TgZ(30,"option",14),e._uU(31,"Alto"),e.qZA()()()(),e._UZ(32,"div",15),e.qZA()()),2&o){const t=n.index,i=e.oxw();e.xp6(1),e.s9C("formGroupName",t),e.xp6(2),e.Q6J("disabled",!0),e.xp6(5),e.Q6J("disabled",!0),e.xp6(5),e.Q6J("disabled",!i.editing),e.xp6(5),e.Q6J("hidden",i.theLastOne),e.xp6(1),e.Q6J("disabled",!i.editing),e.xp6(5),e.Q6J("ngValue",0),e.xp6(2),e.Q6J("ngValue",1),e.xp6(2),e.Q6J("ngValue",2),e.xp6(2),e.Q6J("ngValue",3)}}let ye=(()=>{class o{constructor(t,i,r,a,d,u){this.providerService=t,this.authHttpService=i,this.extraService=r,this.formBuilder=a,this.router=d,this.cd=u,this.editing=!1,this.false=!1,this.theLastOne=!1}ngOnInit(){sessionStorage.getItem("serviceReportId")&&sessionStorage.getItem("isNew"),sessionStorage.getItem("serviceReportId")&&!sessionStorage.getItem("isNew")&&(this.loadForm(),this.loadData()),sessionStorage.getItem("serviceReportId")||(this.editing=!0,this.loadForm(),this.firstSteps())}loadForm(){this.pestTypeListForm=new s.cw({serviceProviderPestTypeDetailForm:new s.Oe([])})}loadData(){this.serviceProviderId=sessionStorage.getItem("serviceReportId"),this.providerService.getServiceProviderPestTypeDetails(this.serviceProviderId).subscribe(t=>{this.extraService.getPestType().subscribe(i=>{this.serviceProviderPestTypeDetail=t,this.pestList=i;for(let r=0;r<t.length;r++)this.serviceProviderPestTypeDetailForm=this.pestTypeListForm.get("serviceProviderPestTypeDetailForm"),this.serviceProviderPestTypeDetailForm.push(this.formBuilder.group({serviceProviderId:t[r].serviceProviderId,pestTypeId:i[r].pestTypeId,apply:t[r].apply,level:t[r].level,name:i[r].name})),this.cd.detectChanges()})})}getArray(){return this.pestTypeListForm.get("serviceProviderPestTypeDetailForm")}firstSteps(){this.extraService.getPestType().subscribe(t=>{for(let i=0;i<t.length;i++)this.serviceProviderPestTypeDetailForm=this.pestTypeListForm.get("serviceProviderPestTypeDetailForm"),this.serviceProviderPestTypeDetailForm.push(this.formBuilder.group({serviceProviderId:[],pestTypeId:t[i].pestTypeId,apply:!1,level:0,name:t[i].name})),this.cd.detectChanges()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b),e.Y36(h.U),e.Y36(I),e.Y36(s.qu),e.Y36(m.F0),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["service-provider"]],decls:2,vars:2,consts:[[3,"formGroup"],["formArrayName","serviceProviderPestTypeDetailForm",4,"ngFor","ngForOf"],["formArrayName","serviceProviderPestTypeDetailForm"],[1,"row","p-t-20","col-md-12",3,"formGroupName"],["hidden","",1,"col-md-2"],[3,"disabled"],[1,"form-label"],["formControlName","pestTypeId",1,"form-control"],[1,"col-md-5"],["formControlName","name",1,"form-control"],[1,"col-md-1"],["formControlName","apply","type","checkbox","value","",1,"form-check-input"],[1,"col-md-4",3,"hidden"],["formControlName","level",1,"form-select"],[3,"ngValue"],[1,"separator","my-10"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0),e.YNc(1,we,33,10,"div",1),e.qZA()),2&t&&(e.Q6J("formGroup",i.pestTypeListForm),e.xp6(1),e.Q6J("ngForOf",i.getArray().controls))},dependencies:[v.sg,s._Y,s.YN,s.Kr,s.Fj,s.Wl,s.EJ,s.JJ,s.JL,s.sg,s.u,s.x0,s.CE],encapsulation:2}),o})();function Ne(o,n){if(1&o&&(e.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"label",8),e._uU(4,"Codigo"),e.qZA(),e._UZ(5,"input",9),e.qZA(),e.TgZ(6,"div",10)(7,"fieldset",11)(8,"label",8),e._uU(9,"Aplica"),e.qZA(),e._UZ(10,"br")(11,"input",12),e.qZA()(),e.TgZ(12,"div",13)(13,"fieldset",11)(14,"label",8),e._uU(15,"Nombre"),e.qZA(),e._UZ(16,"input",14),e.qZA()()()()),2&o){const t=n.index,i=e.oxw();e.xp6(1),e.s9C("formGroupName",t),e.xp6(6),e.Q6J("disabled",!i.editing),e.xp6(6),e.Q6J("disabled",!0)}}function qe(o,n){if(1&o&&(e.TgZ(0,"div",15)(1,"div",6)(2,"div",7)(3,"label",8),e._uU(4,"Codigo"),e.qZA(),e._UZ(5,"input",9),e.qZA(),e.TgZ(6,"div",10)(7,"fieldset",11)(8,"label",8),e._uU(9,"Aplica"),e.qZA(),e._UZ(10,"br")(11,"input",12),e.qZA()(),e.TgZ(12,"div",13)(13,"fieldset",11)(14,"label",8),e._uU(15,"Nombre"),e.qZA(),e._UZ(16,"input",14),e.qZA()()()()),2&o){const t=n.index,i=e.oxw();e.xp6(1),e.s9C("formGroupName",t),e.xp6(6),e.Q6J("disabled",!i.editing),e.xp6(6),e.Q6J("disabled",!0)}}function Ue(o,n){if(1&o&&(e.TgZ(0,"div",16)(1,"div",6)(2,"div",7)(3,"label",8),e._uU(4,"Codigo"),e.qZA(),e._UZ(5,"input",9),e.qZA(),e.TgZ(6,"div",10)(7,"fieldset",11)(8,"label",8),e._uU(9,"Aplica"),e.qZA(),e._UZ(10,"br")(11,"input",12),e.qZA()(),e.TgZ(12,"div",13)(13,"fieldset",11)(14,"label",8),e._uU(15,"Nombre"),e.qZA(),e._UZ(16,"input",14),e.qZA()()()()),2&o){const t=n.index,i=e.oxw();e.xp6(1),e.s9C("formGroupName",t),e.xp6(6),e.Q6J("disabled",!i.editing),e.xp6(6),e.Q6J("disabled",!0)}}let Pe=(()=>{class o{constructor(t,i,r,a,d,u){this.providerService=t,this.authHttpService=i,this.extraService=r,this.formBuilder=a,this.router=d,this.cd=u,this.editing=!1,this.false=!1}ngOnInit(){sessionStorage.getItem("serviceReportId")&&sessionStorage.getItem("isNew"),sessionStorage.getItem("serviceReportId")&&!sessionStorage.getItem("isNew")&&(this.loadForm(),this.loadData()),sessionStorage.getItem("serviceReportId")||(this.editing=!0,this.loadForm(),this.firstStep())}loadForm(){this.recommendationsListForm=new s.cw({serviceProviderRecommendationsFormsBefore:new s.Oe([]),serviceProviderRecommendationsFormsAfter:new s.Oe([]),serviceProviderRecommendationsFormsDuring:new s.Oe([])})}firstStep(){this.extraService.findRecommendationsByType("1").subscribe(t=>{for(let i=0;i<t.length;i++)this.serviceProviderRecommendationsFormsBefore=this.recommendationsListForm.get("serviceProviderRecommendationsFormsBefore"),this.serviceProviderRecommendationsFormsBefore.push(this.formBuilder.group({recommendationId:t[i].id,apply:[],serviceProviderId:[],name:t[i].detail}));this.cd.detectChanges()}),this.extraService.findRecommendationsByType("2").subscribe(t=>{for(let i=0;i<t.length;i++)this.serviceProviderRecommendationsFormsDuring=this.recommendationsListForm.get("serviceProviderRecommendationsFormsDuring"),this.serviceProviderRecommendationsFormsDuring.push(this.formBuilder.group({recommendationId:t[i].id,apply:[],serviceProviderId:[],name:t[i].detail}));this.cd.detectChanges()}),this.extraService.findRecommendationsByType("3").subscribe(t=>{for(let i=0;i<t.length;i++)this.serviceProviderRecommendationsFormsDuring=this.recommendationsListForm.get("serviceProviderRecommendationsFormsAfter"),this.serviceProviderRecommendationsFormsDuring.push(this.formBuilder.group({recommendationId:t[i].id,apply:[],serviceProviderId:[],name:t[i].detail}));this.cd.detectChanges()})}save(){console.log(this.recommendationsListForm.controls.serviceProviderRecommendationsFormsBefore.value)}loadData(){this.serviceProviderId=sessionStorage.getItem("serviceReportId"),this.providerService.getServiceRecommendationsDetails(this.serviceProviderId).subscribe(t=>{this.extraService.findRecommendationsByType("1").subscribe(i=>{for(let r=0;r<i.length;r++)this.serviceProviderRecommendationsFormsBefore=this.recommendationsListForm.get("serviceProviderRecommendationsFormsBefore"),this.serviceProviderRecommendationsFormsBefore.push(this.formBuilder.group({recommendationId:i[r].id,apply:t[r].apply,serviceProviderId:t[r].serviceProviderId,name:i[r].detail}));this.cd.detectChanges()}),this.extraService.findRecommendationsByType("2").subscribe(i=>{for(let r=0;r<i.length;r++)this.serviceProviderRecommendationsFormsDuring=this.recommendationsListForm.get("serviceProviderRecommendationsFormsDuring"),this.serviceProviderRecommendationsFormsDuring.push(this.formBuilder.group({recommendationId:i[r].id,apply:t[r].apply,serviceProviderId:t[r].serviceProviderId,name:i[r].detail}));this.cd.detectChanges()}),this.extraService.findRecommendationsByType("3").subscribe(i=>{for(let r=0;r<i.length;r++)this.serviceProviderRecommendationsFormsDuring=this.recommendationsListForm.get("serviceProviderRecommendationsFormsAfter"),this.serviceProviderRecommendationsFormsDuring.push(this.formBuilder.group({recommendationId:i[r].id,apply:t[r].apply,serviceProviderId:t[r].serviceProviderId,name:i[r].detail}));this.cd.detectChanges()})})}getArrayAfter(){return this.recommendationsListForm.get("serviceProviderRecommendationsFormsAfter")}getArrayDuring(){return this.recommendationsListForm.get("serviceProviderRecommendationsFormsDuring")}getArrayBefore(){return this.recommendationsListForm.get("serviceProviderRecommendationsFormsBefore")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b),e.Y36(h.U),e.Y36(I),e.Y36(s.qu),e.Y36(m.F0),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["service-provider"]],decls:15,vars:6,consts:[[3,"formGroup"],["formArrayName","serviceProviderRecommendationsFormsBefore",4,"ngFor","ngForOf"],[1,"separator","my-10"],["formArrayName","serviceProviderRecommendationsFormsDuring",4,"ngFor","ngForOf"],["formArrayName","serviceProviderRecommendationsFormsAfter",4,"ngFor","ngForOf"],["formArrayName","serviceProviderRecommendationsFormsBefore"],[1,"row","p-t-20","col-md-12",3,"formGroupName"],["hidden","",1,"col-md-3"],[1,"form-label"],["formControlName","recommendationId",1,"form-control"],[1,"col-md-1"],[3,"disabled"],["formControlName","apply","type","checkbox","value","",1,"form-check-input"],[1,"col-md-11"],["formControlName","name",1,"form-control"],["formArrayName","serviceProviderRecommendationsFormsDuring"],["formArrayName","serviceProviderRecommendationsFormsAfter"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"h2"),e._uU(2,"Antes de la fumigaci\xf3n"),e.qZA(),e.YNc(3,Ne,17,3,"div",1),e._UZ(4,"div",2),e.qZA(),e.TgZ(5,"form",0)(6,"h2"),e._uU(7,"Durante la fumigaci\xf3n"),e.qZA(),e.YNc(8,qe,17,3,"div",3),e._UZ(9,"div",2),e.qZA(),e.TgZ(10,"form",0)(11,"h2"),e._uU(12,"Despu\xe9s de la fumigaci\xf3n"),e.qZA(),e.YNc(13,Ue,17,3,"div",4),e._UZ(14,"div",2),e.qZA()),2&t&&(e.Q6J("formGroup",i.recommendationsListForm),e.xp6(3),e.Q6J("ngForOf",i.getArrayBefore().controls),e.xp6(2),e.Q6J("formGroup",i.recommendationsListForm),e.xp6(3),e.Q6J("ngForOf",i.getArrayDuring().controls),e.xp6(2),e.Q6J("formGroup",i.recommendationsListForm),e.xp6(3),e.Q6J("ngForOf",i.getArrayAfter().controls))},dependencies:[v.sg,s._Y,s.Fj,s.Wl,s.JJ,s.JL,s.sg,s.u,s.x0,s.CE],encapsulation:2}),o})(),Re=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[v.ez,m.Bz.forChild([{path:"",component:M},{path:"cebadero",component:L},{path:"cebadero/form",component:re},{path:"service-provider",component:ce},{path:"service-provider/form",component:be,children:[{path:"details",component:Se},{path:"pest",component:ye},{path:"recommendations",component:Pe},{path:"",redirectTo:"details",pathMatch:"full"},{path:"**",redirectTo:"details",pathMatch:"full"}]}]),N.HB,Q.q,F.TU,_.vi,N.QX,R.IJ,s.u5,s.UX]}),o})()}}]);