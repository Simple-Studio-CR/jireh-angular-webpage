"use strict";(self.webpackChunkdemo2=self.webpackChunkdemo2||[]).push([[941],{941:(Zt,I,l)=>{l.r(I),l.d(I,{ClientsModule:()=>vt});var d=l(9808),m=l(4521),N=l(8915),x=l(7292),t=l(5e3),A=l(9012),h=l(4563),f=l(5057),_=l(6298),J=l(7136),y=l(7232);function q(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.clickEnterClientForm(null,null,null))}),t._UZ(1,"i",28),t._uU(2," Crear "),t.qZA()}}function B(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"a",29),t._uU(3),t.qZA(),t.TgZ(4,"span",30),t._uU(5),t.qZA()(),t.TgZ(6,"td")(7,"a",29),t._uU(8),t.qZA(),t.TgZ(9,"span",30),t._uU(10),t.qZA()(),t.TgZ(11,"td",31)(12,"a",32),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.clickEnterReport(r.id,r.name,r))}),t._UZ(13,"span",33),t.qZA(),t.TgZ(14,"a",32),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.clickEnterClientForm(r.id,r.name,r))}),t._UZ(15,"span",34),t.qZA(),t.TgZ(16,"a",35),t._UZ(17,"span",36),t.qZA()()()}if(2&i){const e=s.$implicit;t.xp6(3),t.hij(" ",e.name," "),t.xp6(2),t.hij(" ",e.identification," "),t.xp6(3),t.hij(" ",e.mail," "),t.xp6(2),t.hij(" ",e.contact," "),t.xp6(3),t.Q6J("inlineSVG","./assets/media/icons/duotune/graphs/gra003.svg"),t.xp6(2),t.Q6J("inlineSVG","./assets/media/icons/duotune/art/art005.svg"),t.xp6(2),t.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen027.svg")}}const k=function(){return[5,10,25,100]};let Q=(()=>{class i{constructor(e,n,o,r){this.service=e,this.authHttpService=n,this.router=o,this.cd=r,this.title="Clientes",this.totalRegister=0,this.pageNo=0,this.pageSize=10,this.edit=!1}ngOnInit(){sessionStorage.removeItem("clientId"),sessionStorage.removeItem("clientName"),sessionStorage.removeItem("client"),this.rangePage()}clickEnterReport(e,n,o){sessionStorage.setItem("clientId",e),sessionStorage.setItem("clientName",n),sessionStorage.setItem("client",JSON.stringify(o)),this.router.navigate(["reports"])}clickEnterClientForm(e,n,o){"string"==typeof e&&sessionStorage.setItem("clientId",e),"string"==typeof n&&sessionStorage.setItem("clientName",n),o&&sessionStorage.setItem("client",JSON.stringify(o)),this.router.navigate(["clients/view"])}paginator(e){this.pageNo=e.pageIndex,this.pageSize=e.pageSize,this.rangePage()}rangePage(){this.service.listAll().subscribe(r=>{this.clients=r,this.cd.detectChanges()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(A.a),t.Y36(h.U),t.Y36(m.F0),t.Y36(t.sBO))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-clients"]],decls:39,vars:11,consts:[[1,"card","mb-10"],[1,"card-body","d-flex","align-items-center","py-8"],[1,"d-flex","h-80px","w-80px","flex-shrink-0","flex-center","position-relative"],["src","assets/media/icons/duotune/coding/cod010.svg",1,"h-40px","me-10"],[1,"ms-6"],[1,"list-unstyled","text-gray-600","fw-bold","fs-6","p-0","m-0"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"col-1"],["routerLink","/dashboard",1,"btn","btn-warning","margin-left"],["data-placement","top","data-toggle","tooltip",1,"fas","fa-arrow-left"],[1,"card","card-custom"],[1,"card-header","card-header-stretch","overflow-auto"],[1,"card-header","border-0","pt-5"],[1,"card-title","align-items-start","flex-column"],[1,"card-label","fw-bolder","fs-3","mb-1"],[1,"text-muted","mt-1","fw-bold","fs-7"],[1,"card-toolbar"],["data-kt-menu-flip","top-end","data-kt-menu-placement","bottom-end","data-kt-menu-trigger","click","type","button",1,"btn","btn-sm","btn-icon","btn-color-primary","btn-active-light-primary"],[1,"svg-icon","svg-icon-2",3,"inlineSVG"],[1,"card-body","py-3"],[1,"table-responsive"],[1,"table","table-row-dashed","table-striped","table-row-gray-300","align-middle","gs-0","gy-4"],[1,"fw-bolder","text-muted"],[1,"mb-1"],[1,"mb-1","text-end"],[4,"ngFor","ngForOf"],["aria-label","Select page","showFirstLastButtons","",1,"float-left","mx-2",3,"length","pageIndex","pageSizeOptions","pageSize","page"],[1,"btn","btn-primary",3,"click"],["data-placement","top","data-toggle","tooltip",1,"fas","fa-plus"],[1,"text-dark","fw-bolder","text-hover-primary","d-block","fs-6"],[1,"text-muted","fw-bold","text-muted","d-block","fs-7"],[1,"text-end"],[1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm","me-1",3,"click"],[1,"svg-icon","svg-icon-3","svg-icon-success",3,"inlineSVG"],[1,"svg-icon","svg-icon-3","svg-icon-warning",3,"inlineSVG"],["href","#",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm"],[1,"svg-icon","svg-icon-3","svg-icon-danger",3,"inlineSVG"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"img",3),t.qZA(),t.TgZ(4,"div",4)(5,"p",5),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.YNc(8,q,3,0,"button",6),t._UZ(9,"a",7),t.TgZ(10,"button",8),t._UZ(11,"i",9),t._uU(12," Volver "),t.qZA()()()(),t.TgZ(13,"div",10)(14,"div",11)(15,"div",12)(16,"h3",13)(17,"span",14),t._uU(18,"Listado de Clientes"),t.qZA(),t.TgZ(19,"span",15),t._uU(20,"Registrados en el Sistema"),t.qZA()(),t.TgZ(21,"div",16)(22,"button",17),t._UZ(23,"span",18),t.qZA(),t._UZ(24,"app-dropdown-menu2"),t.qZA()(),t.TgZ(25,"div",19)(26,"div",20)(27,"table",21)(28,"thead")(29,"tr",22)(30,"th",23),t._uU(31,"Info"),t.qZA(),t.TgZ(32,"th",23),t._uU(33,"Contacto"),t.qZA(),t.TgZ(34,"th",24),t._uU(35,"Acciones"),t.qZA()()(),t.TgZ(36,"tbody"),t.YNc(37,B,18,7,"tr",25),t.qZA()(),t.TgZ(38,"mat-paginator",26),t.NdJ("page",function(r){return n.paginator(r)}),t.qZA()()()()()),2&e&&(t.xp6(6),t.hij(" ",t.lcZ(7,8,"DASHBOARD.ICONS.CLIENTS")," "),t.xp6(2),t.Q6J("ngIf",n.authHttpService.hasRole("ROLE_ADMIN")),t.xp6(15),t.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen024.svg"),t.xp6(14),t.Q6J("ngForOf",n.clients),t.xp6(1),t.Q6J("length",n.totalRegister)("pageIndex",n.pageNo)("pageSizeOptions",t.DdM(10,k))("pageSize",n.pageSize))},dependencies:[d.sg,d.O5,m.rH,f.NW,_.d$,J.w,y.X$]}),i})();var a=l(3075),O=l(5226),p=l.n(O),Z=l(2627),g=l(2843),u=l(262),F=l(520),S=l(7560);let w=(()=>{class i{constructor(e,n,o,r){this.http=e,this.authService=n,this.router=o,this.variables=r}notAllowed(e){return 401==e.status||403==e.status}findByClientId(e){return this.http.get(this.variables.getServiceEndpoint()+"/clients/branches/client/"+e,{}).pipe((0,u.K)(n=>(this.notAllowed(n),(0,g._)(n))))}findById(e){return this.http.get(this.variables.getServiceEndpoint()+"/clients/branches/id/"+e,{headers:this.variables.getAuthHeader()}).pipe((0,u.K)(n=>(this.notAllowed(n),(0,g._)(n))))}saveBranch(e){return this.http.post(this.variables.getServiceEndpoint()+"/clients/branches",e,{headers:this.variables.getAuthHeader()}).pipe((0,u.K)(n=>(this.notAllowed(n),(0,g._)(n))))}editBranch(e,n){return this.http.put(this.variables.getServiceEndpoint()+"/clients/branches/"+n,e,{headers:this.variables.getAuthHeader()}).pipe((0,u.K)(o=>(this.notAllowed(o),(0,g._)(o))))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(F.eN),t.LFG(h.U),t.LFG(m.F0),t.LFG(S.E))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function H(i,s){1&i&&(t.TgZ(0,"div",52),t._uU(1," Cliente guardado exitosamente. "),t.qZA())}function Y(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",53),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.enableEdit())}),t._uU(1," Editar "),t.qZA()}}function G(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",54),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.branchEnterReport(null,null))}),t._uU(1," Nueva Sucursal "),t.qZA()}}function R(i,s){if(1&i&&(t.TgZ(0,"button",55),t._uU(1," Guardar "),t.qZA()),2&i){const e=t.oxw();t.Q6J("disabled",e.isUpdating)}}function W(i,s){if(1&i&&(t.TgZ(0,"button",55),t._uU(1," Guardar "),t.qZA()),2&i){const e=t.oxw();t.Q6J("disabled",e.isUpdating)}}function V(i,s){if(1&i&&(t.TgZ(0,"button",55),t._uU(1," Guardar "),t.qZA()),2&i){const e=t.oxw();t.Q6J("disabled",e.isUpdating)}}function L(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",56),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.branchEnterReport(null,null))}),t._uU(1," A\xf1adir Sucursal "),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",e.isUpdating)}}function D(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"li",13)(1,"button",57),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.setActiveTab(o.clientTabsEnum.BRANCHES))}),t._uU(2," Sucursales "),t.qZA()()}}function z(i,s){if(1&i&&(t.TgZ(0,"option",58),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("ngValue",e.numberProvince),t.xp6(1),t.hij("",e.province," ")}}function K(i,s){if(1&i&&(t.TgZ(0,"option",58),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("ngValue",e.cantonId),t.xp6(1),t.hij("",e.canton," ")}}function M(i,s){if(1&i&&(t.TgZ(0,"option",58),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("ngValue",e.districtId),t.xp6(1),t.hij("",e.district," ")}}function P(i,s){if(1&i&&(t.TgZ(0,"option",58),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("ngValue",e.neighborhoodId),t.xp6(1),t.hij("",e.neighborhood," ")}}function j(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"a",59),t._uU(3),t.qZA(),t.TgZ(4,"span",60),t._uU(5),t.qZA()(),t.TgZ(6,"td",61)(7,"a",62),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.branchEnterReport(r.id,r.name))}),t._UZ(8,"span",63),t.qZA(),t.TgZ(9,"a",64),t._UZ(10,"span",65),t.qZA()()()}if(2&i){const e=s.$implicit;t.xp6(3),t.hij(" ",e.name," "),t.xp6(2),t.hij(" ",e.id," "),t.xp6(3),t.Q6J("inlineSVG","./assets/media/icons/duotune/art/art005.svg"),t.xp6(2),t.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen027.svg")}}const $=function(i){return{"margin-left":i}},U=function(i){return{active:i}},X=function(){return[5,10,25,100]};var v=(()=>{return(i=v||(v={}))[i.CLIENT=0]="CLIENT",i[i.BRANCHES=1]="BRANCHES",v;var i})();let tt=(()=>{class i{constructor(e,n,o,r,c,b,T,Ct){this.serviceProvince=e,this.service=n,this.formBuilder=o,this.authService=r,this.branchesService=c,this.addressService=b,this.router=T,this.cd=Ct,this.title="Nuevo Cliente",this.clientTabsEnum=v,this.activeTab=this.clientTabsEnum.CLIENT,this.isUpdating=!1,this.isEditing=!1,this.isNew=!1,this.totalRegister=0,this.pageNo=0,this.pageSize=10}ngOnInit(){sessionStorage.removeItem("branchId"),sessionStorage.removeItem("branchName"),this.clientForm=new a.cw({identification:new a.NI(""),typeOfId:new a.NI(""),name:new a.NI(""),mail:new a.NI(""),contact:new a.NI(""),scope:new a.NI(""),province:new a.NI(""),canton:new a.NI(""),district:new a.NI(""),neigh:new a.NI(""),address:new a.NI("")}),sessionStorage.getItem("clientId")||this.createClient(),sessionStorage.getItem("clientId")&&this.editClient(),this.loadIdType()}paginator(e){this.pageNo=e.pageIndex,this.pageSize=e.pageSize,this.rangePage()}rangePage(){}setActiveTab(e){this.activeTab=e}onClientUpdate(){this.isEditing&&!this.isNew&&(this.isUpdating=!0,this.service.updateClient(this.clientForm.value,sessionStorage.getItem("clientId")).subscribe(e=>{this.editedClient=e,this.isUpdating=!1,p().fire("Cliente Actualizado","El cliente se actualiz\xf3 correctamente","success"),this.isNew=!1,this.isEditing=!1})),this.isEditing&&this.isNew&&this.service.save(this.clientForm.value).subscribe(e=>{this.editedClient=e.client,this.isUpdating=!1,this.isNew=!1,this.isEditing=!0,sessionStorage.setItem("clientId",this.editedClient.id),this.cd.detectChanges(),p().fire("Correcto",`Se guard\xf3 el cliente ${this.editedClient.name}`,"success"),this.router.navigate(["/clients/view"])})}loadProvince(){this.serviceProvince.listAll().subscribe(e=>{this.province=e,this.cd.detectChanges()}),this.clientForm.controls.province.valueChanges.subscribe(e=>{this.loadCanton(e),this.cd.detectChanges()})}loadCanton(e){this.serviceProvince.listCanton(e).subscribe(n=>{this.canton=n,this.cd.detectChanges()}),this.clientForm.controls.canton.valueChanges.subscribe(n=>{this.loadDistrict(n),this.cd.detectChanges()})}loadDistrict(e){this.serviceProvince.listDistrict(e).subscribe(n=>{this.district=n,this.cd.detectChanges()}),this.clientForm.controls.district.valueChanges.subscribe(n=>{this.loadNeigh(n),this.cd.detectChanges()})}loadNeigh(e){this.serviceProvince.listNeigh(e).subscribe(n=>this.neigh=n),this.cd.detectChanges()}enableEdit(){this.isEditing=!0}isNewClient(){this.isNew=!0}loadIdType(){var e;null===(e=this.clientForm.get("typeOfId"))||void 0===e||e.valueChanges.subscribe(n=>{1==n&&(this.idTypeLength=9),(2==n||4==n)&&(this.idTypeLength=10),(3==n||5==n)&&(this.idTypeLength=12)})}back(){sessionStorage.removeItem("clientId"),this.router.navigate(["/clients"])}editClient(){this.loadProvince(),this.cd.detectChanges();let e=sessionStorage.getItem("clientId");this.service.findById(e).subscribe(n=>{this.clientForm.patchValue({identification:n.identification,typeOfId:n.typeOfId,name:n.name,mail:n.mail,contact:n.contact,scope:n.scope,province:n.province,canton:n.canton,district:n.district,neigh:n.neigh,address:n.address})}),this.branchesService.findByClientId(e).subscribe(n=>{this.listBranches=n,this.cd.detectChanges()})}createClient(){this.loadProvince(),this.isNewClient(),this.enableEdit()}saveBranches(){}loadBranch(e,n,o,r,c,b,T){return this.formBuilder.group({clientId:sessionStorage.getItem("clientId"),id:e,name:n,branchProvince:o,branchCanton:r,branchDistrict:c,branchNeigh:b,address:T})}createItem(e){return this.formBuilder.group({clientId:sessionStorage.getItem("clientId")})}onBranchsIsUpdating(){console.log("estamos updatiando las sucurusales")}branchEnterReport(e,n){"string"==typeof e&&(sessionStorage.setItem("branchId",e),this.router.navigate(["/clients/view/branch"])),null==e&&this.router.navigate(["/clients/view/branch"])}addBranch(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.U),t.Y36(A.a),t.Y36(a.qu),t.Y36(h.U),t.Y36(w),t.Y36(Z.U),t.Y36(m.F0),t.Y36(t.sBO))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-form-clients"]],decls:88,vars:30,consts:[[1,"card","bg-light","mb-3"],[1,"sp_choose_main_wrapper"],[1,"container"],[1,"row"],[1,"card-body"],["class","alert alert-success",4,"ngIf"],["class","btn btn-warning mr-2",3,"click",4,"ngIf"],["class","btn btn-info mr-2",3,"click",4,"ngIf"],["class","btn btn-success mr-2","form","clientForm","type","submit",3,"disabled",4,"ngIf"],["class","btn btn-light-info mr-2","type","button",3,"disabled","click",4,"ngIf"],[1,"btn","btn-light-primary","mr-2",3,"ngClass","click"],[1,"mt-3"],["id","pills-tab","role","tablist",1,"nav","nav-pills","mb-3"],["role","presentation",1,"nav-item"],["aria-controls","client-data","aria-selected","false","data-bs-target","#client-data","data-bs-toggle","pill","id","client-data-tab","role","tab","type","button",1,"nav-link",3,"click"],["class","nav-item","role","presentation",4,"ngIf"],["id","pills-tabContent",1,"tab-content"],["aria-labelledby","client-data-tab","id","client-data","role","tabpanel",1,"tab-pane","fade","show","active",3,"ngClass"],["id","clientForm",3,"formGroup","ngSubmit"],[3,"disabled"],[1,"row","p-t-20"],[1,"col-md-6"],["for","name",1,"form-label"],["formControlName","name","id","name","maxlength","80","type","text",1,"form-control"],["for","typeOfId",1,"form-label"],["formControlName","typeOfId","id","typeOfId",1,"form-select"],["disabled","","value","null"],["value","01"],["value","02"],["value","03"],["for","identification",1,"form-label"],["formControlName","identification","id","identification","type","text",1,"form-control",3,"maxLength"],[1,"col-md-3"],["for","mail",1,"form-label"],["formControlName","mail","id","mail","type","text",1,"form-control"],["for","contact",1,"form-label"],["formControlName","contact","id","contact","maxlength","8","type","text",1,"form-control"],["for","scope",1,"form-label"],["formControlName","scope","id","scope","maxlength","250","type","text",1,"form-control"],[1,"form-label"],["formControlName","province",1,"form-select"],[3,"ngValue",4,"ngFor","ngForOf"],["formControlName","canton",1,"form-select"],["formControlName","district",1,"form-select"],["formControlName","neigh",1,"form-select"],["aria-labelledby","branches-data-tab","id","branches-data","role","tabpanel",1,"tab-pane","fade","show",3,"ngClass"],[1,"table","table-row-dashed","table-striped","table-row-gray-300","align-middle","gs-0","gy-4"],[1,"fw-bolder","text-muted"],[1,"mb-1"],[1,"mb-1","text-end"],[4,"ngFor","ngForOf"],["aria-label","Select page","showFirstLastButtons","",1,"float-left","mx-2",3,"length","pageIndex","pageSizeOptions","pageSize","page"],[1,"alert","alert-success"],[1,"btn","btn-warning","mr-2",3,"click"],[1,"btn","btn-info","mr-2",3,"click"],["form","clientForm","type","submit",1,"btn","btn-success","mr-2",3,"disabled"],["type","button",1,"btn","btn-light-info","mr-2",3,"disabled","click"],["aria-controls","branches-data","aria-selected","false","data-bs-target","#branches-data","data-bs-toggle","pill","id","branches-data-tab","role","tab","type","button",1,"nav-link",3,"click"],[3,"ngValue"],[1,"text-dark","fw-bolder","text-hover-primary","d-block","fs-6"],[1,"text-muted","fw-bold","text-muted","d-block","fs-7"],[1,"text-end"],[1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm","me-1",3,"click"],[1,"svg-icon","svg-icon-3","svg-icon-warning",3,"inlineSVG"],["href","#",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm"],[1,"svg-icon","svg-icon-3","svg-icon-danger",3,"inlineSVG"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t.YNc(5,H,2,0,"div",5),t.YNc(6,Y,2,0,"button",6),t.YNc(7,G,2,0,"button",7),t.YNc(8,R,2,1,"button",8),t.YNc(9,W,2,1,"button",8),t.YNc(10,V,2,1,"button",8),t.YNc(11,L,2,1,"button",9),t.TgZ(12,"button",10),t.NdJ("click",function(){return n.back()}),t._uU(13," Volver "),t.qZA(),t.TgZ(14,"div",11)(15,"ul",12)(16,"li",13)(17,"button",14),t.NdJ("click",function(){return n.setActiveTab(n.clientTabsEnum.CLIENT)}),t._uU(18," Datos "),t.qZA()(),t.YNc(19,D,3,0,"li",15),t.qZA(),t.TgZ(20,"div",16)(21,"div",17)(22,"form",18),t.NdJ("ngSubmit",function(){return n.onClientUpdate()}),t.TgZ(23,"fieldset",19)(24,"div",20)(25,"div",21)(26,"label",22),t._uU(27,"Nombre"),t.qZA(),t._UZ(28,"input",23),t.qZA(),t.TgZ(29,"div",21)(30,"label",24),t._uU(31,"Tipo de Identificacion"),t.qZA(),t.TgZ(32,"select",25)(33,"option",26),t._uU(34,"Seleccione Tipo de Identificacion"),t.qZA(),t.TgZ(35,"option",27),t._uU(36,"F\xedsica"),t.qZA(),t.TgZ(37,"option",28),t._uU(38,"Jur\xeddica"),t.qZA(),t.TgZ(39,"option",29),t._uU(40,"DIMEX"),t.qZA()()(),t.TgZ(41,"div",21)(42,"label",30),t._uU(43,"Identificacion"),t.qZA(),t._UZ(44,"input",31),t.qZA(),t.TgZ(45,"div",32)(46,"label",33),t._uU(47,"Correo"),t.qZA(),t._UZ(48,"input",34),t.qZA(),t.TgZ(49,"div",32)(50,"label",35),t._uU(51,"Telefono"),t.qZA(),t._UZ(52,"input",36),t.qZA(),t.TgZ(53,"div",32)(54,"label",37),t._uU(55,"Alcance"),t.qZA(),t._UZ(56,"input",38),t.qZA(),t.TgZ(57,"div",32)(58,"label",39),t._uU(59,"Provincia"),t.qZA(),t.TgZ(60,"select",40),t.YNc(61,z,2,2,"option",41),t.qZA()(),t.TgZ(62,"div",32)(63,"label",39),t._uU(64,"Cant\xf3n"),t.qZA(),t.TgZ(65,"select",42),t.YNc(66,K,2,2,"option",41),t.qZA()(),t.TgZ(67,"div",32)(68,"label",39),t._uU(69,"Distrito"),t.qZA(),t.TgZ(70,"select",43),t.YNc(71,M,2,2,"option",41),t.qZA()(),t.TgZ(72,"div",32)(73,"label",39),t._uU(74,"Barrio"),t.qZA(),t.TgZ(75,"select",44),t.YNc(76,P,2,2,"option",41),t.qZA()()()()()(),t.TgZ(77,"div",45)(78,"table",46)(79,"thead")(80,"tr",47)(81,"th",48),t._uU(82,"Info"),t.qZA(),t.TgZ(83,"th",49),t._uU(84,"Acciones"),t.qZA()()(),t.TgZ(85,"tbody"),t.YNc(86,j,11,4,"tr",50),t.qZA()(),t.TgZ(87,"mat-paginator",51),t.NdJ("page",function(r){return n.paginator(r)}),t.qZA()()()()()()()()()),2&e&&(t.xp6(5),t.Q6J("ngIf",n.editedClient),t.xp6(1),t.Q6J("ngIf",n.authService.hasRole("ROLE_ADMIN")&&!n.isEditing&&n.activeTab===n.clientTabsEnum.CLIENT),t.xp6(1),t.Q6J("ngIf",n.authService.hasRole("ROLE_ADMIN")&&!n.isEditing&&n.activeTab===n.clientTabsEnum.BRANCHES),t.xp6(1),t.Q6J("ngIf",n.isEditing&&!n.isNew),t.xp6(1),t.Q6J("ngIf",n.isEditing&&n.isNew&&n.activeTab===n.clientTabsEnum.CLIENT),t.xp6(1),t.Q6J("ngIf",n.isEditing&&n.isNew&&n.activeTab===n.clientTabsEnum.BRANCHES),t.xp6(1),t.Q6J("ngIf",n.isEditing&&!n.isNew&&n.activeTab===n.clientTabsEnum.BRANCHES),t.xp6(1),t.Q6J("ngClass",t.VKq(23,$,n.authService.hasRole("ROLE_ADMIN"))),t.xp6(7),t.Q6J("ngIf",!n.isNew),t.xp6(2),t.Q6J("ngClass",t.VKq(25,U,n.activeTab===n.clientTabsEnum.CLIENT)),t.xp6(1),t.Q6J("formGroup",n.clientForm),t.xp6(1),t.Q6J("disabled",!n.isEditing),t.xp6(21),t.Q6J("maxLength",n.idTypeLength),t.xp6(17),t.Q6J("ngForOf",n.province),t.xp6(5),t.Q6J("ngForOf",n.canton),t.xp6(5),t.Q6J("ngForOf",n.district),t.xp6(5),t.Q6J("ngForOf",n.neigh),t.xp6(1),t.Q6J("ngClass",t.VKq(27,U,n.activeTab===n.clientTabsEnum.BRANCHES)),t.xp6(9),t.Q6J("ngForOf",n.listBranches),t.xp6(1),t.Q6J("length",n.totalRegister)("pageIndex",n.pageNo)("pageSizeOptions",t.DdM(29,X))("pageSize",n.pageSize))},dependencies:[d.mk,d.sg,d.O5,f.NW,_.d$,a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.nD,a.sg,a.u]}),i})();var et=l(5802);let nt=(()=>{class i{constructor(e,n,o,r){this.http=e,this.authService=n,this.router=o,this.variables=r}notAllowed(e){return 401==e.status||403==e.status}findByBranchId(e){return this.http.get(this.variables.getServiceEndpoint()+"/clients/warehouse/branch/"+e,{}).pipe((0,u.K)(n=>(this.notAllowed(n),(0,g._)(n))))}save(e){return this.http.post(this.variables.getServiceEndpoint()+"/clients/warehouse/",e,{}).pipe((0,u.K)(n=>(this.notAllowed(n),(0,g._)(n))))}edit(e,n){return this.http.put(this.variables.getServiceEndpoint()+"/clients/edit-warehouse/"+n,e,{}).pipe((0,u.K)(o=>(this.notAllowed(o),(0,g._)(o))))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(F.eN),t.LFG(h.U),t.LFG(m.F0),t.LFG(S.E))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function it(i,s){1&i&&(t.TgZ(0,"div",42),t._uU(1," Cliente guardado exitosamente. "),t.qZA())}function ot(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onCreateBranch())}),t._uU(1," Guardar Sucursal "),t.qZA()}}function st(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",44),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.enableEdit())}),t._uU(1," Editar "),t.qZA()}}function at(i,s){if(1&i&&(t.TgZ(0,"button",45),t._uU(1," Actualizar Sucursal "),t.qZA()),2&i){const e=t.oxw();t.Q6J("disabled",e.isUpdating)}}function rt(i,s){if(1&i&&(t.TgZ(0,"button",46),t._uU(1," Guardar Bodega "),t.qZA()),2&i){const e=t.oxw();t.Q6J("disabled",e.isUpdating)}}function lt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",47),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.wareHouseEnter(null,null,!0,!1))}),t._uU(1," A\xf1adir Bodega / Oficina "),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",e.isUpdating)}}function ct(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"li",14)(1,"button",48),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.setActiveTab(o.clientTabsEnum.WAREHOUSE))}),t._uU(2," Bodegas / Oficinas "),t.qZA()()}}function dt(i,s){if(1&i&&(t.TgZ(0,"option",49),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("ngValue",e.numberProvince),t.xp6(1),t.hij(" ",e.province," ")}}function mt(i,s){if(1&i&&(t.TgZ(0,"option",49),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("ngValue",e.cantonId),t.xp6(1),t.hij(" ",e.canton," ")}}function gt(i,s){if(1&i&&(t.TgZ(0,"option",49),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("ngValue",e.districtId),t.xp6(1),t.hij(" ",e.district," ")}}function ut(i,s){if(1&i&&(t.TgZ(0,"option",49),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("ngValue",e.neighborhoodId),t.xp6(1),t.hij(" ",e.neighborhood," ")}}function pt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"form",50),t.NdJ("ngSubmit",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onCreateWarehouse())}),t.TgZ(1,"fieldset",20)(2,"div",21)(3,"div",51)(4,"label",52),t._uU(5,"Nombre"),t.qZA(),t._UZ(6,"input",53),t.qZA(),t.TgZ(7,"div",54)(8,"label",55),t._uU(9,"Plano"),t.qZA(),t._UZ(10,"input",56),t.qZA()()()()}if(2&i){const e=t.oxw();t.Q6J("formGroup",e.warehouseForm),t.xp6(1),t.Q6J("disabled",!e.isEditing)}}function ht(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"a",57),t._uU(3),t.qZA(),t.TgZ(4,"span",58),t._uU(5),t.qZA()(),t.TgZ(6,"td",59)(7,"a",60),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.wareHouseEnter(r.id,r.name,!1,!0))}),t._UZ(8,"span",61),t.qZA(),t.TgZ(9,"a",62),t._UZ(10,"span",63),t.qZA()()()}if(2&i){const e=s.$implicit;t.xp6(3),t.hij(" ",e.name," "),t.xp6(2),t.hij(" ",e.id," "),t.xp6(3),t.Q6J("inlineSVG","./assets/media/icons/duotune/art/art005.svg"),t.xp6(2),t.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen027.svg")}}const bt=function(i){return{"margin-left":i}},E=function(i){return{active:i}},ft=function(){return[5,10,25,100]};var C=(()=>{return(i=C||(C={}))[i.BRANCHES=0]="BRANCHES",i[i.WAREHOUSE=1]="WAREHOUSE",C;var i})();let _t=(()=>{class i{constructor(e,n,o,r,c,b){this.branchService=e,this.authService=n,this.cd=o,this.router=r,this.serviceProvince=c,this.serviceWareHouse=b,this.title="Sucursal - Bodegas/Oficinas",this.totalRegister=0,this.pageNo=0,this.pageSize=10,this.clientTabsEnum=C,this.activeTab=this.clientTabsEnum.BRANCHES,this.isEditing=!1,this.isNew=!1,this.isUpdating=!1,this.newWarehouse=!1,this.isUpdateWarehouse=!1}ngOnInit(){this.loadForm(),this.loadProvince(),sessionStorage.getItem("branchId")&&this.loadBranch(),sessionStorage.getItem("branchId")||(this.isNew=!0,this.isEditing=!0)}paginator(e){this.pageNo=e.pageIndex,this.pageSize=e.pageSize,this.rangePage()}rangePage(){}loadBranch(){this.branchService.findById(sessionStorage.getItem("branchId")).subscribe(e=>{console.log(e),this.clientForm.patchValue({name:e.name,province:e.province,canton:e.canton,district:e.district,neighborhood:e.neighborhood,addressDetails:e.addressDetails,clientId:sessionStorage.getItem("clientId")})}),this.cd.detectChanges(),this.loadWareHouse()}wareHouseEnter(e,n,o,r){sessionStorage.removeItem("warehouseId"),sessionStorage.setItem("warehouseId",e),this.newWarehouse=o,this.isUpdateWarehouse=r,this.isEditing=!0,this.warehouseForm.patchValue({name:n})}onClientUpdate(){let e=sessionStorage.getItem("branchId");this.branchService.editBranch(this.clientForm.value,e).subscribe(n=>{console.log(n),p().fire("Nueva Bodega "+n.name+" creada con \xe9xito",n.name,"success")}),this.newWarehouse=!1,this.isUpdateWarehouse=!1,this.isEditing=!1,this.isUpdating=!1,this.isNew=!1}setActiveTab(e){this.activeTab=e}back(){this.router.navigate(["/clients/view"])}enableEdit(){this.isEditing=!0}loadForm(){this.clientForm=new a.cw({name:new a.NI(""),province:new a.NI(""),canton:new a.NI(""),district:new a.NI(""),neighborhood:new a.NI(""),addressDetails:new a.NI(""),clientId:new a.NI("")}),this.warehouseForm=new a.cw({name:new a.NI(""),sketch:new a.NI(""),branchId:new a.NI(sessionStorage.getItem("branchId"))})}loadProvince(){this.serviceProvince.listAll().subscribe(e=>{this.province=e,this.cd.detectChanges()}),this.clientForm.controls.province.valueChanges.subscribe(e=>{this.loadCanton(e),this.cd.detectChanges()})}loadCanton(e){this.serviceProvince.listCanton(e).subscribe(n=>{this.canton=n,this.cd.detectChanges()}),this.clientForm.controls.canton.valueChanges.subscribe(n=>{this.loadDistrict(n),this.cd.detectChanges()})}loadDistrict(e){this.serviceProvince.listDistrict(e).subscribe(n=>{this.district=n,this.cd.detectChanges()}),this.clientForm.controls.district.valueChanges.subscribe(n=>{this.loadNeigh(n),this.cd.detectChanges()})}loadNeigh(e){this.serviceProvince.listNeigh(e).subscribe(n=>this.neigh=n),this.cd.detectChanges()}loadWareHouse(){this.serviceWareHouse.findByBranchId(sessionStorage.getItem("branchId")).subscribe(e=>{this.listWareHouse=e,console.log(e," las bodegas"),this.cd.detectChanges()})}onCreateWarehouse(){if(this.newWarehouse&&this.serviceWareHouse.save(this.warehouseForm.value).subscribe(e=>{console.log(e," new"),p().fire("Nueva Bodega "+e.Warehouse.name+" creada con \xe9xito",e.name,"success"),this.loadWareHouse(),this.cd.detectChanges(),this.loadForm()}),this.isUpdateWarehouse){console.log("aqui vamos bien");let e=sessionStorage.getItem("warehouseId");this.serviceWareHouse.edit(this.warehouseForm.value,e).subscribe(n=>{console.log(n," edit"),p().fire("La Bodega "+n.name+" fue editada con \xe9xito",n.name,"success"),this.loadWareHouse(),this.cd.detectChanges(),this.loadForm()})}this.newWarehouse=!1,this.isUpdateWarehouse=!1,this.isEditing=!1}onCreateBranch(){this.clientForm.patchValue({clientId:sessionStorage.getItem("clientId")}),console.log(this.clientForm.value),this.branchService.saveBranch(this.clientForm.value).subscribe(e=>{p().fire("Nueva Sucursal "+e.Branch.name+" creada con \xe9xito",e.Branch.name,"success"),sessionStorage.setItem("branchId",e.Branch.id),this.isNew=!1,this.isUpdating=!1,this.isEditing=!1,this.cd.detectChanges()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(w),t.Y36(h.U),t.Y36(t.sBO),t.Y36(m.F0),t.Y36(Z.U),t.Y36(nt))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-form-clients"]],decls:64,vars:29,consts:[[1,"card","bg-light","mb-3"],[1,"sp_choose_main_wrapper"],[1,"container"],[1,"row"],[1,"card-body"],["class","alert alert-success",4,"ngIf"],["class","btn btn-success mr-2",3,"click",4,"ngIf"],["class","btn btn-warning mr-2",3,"click",4,"ngIf"],["class","btn btn-success mr-2","form","clientForm","type","submit",3,"disabled",4,"ngIf"],["class","btn btn-success mr-2","form","warehouseForm","type","submit",3,"disabled",4,"ngIf"],["class","btn btn-light-info mr-2","type","button",3,"disabled","click",4,"ngIf"],[1,"btn","btn-light-primary","mr-2",3,"ngClass","click"],[1,"mt-3"],["id","pills-tab","role","tablist",1,"nav","nav-pills","mb-3"],["role","presentation",1,"nav-item"],["aria-controls","client-data","aria-selected","false","data-bs-target","#client-data","data-bs-toggle","pill","id","client-data-tab","role","tab","type","button",1,"nav-link",3,"click"],["class","nav-item","role","presentation",4,"ngIf"],["id","pills-tabContent",1,"tab-content"],["aria-labelledby","client-data-tab","id","client-data","role","tabpanel",1,"tab-pane","fade","show","active",3,"ngClass"],["id","clientForm",3,"formGroup","ngSubmit"],[3,"disabled"],[1,"row","p-t-20"],[1,"col-md-6"],["for","name",1,"form-label"],["formControlName","name","id","name","maxlength","80","type","text",1,"form-control"],[1,"col-md-3"],[1,"form-label"],["formControlName","province",1,"form-select"],[3,"ngValue",4,"ngFor","ngForOf"],["formControlName","canton",1,"form-select"],["formControlName","district",1,"form-select"],["formControlName","neighborhood",1,"form-select"],["for","addressDetails",1,"form-label"],["formControlName","addressDetails","id","addressDetails","maxlength","250","type","text",1,"form-control"],["aria-labelledby","branches-data-tab","id","branches-data","role","tabpanel",1,"tab-pane","fade","show",3,"ngClass"],["id","warehouseForm",3,"formGroup","ngSubmit",4,"ngIf"],[1,"table","table-row-dashed","table-striped","table-row-gray-300","align-middle","gs-0","gy-4"],[1,"fw-bolder","text-muted"],[1,"mb-1"],[1,"mb-1","text-end"],[4,"ngFor","ngForOf"],["aria-label","Select page","showFirstLastButtons","",1,"float-left","mx-2",3,"length","pageIndex","pageSizeOptions","pageSize","page"],[1,"alert","alert-success"],[1,"btn","btn-success","mr-2",3,"click"],[1,"btn","btn-warning","mr-2",3,"click"],["form","clientForm","type","submit",1,"btn","btn-success","mr-2",3,"disabled"],["form","warehouseForm","type","submit",1,"btn","btn-success","mr-2",3,"disabled"],["type","button",1,"btn","btn-light-info","mr-2",3,"disabled","click"],["aria-controls","branches-data","aria-selected","false","data-bs-target","#branches-data","data-bs-toggle","pill","id","branches-data-tab","role","tab","type","button",1,"nav-link",3,"click"],[3,"ngValue"],["id","warehouseForm",3,"formGroup","ngSubmit"],[1,"col-md-5"],["for","nameW",1,"form-label"],["formControlName","name","id","nameW","maxlength","80","type","text",1,"form-control"],[1,"col-md-4"],["for","sketch",1,"form-label"],["formControlName","sketch","id","sketch","maxlength","80","type","file",1,"form-control"],[1,"text-dark","fw-bolder","text-hover-primary","d-block","fs-6"],[1,"text-muted","fw-bold","text-muted","d-block","fs-7"],[1,"text-end"],[1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm","me-1",3,"click"],[1,"svg-icon","svg-icon-3","svg-icon-warning",3,"inlineSVG"],["href","#",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm"],[1,"svg-icon","svg-icon-3","svg-icon-danger",3,"inlineSVG"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t.YNc(5,it,2,0,"div",5),t.YNc(6,ot,2,0,"button",6),t.YNc(7,st,2,0,"button",7),t.YNc(8,at,2,1,"button",8),t.YNc(9,rt,2,1,"button",9),t.YNc(10,lt,2,1,"button",10),t.TgZ(11,"button",11),t.NdJ("click",function(){return n.back()}),t._uU(12," Volver "),t.qZA(),t.TgZ(13,"div",12)(14,"ul",13)(15,"li",14)(16,"button",15),t.NdJ("click",function(){return n.setActiveTab(n.clientTabsEnum.BRANCHES)}),t._uU(17," Datos "),t.qZA()(),t.YNc(18,ct,3,0,"li",16),t.qZA(),t.TgZ(19,"div",17)(20,"div",18)(21,"form",19),t.NdJ("ngSubmit",function(){return n.onClientUpdate()}),t.TgZ(22,"fieldset",20)(23,"div",21)(24,"div",22)(25,"label",23),t._uU(26,"Nombre"),t.qZA(),t._UZ(27,"input",24),t.qZA(),t.TgZ(28,"div",25)(29,"label",26),t._uU(30,"Provincia"),t.qZA(),t.TgZ(31,"select",27),t.YNc(32,dt,2,2,"option",28),t.qZA()(),t.TgZ(33,"div",25)(34,"label",26),t._uU(35,"Cant\xf3n"),t.qZA(),t.TgZ(36,"select",29),t.YNc(37,mt,2,2,"option",28),t.qZA()(),t.TgZ(38,"div",25)(39,"label",26),t._uU(40,"Distrito"),t.qZA(),t.TgZ(41,"select",30),t.YNc(42,gt,2,2,"option",28),t.qZA()(),t.TgZ(43,"div",25)(44,"label",26),t._uU(45,"Barrio"),t.qZA(),t.TgZ(46,"select",31),t.YNc(47,ut,2,2,"option",28),t.qZA()(),t.TgZ(48,"div",22)(49,"label",32),t._uU(50,"Direcci\xf3n"),t.qZA(),t._UZ(51,"input",33),t.qZA()()()()(),t.TgZ(52,"div",34),t.YNc(53,pt,11,2,"form",35),t.TgZ(54,"table",36)(55,"thead")(56,"tr",37)(57,"th",38),t._uU(58,"Info"),t.qZA(),t.TgZ(59,"th",39),t._uU(60,"Acciones"),t.qZA()()(),t.TgZ(61,"tbody"),t.YNc(62,ht,11,4,"tr",40),t.qZA()(),t.TgZ(63,"mat-paginator",41),t.NdJ("page",function(r){return n.paginator(r)}),t.qZA()()()()()()()()()),2&e&&(t.xp6(5),t.Q6J("ngIf",n.editedBranch),t.xp6(1),t.Q6J("ngIf",n.authService.hasRole("ROLE_ADMIN")&&n.isEditing&&n.activeTab===n.clientTabsEnum.BRANCHES&&n.isNew),t.xp6(1),t.Q6J("ngIf",n.authService.hasRole("ROLE_ADMIN")&&!n.isEditing&&n.activeTab===n.clientTabsEnum.BRANCHES),t.xp6(1),t.Q6J("ngIf",n.isEditing&&!n.isNew&&!n.newWarehouse&&!n.isUpdateWarehouse),t.xp6(1),t.Q6J("ngIf",n.isEditing&&(n.newWarehouse||n.isUpdateWarehouse)),t.xp6(1),t.Q6J("ngIf",!n.isUpdateWarehouse&&!n.newWarehouse&&n.activeTab===n.clientTabsEnum.WAREHOUSE),t.xp6(1),t.Q6J("ngClass",t.VKq(22,bt,n.authService.hasRole("ROLE_ADMIN"))),t.xp6(7),t.Q6J("ngIf",!n.isNew),t.xp6(2),t.Q6J("ngClass",t.VKq(24,E,n.activeTab===n.clientTabsEnum.BRANCHES)),t.xp6(1),t.Q6J("formGroup",n.clientForm),t.xp6(1),t.Q6J("disabled",!n.isEditing),t.xp6(10),t.Q6J("ngForOf",n.province),t.xp6(5),t.Q6J("ngForOf",n.canton),t.xp6(5),t.Q6J("ngForOf",n.district),t.xp6(5),t.Q6J("ngForOf",n.neigh),t.xp6(5),t.Q6J("ngClass",t.VKq(26,E,n.activeTab===n.clientTabsEnum.WAREHOUSE)),t.xp6(1),t.Q6J("ngIf",n.newWarehouse||n.isUpdateWarehouse),t.xp6(9),t.Q6J("ngForOf",n.listWareHouse),t.xp6(1),t.Q6J("length",n.totalRegister)("pageIndex",n.pageNo)("pageSizeOptions",t.DdM(28,ft))("pageSize",n.pageSize))},dependencies:[d.mk,d.sg,d.O5,f.NW,_.d$,a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.nD,a.sg,a.u]}),i})(),vt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[d.ez,m.Bz.forChild([{path:"",component:Q},{path:"view",component:tt},{path:"view/branch",component:_t}]),N.HB,x.q,f.TU,_.vi,N.QX,et.IJ,a.u5,a.UX]}),i})()}}]);